{"version":3,"sources":["plugins/access/index.js","plugins/Layouts/Column.js","plugins/Layouts/Row.js","plugins/tools/Label.js","plugins/icons/IconButton.js","plugins/menuPanel/SearchBar.js","plugins/Layouts/Spaces.js","plugins/menuPanel/ListItem.js","plugins/Layouts/Center.js","plugins/menuPanel/AddRow.js","plugins/menuPanel/BottomBarMenu.js","tree/actions/types.js","plugins/requests/index.js","plugins/canvases/utils/packUtils.js","tree/actions/items.js","plugins/Layouts/Absolute.js","plugins/inputs/Input.js","plugins/inputs/Select.js","plugins/tools/Chip.js","plugins/inputs/MultiSelect.js","plugins/menuPanel/inspector/Inspector.js","tree/actions/libs.js","tree/actions/cats.js","Views/MenuPanel.js","plugins/editor/Editor.js","plugins/schemaPanel/SwitchEditorBtn.js","plugins/tools/Composer.js","plugins/tools/FileDownloader.js","plugins/tools/CopyToClipBoard.js","plugins/schemaPanel/BarButtons.js","plugins/schemaPanel/BottomBarGen.js","plugins/schemaPanel/BottomBarSchema.js","plugins/tools/Mask.js","plugins/schemaPanel/DragMask.js","plugins/tools/Start.js","plugins/canvases/utils/canvasActions.js","plugins/canvases/OpenPanelCanvas.js","Views/SchemaPanel.js","plugins/canvases/pack/Pack.js","plugins/canvases/pack/LibraryPack.js","plugins/canvases/paint/Tag.js","plugins/canvases/pack/TypesPack.js","plugins/canvases/paint/Frames.js","plugins/canvases/MainCanvas.js","plugins/menuModal/Menu.js","Views/Main.js","App.js","tree/tree.js","index.js"],"names":["get","collection","path","value","split","i","length","dim","dimensions","time","timeings","color","code","colors","startsWith","indexOf","icon","getType","typeOrName","icons","Column","styled","div","props","zIndex","height","background","flex","shadowColor","defaultProps","propTypes","PropTypes","number","oneOfType","string","Row","width","menuItem","Label","fontSize","weight","IconBtn","iconSize","iconPadding","onClick","iconStyle","btnStyle","rest","classes","makeStyles","theme","padding","btn","useStyles","IconButton","className","size","Icon","access","SearchBar","label","nested","onBack","marginLeft","marginTop","renderBack","SpaceAround","Srow","selected","ListItem","handleRowClick","handleRemove","handleEdit","parent","useBranch","useState","mode","setMode","setValue","handleRemoveClick","e","stopPropagation","changeMadeToEdit","changeMadeToButton","edit","close","ClickAwayListener","onClickAway","key","onKeyUp","TextField","autoFocus","fullWidth","onChange","target","trimStart","variant","style","justifyContent","isSelected","renderButtons","Center","overflow","open","AddRow","handleAdd","focusItem","useEffect","add","cursor","BottomBar","BackRow","BottomBarMenu","types","viewKey","collapse","dispatch","handleCollapse","tree","set","RenderCollapseButton","transform","setTypes","data","getAllTypes","typesByGroup","allTypes","g","typs","concat","Object","entries","map","el","t","type","getTypesToSelect","group","typesToSelect","filter","optionFormatFields","getOptionFormat","name","libraryPack","typesPack","axios","require","rootUrl","params","from","query","getLibraryPack","getTypesPack","generate","items","amount","schema","then","res","catch","err","console","error","response","onSchemaChange","library","category","onChangeFromEditor","replaceSchema","getValueByRendererType","renderer","placeholder","onAddFromPack","additionalFields","AdditionalFields","innerRenderer","getAdditionalFields","num","Math","floor","random","changeDragState","setItemToFocus","item","editItem","oldName","newName","addItem","field","JSON","stringify","removeItem","focus","lib","cat","Absolute","top","bottom","left","right","Input","onFocus","onBlur","initValue","inputType","Select","options","onSelect","setOnFocus","findInOptions","v","find","o","toLowerCase","position","setTimeout","selection","maxHeight","boxShadow","borderBottom","handleSelect","renderList","MyChip","onDelete","Chip","margin","MultiSelect","multiValue","setMultiValue","getFilteredList","filtered","toReturn","forEach","setInitValue","isEmpty","overflowX","handleDelete","values","renderMultiValue","ButtonsRow","show","Inspector","typ","keys","includes","getGroupFromType","setGroup","initType","k","getTypeByKey","setType","tempItem","setTempItem","tempData","setTempData","showButtons","setShowButtons","prefix","setPrefix","suffix","setSuffix","setSize","addEmpty","setAddEmpty","randomSize","setRandomSize","additionalValues","setAdditionalValues","groups","focusedItem","focused","categoriesPath","setCategoriesPath","revertChanges","stableCompare","useCallback","theSame","tempGenerate","Boolean","isUndefined","changeAddEmpty","changeTempItem","changeSize","changeRandomSize","changePrefix","changeSuffix","changeAdditionalValues","newItem","changeSchema","newItems","Placeholder","groupOption","selectedItem","Checkbox","marginRight","checked","disabled","ren","rendererType","updateOptions","typeOptions","Array","isArray","renderString","renderersDir","autocomplete","autocompleteArray","val","array","renderFromType","pure","setOptions","showGutter","tabSize","renderEditor","Button","setLibToSelected","setLibs","libraries","projectName","setLibToFocus","addLib","log","message","removeLib","editLib","getCategoriesFromLibrary","setCatToSelected","setCats","cats","setCatToFocus","addCategory","editCategory","selectedCategory","removeCategory","getItemsFromCategory","generateFromCat","setKey","newKey","schemaName","onCategorySelected","CollapseColumn","LeftPanel","libs","stableDispatch","libsActions","RenderList","handleClickOnLib","onLibrarySelected","handleClickOnCat","catsActions","handleClickOnItem","itemsActions","handleRemoveLib","onRemoveLibrary","handleRemoveCat","onRemoveCategory","handleRemoveItem","onRemoveItem","handleEditLib","onEditLibrary","handleEditCat","onEditCategory","handleEditItem","onEditItem","listOf","getListOf","RenderAddRow","addTo","trim","onAddLibrary","onAddCategory","onAddItem","getLabel","Editor","isData","editorRef","useRef","mockData","initCode","setInitCode","setCode","codeFromProps","current","session","editor","getSession","undoManager","getUndoManager","reset","setUndoManager","ref","debounceChangePeriod","onLoad","c","isEqual","newCode","parse","updateSchema","showPrintMargin","highlightActiveLine","showLineNumbers","SwitchButtonCont","selectedBtn","indicator","backgroundColor","SwitchEditorBtn","onSwitch","CodeSelected","codeClass","schemaClass","Tabs","Tab","root","Composer","createElement","mapChildren","children","React","Children","child","isDecorator","cloneElement","propsTypes","func","isRequired","FileDownloader","content","fileName","fileExtension","saveFile","preventDefault","parsed","blob","Blob","url","window","URL","createObjectURL","a","document","body","appendChild","href","download","click","revokeObjectURL","removeChild","object","bool","CopyToClipBoard","copyToClipboard","textToCopy","navigator","clipboard","writeText","display","select","execCommand","ButtonsCont","filename","BarButtons","CopyButton","DownloadButton","AmountInput","BottomBarGen","setAmount","gen","PlayButton","RenderAmountInput","BottomBarSchema","Mask","opacity","mask","RoundWrapper","p","DragMask","text","setOpen","onMouseEnter","onMouseLeave","transition","maxWidth","Start","measure","bind","createCanvas","this","canvas","do","canvasReady","d3","id","append","attr","Bounding","getElementById","getBoundingClientRect","v4","Component","prevMousePlace","move","board","line","x","d","y","curve","on","mousePlace","offsetX","offsetY","duration","ease","remove","OpenPanelCanvas","setclose","onCanvasReady","frame","createFrame","dropCircles","TopBar","InnerColumn","SchemaPanel","dragState","editorWrapper","editorWidth","setEditorWidth","editorToRender","setEditorToRender","handleSwitchEditor","RenderActionBar","minWidth","RenderBottomBar","InnerFlex","Pack","circlePadding","marginBottom","showMainCircle","limitByLevel","fillOpacity","moveOnCircleColor","moveOnTextColor","getTranslate","createPack","normalizeData","firstLevelClick","secondLevelClick","thirdLevelClick","clickIsBlock","packDomain","colorScaleRange","clickColor","textClasses","in","out","init","mainGroup","mainData","newData","level","nameKey","countBack","push","isMainData","packLayout","treeRoot","nodes","descendants","n","depth","createNodes","paintCircles","paintTexts","circles","selectAll","texts","handleNodeClick","handleNodeDrag","colorScale","domain","range","enter","r","exit","exitCircles","updateCircles","childrenScope","adaptText","radius","cutIn","substring","getFontSize","isChildren","min","max","getTextPosition","exitTexts","updateTexts","clickAction","blink","_clickAction","blockButton","navigateBack","orininalColor","circle","lastClickedId","LibraryPack","l","findLibrary","findCategory","it","findItem","newLib","newCat","editorData","libIndex","findIndex","catIndex","tagsContexts","Tag","index","initPosition","tagHeight","tagWidth","positionX","deltaY","positionY","paintTag","paintText","mouseEvents","tags","TypesPack","dragCircle","dragText","blockDrag","firstMove","panelIsopen","addToSchema","setDrag","event","sourceEvent","prevX","getPrevCircle","movementX","Number","prevY","prevR","prevT","prevFontSize","prevText","getPrevText","TempText","TempFontSize","TempX","TempY","TempR","TempT","getXyFromEvent","dragAction","stop","startDragCircle","startDragText","onDrag","block","checkDrop","endDragText","endDragCircle","initDragStart","call","backTag","removeTag","fillFrame","Logo","img","rotate","MainCanvas","setRotate","handleAddFromPack","handleDragState","getAllLibs","initWithData","setLevelClick","getAllType","setAddToSchema","setDragState","scaleDown","paintFrame","typesTag","projectTag","setSelected","scaleUp","initKey","paintTabs","schemaPanelSize","leftPanelSize","getFlex","userSelect","alt","src","Menu","openMenu","setFocus","closeMenu","MenuHeader","toUpperCase","MenuItem","Modal","onEscapeKeyDown","borderRadius","renderMainMenu","InitMask","Main","loading","setLoading","clearTimeout","LinearProgress","MenuPanel","primary","secondary","createMuiTheme","palette","main","App","Root","useRoot","ThemeProvider","Baobab","packView","drag","selectedLibrary","ReactDOM","render"],"mappings":"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","file":"static/js/main.5d83adb8.chunk.js","sourcesContent":["\nimport colors from \"plugins/config/colors\";\nimport icons from \"plugins/config/icons\";\nimport dimensions from \"plugins/config/dimensions\";\nimport timeings from \"plugins/config/time\";\n\nfunction get(collection, path) {\n    if(!path) return collection;\n    \n    let value = collection;\n    \n    if (typeof path === 'string') {\n        path = path.split(/[.,]/);\n    }\n    \n    for (let i = 0; i < path.length; i++) {\n        \n        if(typeof value === 'undefined'){\n            return undefined;\n        }\n        value = value[path[i]];  \n    }\n    \n    return value; \n};\n\nexport const dim = (path) => {\n    let dimension = get(dimensions,path);\n    return dimension;\n}\n\nexport const time = (path) => {\n    let timing = get(timeings,path);\n    return timing;\n}\n\nexport const color = (path) => {\n    let code = get(colors,path);\n    \n    if ( !(typeof code === 'string') ) {     \n        return code;\n    } \n\n    if ( code.startsWith('#') ) {\n      return code;\n    } \n\n    if ( code.indexOf('.') > -1 || code.indexOf(',') > -1 ){\n        return color(code);\n    }\n\n    return undefined;\n};\n\nexport const icon = (path, getType = false) => {\n    const typeOrName = getType ? 'type' : 'name';\n\n    let code = get(icons,path);\n    \n    if ( typeof code === 'string' && (code.indexOf('.') > -1 || code.indexOf(',') > -1) ){\n        return icon(code,getType);\n    }\n\n    if(!code) return undefined;\n\n    if ( !code[typeOrName] ) {     \n        return code;\n    }\n\n    return code[typeOrName];\n};\n\nexport const translate = (value) => {\n    return value;\n}\n\n","import styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nconst Column = styled.div`\n  z-index: ${props => props.zIndex};\n  position: relative;\n  min-width: 100px;\n  height: ${props => props.height};\n  background: ${props => props.background};\n  display: flex;\n  flex: ${props => props.flex};\n  flex-direction: column;\n  justify-content: flex-start;\n  overflow: auto;\n  box-shadow: 1px 0px 4px 0px ${props => props.shadowColor};\n`;\n\nColumn.defaultProps = {\n  zIndex: 1,\n  flex: 0.2,\n  height: '100%',\n  background: 'inherit',\n  shadowColor: \"rgb(93, 107, 140)\",\n  }\n\nColumn.propTypes = {\n  flex: PropTypes.number,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  background: PropTypes.string,\n  shadowColor: PropTypes.string\n};\n\nexport default Column;\n","import styled from 'styled-components';\nimport PropTypes from \"prop-types\";\nimport { color } from \"plugins/access\";\n\nconst Row = styled.div`  \n  z-index: ${props => props.zIndex};\n  position: relative; \n  overflow: hidden;\n  min-height: 50px;\n  height: ${props => props.height};\n  width: ${props => props.width};\n  background: ${props => props.background};\n  color: ${props => props.color};\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  cursor:  ${(props) => (props.menuItem && 'pointer')};\n  box-shadow: 0px 1px 4px 0px ${props => props.shadowColor};\n  :hover {\n    background: ${(props) => (props.menuItem && color('backgrounds.hover'))};\n    color: ${(props) => (props.menuItem && color('texts.primary'))};\n  }\n  :active {\n    background: ${(props) => (props.menuItem && color('backgrounds.active'))};\n    color: ${(props) => (props.menuItem && color('texts.primary'))};\n  }\n`\n\nRow.defaultProps = {\n  zIndex: 1,\n  width: '100%',\n  height: '50px',\n  background: 'inherit',\n  color: color('texts.secondary'),\n  shadowColor: 'rgb(93, 107, 140)',\n  }\n\nRow.propTypes = {\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  background: PropTypes.string,\n  shadowColor: PropTypes.string\n};\n\nexport default Row;","import styled from 'styled-components';\n\nconst Label = styled.div`   \n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  padding: 0 10px;\n  width: ${props => props.width || 'fit-content'};\n  color: ${props => props.color || 'inherit'};\n  font-size: ${props => props.fontSize || 'inherit'};\n  font-weight:  ${props => props.weight || '400'};\n`\n\nexport default Label;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Icon, IconButton } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport * as access from \"plugins/access\";\r\n\r\nconst IconBtn = ({ iconSize, iconPadding, color, onClick, icon, iconStyle, btnStyle, ...rest }) => {\r\n\r\n  const useStyles = makeStyles(theme => ({\r\n    icon: {\r\n      color: color,\r\n      padding: iconPadding,\r\n      fontSize: iconSize,\r\n      ...iconStyle\r\n    },\r\n    btn: {\r\n        ...btnStyle\r\n    }\r\n  }));\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <IconButton className={classes.btn} size=\"small\" onClick={onClick} {...rest}>\r\n      <Icon className={classes.icon}>{icon}</Icon>\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nIconBtn.defaultProps = {\r\n  onClick: () => {},\r\n  iconSize: 20,\r\n  iconPadding: 5,\r\n  color: access.color(\"texts.primary\"),\r\n  icon: access.icon(\"listItem.remove\"),\r\n  btnStyle: {},\r\n  iconStyle: {},\r\n};\r\n\r\nIconBtn.propTypes = {\r\n  onClick: PropTypes.func,\r\n  iconSize: PropTypes.number,\r\n  iconPadding: PropTypes.number,\r\n  color: PropTypes.string,\r\n  icon: PropTypes.string,\r\n  btnStyle: PropTypes.object,\r\n  iconStyle: PropTypes.object\r\n};\r\n\r\nexport default IconBtn;\r\n","import React from \"react\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport Label from \"plugins/tools/Label\";\r\nimport IconButton from \"plugins/icons/IconButton\";\r\n\r\nfunction SearchBar({ label, nested, onBack }) {\r\n  const renderBack = () => {\r\n    if (!nested) return;\r\n    const btnStyle = { marginLeft: 10, marginTop: 2 };\r\n\r\n    return (\r\n      <IconButton\r\n        icon={access.icon(\"searchBar.back\")}\r\n        color={access.color(\"searchBar.fg\")}\r\n        onClick={onBack}\r\n        btnStyle={btnStyle}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Row background={access.color(\"searchBar.bg\")}>\r\n      {renderBack()}\r\n      <Label color={access.color(\"searchBar.fg\")}>{label}</Label>\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n","import styled from 'styled-components';\n\nconst SpaceBetween = styled.div`   \n  width: ${props => props.width || '50px'};\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`\n\nconst SpaceAround = styled.div`   \n  width: ${props => props.width || '50px'};\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n`\n\nexport { SpaceBetween, SpaceAround };","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport { TextField, ClickAwayListener } from \"@material-ui/core\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport Label from \"plugins/tools/Label\";\r\nimport { SpaceAround } from \"plugins/Layouts/Spaces\";\r\nimport IconButton from \"plugins/icons/IconButton\";\r\n\r\nconst Srow = styled(Row)`\r\n  justify-content: space-between;\r\n  background: ${props =>\r\n    props.selected ? access.color(\"backgrounds.primary\") : \"inherit\"};\r\n  color: ${props =>\r\n    props.selected ? access.color(\"texts.primary\") : \"inherit\"};\r\n`;\r\n\r\nfunction ListItem({ label, handleRowClick, handleRemove, handleEdit, parent }) {\r\n  const { selected } = useBranch({ selected: [\"selected\"] });\r\n  const [mode, setMode] = useState(\"button\");\r\n  const [value, setValue] = useState(label);\r\n\r\n  const handleRemoveClick = e => {\r\n    e.stopPropagation();\r\n    handleRemove(label);\r\n  };\r\n\r\n  const changeMadeToEdit = e => {\r\n    e.stopPropagation();\r\n    setMode(\"edit\");\r\n  };\r\n\r\n  const changeMadeToButton = () => {\r\n    setMode(\"button\");\r\n  };\r\n\r\n  const edit = () => {\r\n    handleEdit(label,value);\r\n    changeMadeToButton();\r\n  };\r\n\r\n  const close = () => {\r\n    setValue(label);\r\n    changeMadeToButton();\r\n  }\r\n\r\n  const handleOnKeyPrass = e => {\r\n    switch (e.key) {\r\n      case \"Escape\":\r\n        close();\r\n        break;\r\n      case \"Enter\":\r\n        edit();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const renderRemove = () => {\r\n    return (\r\n      <IconButton\r\n        onClick={handleRemoveClick}\r\n        icon={access.icon(\"listItem.remove\")}\r\n        color={access.color(\"menuPanel.icon\")}\r\n      />\r\n    );\r\n  };\r\n\r\n  const rendeEdit = () => {\r\n    if(!handleEdit) return null;\r\n\r\n    return (\r\n      <IconButton\r\n        onClick={changeMadeToEdit}\r\n        icon={access.icon(\"listItem.edit\")}\r\n        color={access.color(\"menuPanel.icon\")}\r\n      />\r\n    );\r\n  };\r\n\r\n  const renderButtons = () => {\r\n    const width = handleEdit ? \"85px\" : \"50px\";\r\n\r\n    return (\r\n      <SpaceAround width={width}>\r\n        {rendeEdit()}\r\n        {renderRemove()}\r\n      </SpaceAround>\r\n    );\r\n  };\r\n\r\n  const renderAddBtn = () => {\r\n    if (!value) return null;\r\n\r\n    return (\r\n      <Row\r\n        width={\"50px\"}\r\n        style={{ padding: \"0 5px\", justifyContent: \"center\" }}\r\n      >\r\n        <IconButton\r\n          icon={access.icon(\"listItem.check\")}\r\n          color={access.color(\"texts.secondary\")}\r\n          onClick={edit}\r\n        />\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  if (mode === \"edit\") {\r\n    const handleInputChange = e => {\r\n      setValue(e.target.value.trimStart());\r\n    };\r\n\r\n    return (\r\n      <ClickAwayListener onClickAway={close}>\r\n        <Row key={label} onKeyUp={handleOnKeyPrass}>\r\n          <TextField\r\n            autoFocus={true}\r\n            fullWidth={true}\r\n            value={value}\r\n            onChange={handleInputChange}\r\n            label={\"edit\"}\r\n            variant={\"filled\"}\r\n          />\r\n          {renderAddBtn()}\r\n        </Row>\r\n      </ClickAwayListener>\r\n    );\r\n  }\r\n\r\n  const isSelected = selected === `${parent}:${label}`;\r\n  return (\r\n    <Srow\r\n      key={label}\r\n      menuItem={true}\r\n      selected={isSelected}\r\n      onClick={() => {\r\n        handleRowClick(label);\r\n      }}\r\n    >\r\n      <Label>{label}</Label>\r\n      {renderButtons()}\r\n    </Srow>\r\n  );\r\n}\r\n\r\nexport default ListItem;\r\n","import styled from 'styled-components';\n\nconst Center = styled.div`   \n  display: flex;\n  flex: 1;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  overflow: ${props => props.overflow || 'auto'};\n`\n\nexport default Center;","import React, { useState, useEffect } from \"react\";\r\nimport { TextField, ClickAwayListener } from \"@material-ui/core\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport Center from \"plugins/Layouts/Center\";\r\nimport Label from \"plugins/tools/Label\";\r\nimport IconButton from \"plugins/icons/IconButton\";\r\n\r\nlet open = false;\r\n\r\nfunction AddRow({ label, handleAdd }) {\r\n  const [value, setValue] = useState(\"\");\r\n  const { focusItem } = useBranch({ focusItem: [\"focus\", \"item\"] });\r\n\r\n  useEffect(() => {\r\n    open = false;\r\n  }, []);\r\n\r\n  const handleOnKeyPrass = e => {\r\n    if (!value) return;\r\n    switch (e.key) {\r\n      case \"Escape\":\r\n        setValue(\"\");\r\n        break;\r\n      case \"Enter\":\r\n        add();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const add = () => {\r\n    handleAdd(value);\r\n    setValue(\"\");\r\n  };\r\n\r\n  const renderAddBtn = () => {\r\n    if (!value) return null;\r\n\r\n    return (\r\n      <Row\r\n        width={\"50px\"}\r\n        style={{ padding: \"0 5px\", justifyContent: \"center\" }}\r\n      >\r\n        <IconButton\r\n          icon={access.icon(\"leftPanel.add\")}\r\n          color={access.color(\"texts.secondary\")}\r\n          onClick={add}\r\n        />\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  const renderInput = () => {\r\n    const handleChange = e => {\r\n      if (!open) open = true;\r\n      setValue(e.target.value.trimStart());\r\n    };\r\n\r\n    return (\r\n      <TextField\r\n        autoFocus={open}\r\n        fullWidth={true}\r\n        value={value}\r\n        onChange={handleChange}\r\n        label={label}\r\n        variant={\"filled\"}\r\n      />\r\n    );\r\n  };\r\n\r\n  if (focusItem) {\r\n    return (\r\n      <Row>\r\n        <Center>\r\n          <Label>{focusItem}</Label>\r\n        </Center>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ClickAwayListener\r\n      onClickAway={() => {\r\n        setValue(\"\");\r\n      }}\r\n    >\r\n      <Row style={{ cursor: \"pointer\" }} onKeyUp={handleOnKeyPrass}>\r\n        {renderInput()}\r\n        {renderAddBtn()}\r\n      </Row>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n\r\nexport default AddRow;\r\n","import React from \"react\";\r\n\r\nimport * as access from \"plugins/access\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport IconButton from \"plugins/icons/IconButton\";\r\n\r\nconst BottomBar = styled(Row)`\r\n  justify-content: flex-end;\r\n`;\r\n\r\nconst BackRow = styled(Row)`\r\n  justify-content: center;\r\n`;\r\n\r\nfunction BottomBarMenu({ viewKey }) {\r\n  const { collapse, dispatch } = useBranch({ collapse: [\"collapse\"] });\r\n\r\n  const handleCollapse = () => {\r\n    dispatch(tree => {\r\n      tree.set(\"collapse\", !collapse);\r\n    });\r\n  };\r\n\r\n  const RenderCollapseButton = () => {\r\n    const iconStyle = { transform: collapse ? \"rotate(180deg)\" : \"rotate(0deg)\" }\r\n\r\n    return (\r\n      <BackRow width={\"50px\"} onClick={handleCollapse}>\r\n        <IconButton icon={access.icon(\"leftPanel.collapse\")} iconStyle={iconStyle} />\r\n      </BackRow>\r\n    );\r\n  };\r\n\r\n  if (viewKey === \"initKey\") return <div></div>;\r\n\r\n  return (\r\n    <BottomBar background={access.color(\"bottomBar.bg\")}>\r\n      <RenderCollapseButton />\r\n    </BottomBar>\r\n  );\r\n}\r\n\r\nexport default BottomBarMenu;\r\n","import { find } from \"lodash\";\r\n\r\nlet types;\r\n\r\nexport function setTypes(tree, data) {\r\n  tree.set(\"types\", data);\r\n  types = data;\r\n}\r\n\r\nexport function getAllTypes(typesByGroup) {\r\n  let allTypes = [];\r\n  for (const g in typesByGroup) {\r\n    const typs = typesByGroup[g];\r\n    allTypes = allTypes.concat(Object.entries(typs));\r\n  }\r\n\r\n  allTypes = allTypes.map(el => {\r\n    let t = {...el[1]};\r\n    t.type = el[0];\r\n    return t\r\n  });\r\n\r\n  return allTypes;\r\n}\r\n\r\nexport function getGroupFromType(typ) {\r\n\r\n  for (const group in types) {\r\n      const keys = Object.keys(types[group]);\r\n      if(keys.includes(typ)){\r\n        return getOptionFormat(group);\r\n      } \r\n  }\r\n \r\n  return getOptionFormat('');\r\n}\r\n\r\nexport function getTypesToSelect(group){\r\n\r\n  const allTypes = getAllTypes(types);\r\n\r\n  let typesToSelect = group ? allTypes.filter((t)=>t.group === group) : allTypes;\r\n  typesToSelect = typesToSelect.map((t)=>{ \r\n    const optionFormatFields = getOptionFormat(t.type,t.name);\r\n    return ({...t, ...optionFormatFields }) \r\n  });\r\n\r\n  return typesToSelect;\r\n}\r\n\r\nexport function getTypeByKey(k) {\r\n  const allTypes = getAllTypes(types);\r\n  const type = find(allTypes, el => {\r\n    return(el.type === k);\r\n  });\r\n  return type;\r\n}\r\n\r\nfunction getOptionFormat(value,label) {\r\n  if(typeof label ===  'undefined') label = value; \r\n  return { value, label };\r\n}","const axios = require(\"axios\");\r\nlet port = 5588;\r\n\r\n// function setPort(p) {\r\n//   port=p;\r\n// }\r\n\r\nconst rootUrl = `http://localhost:${port}/mocking_G`;\r\n\r\nfunction get(path, params) {\r\n  let from = `${rootUrl}${path}`;\r\n  let query = { params };\r\n\r\n  return axios.get(from, query);\r\n}\r\n\r\nexport { get };\r\n","let libraryPack;\r\nlet typesPack;\r\n\r\nexport const setLibraryPack = (pack) => {\r\n    libraryPack = pack;\r\n}\r\n\r\nexport const getLibraryPack = () => {\r\n    return libraryPack;\r\n}\r\n\r\nexport const setTypesPack = (pack) => {\r\n    typesPack = pack;\r\n}\r\n\r\nexport const getTypesPack = () => {\r\n    return typesPack;\r\n}\r\n\r\n","import { get } from \"plugins/requests\";\r\nimport { getLibraryPack } from \"plugins/canvases/utils/packUtils\";\r\n\r\nexport function setItems(tree, items) {\r\n  tree.set([\"items\"], items);\r\n}\r\n\r\nexport function generate(tree, { items, amount = 1 }) {\r\n  get(\"/generate\", { schema: items, amount })\r\n    .then(res => {\r\n      tree.set(\"mockData\", res.data);\r\n    })\r\n    .catch(err => {\r\n      //TODO: notify type does not exist\r\n      tree.set(\"mockData\", null);\r\n      console.error(err.response);\r\n    });\r\n}\r\n\r\nexport function tempGenerate(items) {\r\n  return get(\"/generate\", { schema: items, amount:1 })\r\n}\r\n\r\nfunction replaceSchema(tree, items) {\r\n  const library = tree.get(\"selectedLibrary\");\r\n  const category = tree.get(\"selectedCategory\");\r\n  const libraryPack = getLibraryPack();\r\n\r\n  get(\"/replaceSchema\", { schema: items, library, category })\r\n    .then(res => {\r\n      tree.set(\"items\", res.data);\r\n      libraryPack.onChangeFromEditor(library, category, res.data);\r\n    })\r\n    .catch(err => {\r\n      //TODO: notify type does not exist\r\n      console.error(err.response);\r\n    });\r\n}\r\n\r\nexport function onSchemaChange(tree, items) {\r\n  generate(tree, { items, amount: 1 });\r\n  replaceSchema(tree, items);\r\n}\r\n\r\nfunction getValueByRendererType(renderer) {\r\n  switch (renderer.type) {\r\n    case \"number\":\r\n      return 10;\r\n    case \"string\":\r\n      return renderer.placeholder;\r\n    case \"autocompleteArray\":\r\n    case \"array\":\r\n      return [];\r\n\r\n    default:\r\n      return renderer.placeholder;\r\n  }\r\n\r\n  \r\n}\r\n\r\nfunction getAdditionalFields(type) {\r\n  const { renderer } = type;\r\n\r\n  if (!renderer) return {};\r\n\r\n  if (renderer.type) {\r\n    return { value: getValueByRendererType(renderer) };\r\n  }\r\n\r\n  let AdditionalFields = { value: {} };\r\n  for (const key in renderer) {\r\n    const innerRenderer = renderer[key];\r\n    AdditionalFields.value[key] = getValueByRendererType(innerRenderer);\r\n  }\r\n\r\n  return AdditionalFields;\r\n}\r\n\r\nexport function onAddFromPack(tree, type) {\r\n  get(\"/getTypeByKey\", { type }).then(res => {\r\n    const additionalFields = getAdditionalFields(res.data);\r\n    const num = Math.floor(Math.random() * 100);\r\n\r\n    let items = { ...tree.get(\"items\") };\r\n    items[`${type}-${num}`] = {\r\n      type: type,\r\n      ...additionalFields\r\n    };\r\n\r\n    onSchemaChange(tree, items);\r\n  });\r\n}\r\n\r\nexport function changeDragState(tree, value) {\r\n  tree.set(\"drag\", value);\r\n}\r\n\r\nexport function setItemToFocus(tree, item) {\r\n  tree.set([\"focus\", \"item\"], item);\r\n}\r\n\r\nexport function setSelected(tree, item) {\r\n  const cat = tree.get([\"focus\", \"cat\"]);\r\n  tree.set([\"selected\"], `${cat}:${item}`);\r\n}\r\n\r\nexport function editItem(tree, data) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n  const category = tree.get([\"focus\", \"cat\"]);\r\n\r\n  const {oldName, newName} = data;\r\n\r\n  get(\"/editItem\", {library, category, oldName, newName }).then(res => {\r\n    tree.set(\"items\", res.data);\r\n  });\r\n}\r\n\r\nexport function addItem(tree, value) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n  const category = tree.get([\"focus\", \"cat\"]);\r\n\r\n  const field = JSON.stringify({[value]:{}}, null, 2)\r\n\r\n  get(\"/addItem\", { library, category, field })\r\n    .then(res => {\r\n      tree.set(\"items\", res.data);\r\n    })\r\n    .catch(err => {\r\n      console.error(err.response);\r\n    });\r\n}\r\n\r\nexport function removeItem(tree, field) {\r\n  const focus = tree.get([\"focus\"]);\r\n  const library = focus.lib;\r\n  const category = focus.cat;\r\n\r\n  get(\"/removeFromSchema\", { library, category, field }).then(res => {\r\n    tree.set(\"items\", res.data);\r\n    generate(tree, { items: res.data, amount: 1 });\r\n  });\r\n}\r\n","import PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst Absolute = styled.div`\n  position: absolute;\n  top: ${props => props.top};\n  bottom: ${props => props.bottom};\n  left: ${props => props.left};\n  right: ${props => props.right};\n  background: transparent;\n`;\n\nAbsolute.defaultProps = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0\n  }\n  \n  Absolute.propTypes = {\n    top: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    bottom: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    left: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    right: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  }\n  \n  \n  export default Absolute","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { TextField } from \"@material-ui/core\";\r\n\r\nfunction Input({ onFocus, onBlur, onChange, label, initValue, type, ...rest }) {\r\n  const [value, setValue] = useState(initValue);\r\n  const inputType = type === 'array' ? 'string' : type;\r\n\r\n  const getArrayValues = (values) => {\r\n    return values.split(',');\r\n  }\r\n\r\n  useEffect(() => {\r\n    setValue(initValue);\r\n  }, [initValue]);\r\n\r\n  const handleOnChange = e => {\r\n    setValue(e.target.value);\r\n    onChange(e.target.value);\r\n\r\n    if(type === 'array'){\r\n      const value = getArrayValues(e.target.value);\r\n      onChange(value);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TextField\r\n      label={label}\r\n      variant={\"filled\"}\r\n      onChange={handleOnChange}\r\n      onFocus={onFocus}\r\n      onBlur={onBlur}\r\n      value={value}\r\n      type={inputType}\r\n      fullWidth\r\n      {...rest}\r\n    />\r\n  );\r\n}\r\n\r\nInput.defaultProps = {\r\n  initValue: \"\",\r\n  onFocus: ()=>{},\r\n  onBlur: ()=>{},\r\n  onChange: ()=>{}, \r\n  label: 'label',\r\n  type: 'string'\r\n};\r\n\r\nInput.propTypes = {\r\n  initValue: PropTypes.oneOfType([PropTypes.string,PropTypes.number]),\r\n  onFocus: PropTypes.func,\r\n  onBlur: PropTypes.func,\r\n  onChange: PropTypes.func, \r\n  label: PropTypes.string,\r\n  type: PropTypes.string,\r\n};\r\n\r\nexport default Input;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { find } from \"lodash\";\r\nimport { ClickAwayListener } from \"@material-ui/core\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport Column from \"plugins/Layouts/Column\";\r\nimport Absolute from \"plugins/Layouts/Absolute\";\r\nimport Label from \"plugins/tools/Label\";\r\nimport Input from \"plugins/inputs/Input\";\r\n\r\nfunction Select({ options, label, onSelect, initValue }) {\r\n  const [value, setValue] = useState(initValue);\r\n  const [onFocus, setOnFocus] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setValue(initValue);\r\n  }, [initValue]);\r\n\r\n  const findInOptions = v => {\r\n    const selection = find(options, o => {\r\n      return o.label.toLowerCase() === v;\r\n    });\r\n\r\n    return selection;\r\n  };\r\n\r\n  const renderInput = () => {\r\n    const onBlur = () => {\r\n      setTimeout(() => {\r\n        setOnFocus(false);\r\n      }, 200);\r\n    };\r\n\r\n    const onChange = v => {\r\n      setValue({ value: v, label: v });\r\n\r\n      const selection = findInOptions(v);\r\n\r\n      if (selection) {\r\n        onSelect(selection);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Input\r\n        initValue={value.label || \"\"}\r\n        onFocus={() => {\r\n          setOnFocus(true);\r\n        }}\r\n        onBlur={onBlur}\r\n        label={label}\r\n        onChange={onChange}\r\n      />\r\n    );\r\n  };\r\n\r\n  const renderList = () => {\r\n    if (!onFocus) return null;\r\n\r\n    const handleSelect = o => {\r\n      setValue(o);\r\n      onSelect(o);\r\n    };\r\n\r\n    const list = () => {\r\n      const filtered = options.filter(o => o.label.toLowerCase().indexOf(value.label) !== -1);\r\n\r\n      return filtered.map(o => {\r\n        return (\r\n          <Row\r\n            key={o.value}\r\n            style={{\r\n              boxShadow: \"unset\",\r\n              borderBottom: `1px solid ${access.color(\"backgrounds.secondary\")}`\r\n            }}\r\n            background={access.color(\"colors.white\")}\r\n            menuItem={true}\r\n            onClick={() => {\r\n              handleSelect(o);\r\n            }}\r\n          >\r\n            <Label>{o.label}</Label>\r\n          </Row>\r\n        );\r\n      });\r\n    };\r\n\r\n    return (\r\n      <Absolute top={\"55px\"} style={{ zIndex: 10 }}>\r\n        <Column height={\"fit-content\"} style={{ maxHeight: 500 }}>\r\n          {list()}\r\n        </Column>\r\n      </Absolute>\r\n    );\r\n  };\r\n\r\n  const checkSelection = () => {\r\n    const selection = findInOptions(value.label);\r\n\r\n    if (!selection) {\r\n      setValue(initValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={checkSelection}>\r\n      <div style={{ position: \"relative\" }}>\r\n        {renderInput()}\r\n        {renderList()}\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n\r\nSelect.defaultProps = {\r\n  initValue: { value: \"\", label: \"\" },\r\n  options: [],\r\n  label: \"lebel\",\r\n  onSelect: () => {}\r\n};\r\n\r\nSelect.propTypes = {\r\n  initValue: PropTypes.object,\r\n  options: PropTypes.array,\r\n  label: PropTypes.string,\r\n  onSelect: PropTypes.func\r\n};\r\n\r\nexport default Select;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Chip } from \"@material-ui/core\";\r\n\r\n\r\nfunction MyChip({onDelete,value}) {\r\n\r\n  const handleDelete = ()=>{\r\n    onDelete(value);\r\n  }\r\n\r\n  return (\r\n    <Chip style={{margin: 5}} label={value.label} onDelete={handleDelete} variant=\"outlined\" />\r\n  );\r\n}\r\n\r\nMyChip.defaultProps = {\r\n    onDelete: ()=>{},\r\n    value: {}\r\n};\r\n\r\nMyChip.propTypes = {\r\n    onDelete: PropTypes.func,\r\n    value: PropTypes.object,\r\n};\r\n\r\nexport default MyChip;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { find, isEmpty } from \"lodash\";\r\nimport { ClickAwayListener } from \"@material-ui/core\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport Column from \"plugins/Layouts/Column\";\r\nimport Absolute from \"plugins/Layouts/Absolute\";\r\nimport Label from \"plugins/tools/Label\";\r\nimport Chip from \"plugins/tools/Chip\";\r\nimport Input from \"plugins/inputs/Input\";\r\n\r\nfunction MultiSelect({ options, label, onSelect, initValue }) {\r\n  const [multiValue, setMultiValue] = useState(initValue);\r\n  const [value, setValue] = useState({ value: \"\", label: \"\" });\r\n  const [onFocus, setOnFocus] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMultiValue(initValue);\r\n  }, [initValue]);\r\n\r\n  const findInOptions = v => {\r\n    const selection = find(options, o => {\r\n      return o.label.toLowerCase() === v;\r\n    });\r\n\r\n    return selection;\r\n  };\r\n\r\n  const checkSelection = () => {\r\n    const selection = findInOptions(value.label);\r\n\r\n    if (!selection) {\r\n      setMultiValue(initValue);\r\n    }\r\n  };\r\n\r\n  const getFilteredList = () => {\r\n    let filtered = options.filter(o => {\r\n      let toReturn = true;\r\n\r\n      multiValue.forEach(v => {\r\n        if (v.value === o.value) {\r\n          toReturn = false;\r\n        }\r\n      });\r\n\r\n      return toReturn;\r\n    });\r\n\r\n    filtered = filtered.filter(o => o.label.toLowerCase().indexOf(value.label) !== -1);\r\n    return filtered;\r\n  };\r\n\r\n  const handleSelect = o => {\r\n    setMultiValue([o, ...multiValue]);\r\n    onSelect([o, ...multiValue]);\r\n  };\r\n\r\n  const setInitValue = () => {\r\n    setValue({ value: \"\", label: \"\" });\r\n  }\r\n\r\n  const renderInput = () => {\r\n    const onBlur = () => {\r\n      setTimeout(() => {\r\n        setOnFocus(false);\r\n        setInitValue();\r\n      }, 200);\r\n    };\r\n\r\n    const onChange = v => {\r\n      setValue({ value: v, label: v });\r\n\r\n      const selection = findInOptions(v);\r\n\r\n      if (selection) {\r\n        onSelect(selection);\r\n        setInitValue();\r\n      }\r\n    };\r\n\r\n    const handleOnKeyPrass = e => {\r\n      switch (e.key) {\r\n        case \"Escape\":\r\n          setOnFocus(false);\r\n          setInitValue();\r\n          break;\r\n        case \"Enter\":\r\n          const firstValue = getFilteredList()[0];\r\n          if(firstValue) handleSelect(getFilteredList()[0]);\r\n          setOnFocus(false);\r\n          setInitValue();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Input\r\n        initValue={value.label || \"\"}\r\n        onFocus={() => {\r\n          setOnFocus(true);\r\n        }}\r\n        onBlur={onBlur}\r\n        onKeyUp={handleOnKeyPrass}\r\n        label={label}\r\n        onChange={onChange}\r\n      />\r\n    );\r\n  };\r\n\r\n  const renderList = () => {\r\n    if (!onFocus) return null;\r\n\r\n    const list = () => {\r\n      const filtered = getFilteredList();\r\n\r\n      return filtered.map(o => {\r\n        return (\r\n          <Row\r\n            key={o.value}\r\n            style={{\r\n              boxShadow: \"unset\",\r\n              borderBottom: `1px solid ${access.color(\"backgrounds.secondary\")}`\r\n            }}\r\n            background={access.color(\"colors.white\")}\r\n            menuItem={true}\r\n            onClick={() => {\r\n              handleSelect(o);\r\n            }}\r\n          >\r\n            <Label>{o.label}</Label>\r\n          </Row>\r\n        );\r\n      });\r\n    };\r\n\r\n    return (\r\n      <Absolute top={\"55px\"} style={{ zIndex: 10 }}>\r\n        <Column height={\"fit-content\"} style={{ maxHeight: 500 }}>\r\n          {list()}\r\n        </Column>\r\n      </Absolute>\r\n    );\r\n  };\r\n\r\n  const renderMultiValue = () => {\r\n    const handleDelete = value => {\r\n      const values = multiValue.filter(v => {\r\n        return v.value !== value.value;\r\n      });\r\n      setMultiValue(values);\r\n      onSelect(values);\r\n    };\r\n\r\n    return multiValue.map(v => {\r\n      return <Chip key={v.label} value={v} onDelete={handleDelete} />;\r\n    });\r\n  };\r\n\r\n  const renderChips = () => {\r\n    if (isEmpty(multiValue)) return null;\r\n    return <Row style={{ overflowX: \"auto\" }}> {renderMultiValue()} </Row>;\r\n  };\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={checkSelection}>\r\n      <div style={{ position: \"relative\" }}>\r\n        {renderInput()}\r\n        {renderList()}\r\n        {renderChips()}\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n\r\nMultiSelect.defaultProps = {\r\n  initValue: [],\r\n  options: [],\r\n  label: \"lebel\",\r\n  onSelect: () => {}\r\n};\r\n\r\nMultiSelect.propTypes = {\r\n  initValue: PropTypes.array,\r\n  options: PropTypes.array,\r\n  label: PropTypes.string,\r\n  onSelect: PropTypes.func\r\n};\r\n\r\nexport default MultiSelect;\r\n","import React, { useState, useEffect, useCallback, Fragment } from \"react\";\r\nimport { isUndefined } from \"lodash\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\nimport AceEditor from \"react-ace\";\r\nimport { Button, Checkbox } from \"@material-ui/core\";\r\nimport styled from \"styled-components\";\r\n\r\nimport \"ace-builds/src-noconflict/mode-json\";\r\nimport \"ace-builds/src-noconflict/theme-monokai\";\r\nimport \"ace-builds/src-noconflict/theme-xcode\";\r\n\r\nimport {\r\n  getGroupFromType,\r\n  getTypesToSelect,\r\n  getTypeByKey\r\n} from \"tree/actions/types\";\r\nimport { onSchemaChange, tempGenerate } from \"tree/actions/items\";\r\nimport { get } from \"plugins/requests\";\r\n\r\nimport Column from \"plugins/Layouts/Column\";\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport Select from \"plugins/inputs/Select\";\r\nimport MultiSelect from \"plugins/inputs/MultiSelect\";\r\nimport Input from \"plugins/inputs/Input\";\r\nimport Label from \"plugins/tools/Label\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nconst ButtonsRow = styled(Row)`\r\n  display: flex;\r\n  justify-content: space-around;\r\n  height: ${props => (props.show ? \"50px\" : \"0px\")};\r\n  min-height: ${props => (props.show ? \"50px\" : \"0px\")};\r\n  transition: all 500ms;\r\n`;\r\n\r\nfunction getOptionFormat(value, label) {\r\n  if (typeof label === \"undefined\") label = value;\r\n  return { value, label };\r\n}\r\n\r\nfunction Inspector({ item }) {\r\n\r\n  const g = getGroupFromType(item.type);\r\n  const [group, setGroup] = useState(g);\r\n\r\n  let initType = getTypeByKey(item.type) || getOptionFormat(\"\");\r\n  initType.label = initType.name || initType.label;\r\n  const [type, setType] = useState(initType);\r\n\r\n  const [tempItem, setTempItem] = useState(item);\r\n  const [tempData, setTempData] = useState({});\r\n  const [showButtons, setShowButtons] = useState(false);\r\n\r\n  const [prefix, setPrefix] = useState(item.prefix || \"\");\r\n  const [suffix, setSuffix] = useState(item.suffix || \"\");\r\n  const [size, setSize] = useState(item.size);\r\n  const [addEmpty, setAddEmpty] = useState(item.addEmpty || false);\r\n  const [randomSize, setRandomSize] = useState(item.randomSize || false);\r\n\r\n  const [additionalValues, setAdditionalValues] = useState(item.value);\r\n\r\n  const { types } = useBranch({ types: [\"types\"] });\r\n  const groups = Object.keys(types).map(t => {\r\n    return getOptionFormat(t);\r\n  });\r\n\r\n  const typesToSelect = getTypesToSelect(group.value);\r\n\r\n  const { focusedItem } = useBranch({ focusedItem: [\"focus\", \"item\"] });\r\n  const { focused } = useBranch({ focused: [\"focus\"] });\r\n  const { items, dispatch } = useBranch({ items: [\"items\"] });\r\n\r\n  const [categoriesPath, setCategoriesPath] = useState([]);\r\n  useEffect(() => {\r\n    get(\"/getAllCategoriesPath\").then(({data}) => {\r\n      setCategoriesPath(data);\r\n    });\r\n  }, []);\r\n\r\n  const revertChanges = () => {\r\n    setTempItem(item);\r\n    setSize(item.size);\r\n    setPrefix(item.prefix);\r\n    setSuffix(item.suffix);\r\n    setType(initType);\r\n    setAddEmpty(item.addEmpty);\r\n    setGroup(g);\r\n  };\r\n\r\n  const compareItem = () => {\r\n    let theSame = true;\r\n\r\n    tempGenerate({ [focusedItem]: tempItem }).then(res => {\r\n      setTempData(res.data[0]);\r\n    });\r\n\r\n    if (item.type !== type.type) theSame = false;\r\n    else if (Boolean(item.size || size) && item.size !== size) theSame = false;\r\n    else if (\r\n      (!isUndefined(item.randomSize) || !isUndefined(randomSize)) &&\r\n      size &&\r\n      item.randomSize !== randomSize\r\n    )\r\n      theSame = false;\r\n    else if (Boolean(item.prefix || prefix) && item.prefix !== prefix)\r\n      theSame = false;\r\n    else if (Boolean(item.suffix || suffix) && item.suffix !== suffix)\r\n      theSame = false;\r\n    else if (Boolean(item.addEmpty || addEmpty) && item.addEmpty !== addEmpty )  \r\n      theSame = false;  \r\n    else if (JSON.stringify(item.value) !== JSON.stringify(additionalValues))\r\n      theSame = false;\r\n\r\n    if (!theSame) {\r\n      setShowButtons(true);\r\n    } else if (showButtons) {\r\n      setShowButtons(false);\r\n    }\r\n  };\r\n\r\n  const stableCompare = useCallback(compareItem, [\r\n    type,\r\n    size,\r\n    prefix,\r\n    suffix,\r\n    additionalValues,\r\n    randomSize,\r\n    addEmpty\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    stableCompare();\r\n  }, [type, size, addEmpty, prefix, suffix, additionalValues, randomSize, stableCompare]);\r\n\r\n  const changeTypeInSchema = selectedItem => {\r\n    setType(selectedItem);\r\n    changeTempItem(\"type\", selectedItem.type);\r\n  };\r\n\r\n  const changeAddEmpty = () => {\r\n    setAddEmpty(!addEmpty);\r\n    changeTempItem(\"addEmpty\", !addEmpty);\r\n  };\r\n\r\n  const changeSize = value => {\r\n    setSize(value);\r\n    changeTempItem(\"size\", value);\r\n  };\r\n\r\n  const changeRandomSize = () => {\r\n    setRandomSize(!randomSize);\r\n    changeTempItem(\"randomSize\", !randomSize);\r\n  };\r\n\r\n  const changePrefix = value => {\r\n    setPrefix(value);\r\n    changeTempItem(\"prefix\", value);\r\n  };\r\n\r\n  const changeSuffix = value => {\r\n    setSuffix(value);\r\n    changeTempItem(\"suffix\", value);\r\n  };\r\n\r\n  const changeAdditionalValues = value => {\r\n    setAdditionalValues(value);\r\n    changeTempItem(\"value\", value);\r\n  };\r\n\r\n  const changeTempItem = (field, value) => {\r\n    let newItem = { ...tempItem };\r\n\r\n    if (value === \"\") {\r\n      delete newItem[field];\r\n    } else {\r\n      newItem[field] = value;\r\n    }\r\n\r\n    setTempItem(newItem);\r\n  };\r\n\r\n  const changeSchema = () => {\r\n    let newItems = { ...items };\r\n\r\n    newItems[focusedItem] = tempItem;\r\n    dispatch(onSchemaChange, newItems);\r\n  };\r\n\r\n  const handleOnSelectGroup = groupOption => {\r\n    if (groupOption.value !== group.value) {\r\n      setGroup(groupOption);\r\n      getTypesToSelect(groupOption.value);\r\n      setType(getOptionFormat(\"\"));\r\n    }\r\n  };\r\n\r\n  const renderFromType = () => {\r\n    const getRightRender = (ren, i) => {\r\n      const label = ren[0];\r\n      const rendererType = ren[1].type;\r\n      const placeholder = ren[1].placeholder;\r\n      const value = tempItem.value ? tempItem.value[label] : \"\";\r\n\r\n      const updateOptions = (typeOptions = []) => {\r\n        if(!Array.isArray(typeOptions) && typeOptions === \"getAllCategoriesPath\"){\r\n          typeOptions = categoriesPath;\r\n        }\r\n\r\n        return typeOptions;\r\n      }\r\n\r\n      const renderNumber = () => {\r\n        return (\r\n          <Input\r\n            key={i}\r\n            label={access.translate(label)}\r\n            initValue={value}\r\n            type={\"number\"}\r\n            placeholder={placeholder}\r\n            onChange={v =>\r\n              changeAdditionalValues({ ...additionalValues, [label]: v })\r\n            }\r\n          />\r\n        );\r\n      };\r\n\r\n      const renderString = () => {\r\n        return (\r\n          <Input\r\n            key={i}\r\n            label={access.translate(label)}\r\n            initValue={value}\r\n            placeholder={placeholder}\r\n            onChange={v =>\r\n              changeAdditionalValues({ ...additionalValues, [label]: v })\r\n            }\r\n          />\r\n        );\r\n      };\r\n\r\n      const renderArray = () => {\r\n        return (\r\n          <Input\r\n            key={i}\r\n            label={access.translate(label)}\r\n            type={'array'}\r\n            initValue={value}\r\n            placeholder={placeholder}\r\n            onChange={v =>\r\n              changeAdditionalValues({ ...additionalValues, [label]: v })\r\n            }\r\n          />\r\n        );\r\n      }\r\n\r\n      const renderAutoComplete = () => {\r\n        let options = updateOptions(ren[1].options).map(o => {\r\n          return getOptionFormat(o);\r\n        });\r\n\r\n        options = options.filter(o => {\r\n          return o.value !== `${focused.lib}.${focused.cat}`;\r\n        });\r\n\r\n        return (\r\n          <Select\r\n            key={i}\r\n            label={access.translate(label)}\r\n            options={options}\r\n            initValue={getOptionFormat(value)}\r\n            onSelect={v =>\r\n              changeAdditionalValues({\r\n                ...additionalValues,\r\n                [label]: v.value\r\n              })\r\n            }\r\n          />\r\n        );\r\n      };\r\n\r\n      const renderAutoCompleteArray = () => {\r\n\r\n        let options = updateOptions(ren[1].options).map(o => {\r\n          return getOptionFormat(o);\r\n        });\r\n\r\n        options = options.filter(o => {\r\n          return o.value !== `${focused.lib}.${focused.cat}`;\r\n        });\r\n\r\n        const initValue = Array.isArray(value)\r\n          ? value.map(v => {\r\n              return getOptionFormat(v);\r\n            })\r\n          : [];\r\n\r\n        return (\r\n          <MultiSelect\r\n            key={i}\r\n            label={access.translate(label)}\r\n            options={options}\r\n            initValue={initValue}\r\n            onSelect={val =>\r\n              changeAdditionalValues({\r\n                ...additionalValues,\r\n                [label]: val.map(v => {\r\n                  return v.value;\r\n                })\r\n              })\r\n            }\r\n          />\r\n        );\r\n      };\r\n\r\n      const renderersDir = {\r\n        string: renderString,\r\n        number: renderNumber,\r\n        autocomplete: renderAutoComplete,\r\n        autocompleteArray: renderAutoCompleteArray,\r\n        array: renderArray\r\n      };\r\n\r\n      return renderersDir[rendererType]\r\n        ? renderersDir[rendererType]()\r\n        : renderString();\r\n    };\r\n\r\n    if (type.renderer) {\r\n      const renderers = Object.entries(type.renderer);\r\n      return renderers.map(getRightRender);\r\n    }\r\n  };\r\n\r\n  const renderEditor = () => {\r\n    const style = {\r\n      height: \"100%\",\r\n      width: \"100%\"\r\n    };\r\n\r\n    const options = {\r\n      showGutter: false,\r\n      tabSize: 2\r\n    };\r\n\r\n    const code = JSON.stringify(tempData, null, 2);\r\n\r\n    return (\r\n      <div style={{ height: \"400px\", overflow: \"auto\" }}>\r\n        <AceEditor\r\n          style={style}\r\n          mode=\"json\"\r\n          theme=\"monokai\"\r\n          name=\"example\"\r\n          fontSize={14}\r\n          value={code}\r\n          setOptions={options}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderButtons = () => {\r\n    return (\r\n      <ButtonsRow show={showButtons}>\r\n        <Button variant=\"outlined\" color=\"secondary\" onClick={revertChanges}>\r\n          {access.translate(\"Cancel\")}\r\n        </Button>\r\n        <Button variant=\"outlined\" color=\"secondary\" onClick={changeSchema}>\r\n          {access.translate(\"Save\")}\r\n        </Button>\r\n      </ButtonsRow>\r\n    );\r\n  };\r\n\r\n  const renderPrefixSuffix = () => {\r\n    if (type.pure) return null;\r\n\r\n    return (\r\n      <Fragment>\r\n        <Input\r\n          label={access.translate(\"prefix\")}\r\n          initValue={prefix}\r\n          onChange={changePrefix}\r\n        />\r\n        <Input\r\n          label={access.translate(\"suffix\")}\r\n          initValue={suffix}\r\n          onChange={changeSuffix}\r\n        />\r\n      </Fragment>\r\n    );\r\n  };\r\n\r\n  const Placeholder = () => {\r\n    return <div style={{ flex: 1 }}></div>;\r\n  };\r\n\r\n  const renderSize = () => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          boxShadow: \"unset\",\r\n          borderBottom: \"1px solid rgba(0, 0, 0, 0.42)\"\r\n        }}\r\n      >\r\n        <Input\r\n          label={access.translate(\"size\")}\r\n          initValue={size}\r\n          type={\"number\"}\r\n          onChange={changeSize}\r\n        />\r\n\r\n        <Label width={\"140px\"} fontSize={\"13px\"}>\r\n          {access.translate(\"Random Size:\")}\r\n        </Label>\r\n\r\n        <Checkbox\r\n          style={{marginRight: 5}}\r\n          checked={randomSize}\r\n          onChange={changeRandomSize}\r\n          size=\"small\"\r\n          value=\"primary\"\r\n          disabled={!size}\r\n        />\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  const renderAddEmpty = () => {\r\n    return(\r\n      <Row>\r\n        <Label width={\"50%\"} fontSize={\"13px\"}>\r\n          {access.translate(\"Add possible empty items:\")}\r\n        </Label>\r\n        <Checkbox\r\n          style={{ marginRight: 5 }}\r\n          checked={addEmpty}\r\n          onChange={changeAddEmpty}\r\n          size=\"small\"\r\n          value=\"primary\" />\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Column flex={1}>\r\n      <Select\r\n        label={access.translate(\"group\")}\r\n        options={groups}\r\n        initValue={group}\r\n        onSelect={handleOnSelectGroup}\r\n      />\r\n      <Select\r\n        label={access.translate(\"type\")}\r\n        options={typesToSelect}\r\n        initValue={type}\r\n        onSelect={changeTypeInSchema}\r\n      />\r\n\r\n      {renderSize()}\r\n      {renderFromType()}\r\n      {renderPrefixSuffix()}\r\n      {renderAddEmpty()}\r\n      <Placeholder />\r\n      {renderEditor()}\r\n      {renderButtons()}\r\n    </Column>\r\n  );\r\n}\r\n\r\nInspector.defaultProps = {\r\n  item: \"\"\r\n};\r\n\r\nInspector.propTypes = {\r\n  item: PropTypes.object\r\n};\r\n\r\nexport default Inspector;\r\n","import { get } from \"plugins/requests\";\r\n\r\nfunction setLibToSelected(tree,lib) {\r\n  tree.set([\"selectedLibrary\"], lib);\r\n}\r\n\r\nexport function setLibs(tree, data) {\r\n  tree.set([\"libs\"], data.libraries);\r\n  setTimeout(() => { \r\n    tree.set([\"projectName\"], data.projectName);\r\n  })\r\n  \r\n}\r\n\r\nexport function setLibToFocus(tree, lib) {\r\n  tree.set([\"focus\", \"lib\"], lib);\r\n\r\n  if(lib){\r\n    setLibToSelected(tree, lib);\r\n  }\r\n}\r\n\r\nexport function addLib(tree, lib) {\r\n  get(\"/addLibrary\", { library: lib })\r\n    .then(res => {\r\n      tree.set(\"libs\", res.data);\r\n    })\r\n    .catch(err => {\r\n      console.log(err.response.data.message);\r\n    });\r\n}\r\n\r\nexport function removeLib(tree, lib) {\r\n  get(\"/removeLibrary\", { library: lib }).then(res => {\r\n    tree.set(\"libs\", res.data);\r\n  });\r\n}\r\n\r\nexport function editLib(tree, data) {\r\n  const {oldName, newName} = data;\r\n\r\n  get(\"/editLibrary\", { oldName, newName }).then(res => {\r\n    tree.set(\"libs\", res.data);\r\n  });\r\n}\r\n\r\nexport function getCategoriesFromLibrary(tree, library) {\r\n  get(\"/getCategoriesFromLibrary\", { library }).then(res => {\r\n    tree.set(\"cats\", res.data);\r\n    setTimeout(() => {\r\n      tree.set([\"focus\", \"lib\"], library);\r\n      setLibToSelected(tree, library);\r\n    });\r\n  });\r\n}\r\n","import { getLibraryPack } from \"plugins/canvases/utils/packUtils\";\r\nimport { get } from \"plugins/requests\";\r\n\r\nfunction setCatToSelected(tree,cat) {\r\n  tree.set([\"selectedCategory\"], cat);\r\n}\r\n\r\nexport function generateFromCat(tree,category, amount = 1) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n\r\n  get(\"/generate\", { library, category, amount }).then((res)=>{\r\n    tree.set('mockData',res.data);\r\n  }).catch((err)=>{\r\n    //TODO: notify type does not exist\r\n    tree.set('mockData',null);\r\n    console.log(err.response.data.message)\r\n  })\r\n}\r\n\r\nexport function setCats(tree, cats) {\r\n  tree.set([\"cats\"], cats);\r\n}\r\n\r\nexport function setCatToFocus(tree, cat) {\r\n  tree.set([\"focus\", \"cat\"], cat);\r\n\r\n  if(cat){\r\n    setCatToSelected(tree,cat);\r\n  }\r\n}\r\n\r\nexport function addCategory(tree, category) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n\r\n  get(\"/addCategory\", { library, category })\r\n    .then(res => {\r\n      tree.set(\"cats\", res.data);\r\n    })\r\n    .catch(err => {\r\n      console.log(err.response.data.message);\r\n    });\r\n}\r\n\r\nexport function editCategory(tree, data) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n  const selectedCategory = tree.get(\"selectedCategory\");\r\n  const {oldName, newName} = data;\r\n\r\n  get(\"/editCategory\", {library, oldName, newName }).then(res => {\r\n    tree.set(\"cats\", res.data);\r\n\r\n    if(selectedCategory === oldName){\r\n      tree.set(\"selectedCategory\", newName);\r\n    }\r\n\r\n  });\r\n}\r\n\r\nexport function removeCategory(tree, category) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n\r\n  get(\"/removeCategory\", { library, category }).then(res => {\r\n    tree.set(\"cats\", res.data);\r\n  });\r\n}\r\n\r\nexport function getItemsFromCategory(tree, category) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n\r\n  get(\"/getSchema\", { library, category }).then(res => {\r\n    tree.set(\"items\", res.data);\r\n    setTimeout(() => {\r\n      tree.set([\"focus\", \"cat\"], category);\r\n      setCatToSelected(tree,category);\r\n      generateFromCat(tree,category)\r\n    });\r\n  });\r\n}\r\n\r\nexport function setKey(tree, { newKey, schemaName }) {\r\n  const viewKey = tree.get('viewKey');\r\n  const lib = tree.get(['focus','lib']);\r\n  \r\n  if(viewKey !== newKey){\r\n    tree.set('viewKey',newKey);\r\n    \r\n    setTimeout(() => {\r\n        getLibraryPack().onCategorySelected(lib,schemaName);\r\n      }, 200) \r\n  } else {\r\n    getLibraryPack().onCategorySelected(lib,schemaName);\r\n  }\r\n}\r\n","import React, { useEffect, Fragment, useCallback } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport * as access from \"plugins/access\";\r\nimport styled from \"styled-components\";\r\n\r\nimport Column from \"plugins/Layouts/Column\";\r\nimport SearchBar from \"plugins/menuPanel/SearchBar\";\r\nimport ListItem from \"plugins/menuPanel/ListItem\";\r\nimport AddRow from \"plugins/menuPanel/AddRow\";\r\nimport BottomBarMenu from \"plugins/menuPanel/BottomBarMenu\";\r\nimport Inspector from \"plugins/menuPanel/inspector/Inspector\";\r\n\r\nimport * as libsActions from \"tree/actions/libs\";\r\nimport * as catsActions from \"tree/actions/cats\";\r\nimport * as itemsActions from \"tree/actions/items\";\r\n\r\nimport { getLibraryPack } from \"plugins/canvases/utils/packUtils\";\r\nimport { get } from \"plugins/requests\";\r\n\r\nconst CollapseColumn = styled(Column)`\r\n  min-width: 50px;\r\n  transition: flex ${access.time(\"schemaPanel.collapse\")}ms;\r\n  overflow-x: hidden;\r\n`;\r\n\r\nfunction LeftPanel({ viewKey }) {\r\n  const { libs, dispatch } = useBranch({ libs: [\"libs\"] });\r\n  const { projectName } = useBranch({ projectName: [\"projectName\"] });\r\n  const { cats } = useBranch({ cats: [\"cats\"] });\r\n  const { items } = useBranch({ items: [\"items\"] });\r\n  const { focus } = useBranch({ focus: [\"focus\"] });\r\n  const { collapse } = useBranch({ collapse: [\"collapse\"] });\r\n  const libraryPack = getLibraryPack();\r\n\r\n  const stableDispatch = useCallback(dispatch, []) \r\n\r\n  useEffect(() => {\r\n    get(\"/getAllLibraries\").then(res => {\r\n      stableDispatch(libsActions.setLibs, res.data);\r\n    });\r\n  }, [stableDispatch]);\r\n\r\n  const RenderList = () => {\r\n    \r\n\r\n    const getListOf = () => {\r\n      let listOf = \"libs\";\r\n      if(focus.lib){\r\n        listOf = \"cats\";\r\n      }\r\n      if(focus.cat){\r\n        listOf = \"items\";\r\n      }\r\n      if(focus.item){\r\n        listOf = \"inspector\";\r\n      }\r\n    \r\n      return listOf;\r\n    }\r\n\r\n    const handleClickOnLib = label => {\r\n      dispatch(libsActions.getCategoriesFromLibrary, label);\r\n      libraryPack.onLibrarySelected(label);\r\n    };\r\n\r\n    const handleClickOnCat = label => {\r\n      dispatch(catsActions.getItemsFromCategory, label);\r\n      libraryPack.onCategorySelected(focus.lib, label);\r\n      dispatch(catsActions.setKey, { newKey: \"showSchema\", schemaName: label });\r\n    };\r\n\r\n    const handleClickOnItem = label => {\r\n      dispatch(itemsActions.setItemToFocus, label);\r\n    };\r\n\r\n    const handleRemoveLib = label => {\r\n      dispatch(libsActions.removeLib, label);\r\n      libraryPack.onRemoveLibrary(label);\r\n    };\r\n\r\n    const handleRemoveCat = label => {\r\n      dispatch(catsActions.removeCategory, label);\r\n      libraryPack.onRemoveCategory(focus.lib, label);\r\n    };\r\n\r\n    const handleRemoveItem = label => {\r\n      dispatch(itemsActions.removeItem, label);\r\n      libraryPack.onRemoveItem(focus.lib, focus.cat, label);\r\n    };\r\n\r\n    const handleEditLib = (oldName, newName) => {\r\n      dispatch(libsActions.editLib, { oldName, newName });\r\n      libraryPack.onEditLibrary(oldName, newName);\r\n    };\r\n\r\n    const handleEditCat = (oldName, newName) => {\r\n      dispatch(catsActions.editCategory, { oldName, newName });\r\n      libraryPack.onEditCategory(focus.lib, oldName, newName);\r\n    };\r\n\r\n    const handleEditItem = (oldName, newName) => {\r\n      dispatch(itemsActions.editItem, { oldName, newName });\r\n      libraryPack.onEditItem(focus.lib, focus.cat, oldName, newName);\r\n    }\r\n\r\n    switch (getListOf()) {\r\n      case \"libs\":\r\n        return libs.map(label => (\r\n          <ListItem\r\n            key={label}\r\n            label={label}\r\n            handleRowClick={handleClickOnLib}\r\n            handleRemove={handleRemoveLib}\r\n            handleEdit={handleEditLib}\r\n          />\r\n        ));\r\n      case \"cats\":\r\n        return cats.map(label => (\r\n          <ListItem\r\n            key={label}\r\n            parent={focus.lib}\r\n            label={label}\r\n            handleRowClick={handleClickOnCat}\r\n            handleRemove={handleRemoveCat}\r\n            handleEdit={handleEditCat}\r\n          />\r\n        ));\r\n      case \"items\":\r\n        return Object.keys(items).map(label => (\r\n          <ListItem\r\n            key={label}\r\n            parent={focus.cat}\r\n            label={label}\r\n            handleRowClick={handleClickOnItem}\r\n            handleRemove={handleRemoveItem}\r\n            handleEdit={handleEditItem}\r\n          />\r\n        ));\r\n      case \"inspector\":\r\n        return <Inspector item={items[focus.item]} />\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const RenderAddRow = () => {\r\n    let addTo = !focus.lib ? \"libs\" : \"cats\";\r\n    if (focus.lib) {\r\n      addTo = !focus.cat ? \"cats\" : \"items\";\r\n    }\r\n\r\n    const handleAddLib = value => {\r\n      value = value.trim();\r\n      dispatch(libsActions.addLib, value);\r\n      libraryPack.onAddLibrary(value);\r\n    };\r\n\r\n    const handleAddCat = value => {\r\n      value = value.trim();\r\n      dispatch(catsActions.addCategory, value);\r\n      libraryPack.onAddCategory(focus.lib, value);\r\n    };\r\n\r\n    const handleAddItem = value => {\r\n      value = value.trim();\r\n      libraryPack.onAddItem(focus.lib,focus.cat, value);\r\n      dispatch(itemsActions.addItem, value);\r\n    };\r\n\r\n    switch (addTo) {\r\n      case \"libs\":\r\n        return (\r\n          <AddRow\r\n            label={access.translate(\"Add Library\")}\r\n            handleAdd={handleAddLib}\r\n          />\r\n        );\r\n      case \"cats\":\r\n        return (\r\n          <AddRow\r\n            label={access.translate(\"Add Schema\")}\r\n            handleAdd={handleAddCat}\r\n          />\r\n        );\r\n      case \"items\":\r\n        return (\r\n          <AddRow\r\n            label={access.translate(\"Add Field\")}\r\n            handleAdd={handleAddItem}\r\n          />\r\n        );\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    const { lib, cat, item } = focus;\r\n\r\n    if(item) {\r\n      dispatch(itemsActions.setItemToFocus, null);\r\n    } else if (cat) {\r\n      dispatch(catsActions.setCatToFocus, null);\r\n      libraryPack.onBack(lib);\r\n    } else if (lib) {\r\n      dispatch(libsActions.setLibToFocus, null);\r\n      libraryPack.onBack();\r\n    }\r\n  };\r\n\r\n  const getLabel = () => {\r\n    const { lib, cat } = focus;\r\n    if (lib && cat) return `${lib} - ${cat}`;\r\n    if (lib) return lib;\r\n    return projectName;\r\n  };\r\n\r\n  const getFlex = () => {\r\n    if (collapse) {\r\n      return access.dim(\"flexCollapse.leftPanel\");\r\n    }\r\n\r\n    return access.dim(\"flexViews.leftPanel\");\r\n  };\r\n\r\n  const zIndex = access.dim(\"zIndexViews.leftPanel\");\r\n  const flex = getFlex();\r\n  const label = getLabel();\r\n\r\n  const renderContent = () => {\r\n    if (collapse) {\r\n      return (\r\n        <Fragment>\r\n          <CollapseColumn\r\n            flex={1}\r\n            background={access.color(\"bottomBar.bg\")}\r\n          ></CollapseColumn>\r\n        </Fragment>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <RenderAddRow />\r\n        <Column flex={1}>\r\n          <RenderList />\r\n        </Column>\r\n      </Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <CollapseColumn\r\n      flex={flex}\r\n      zIndex={zIndex}\r\n      background={access.color(\"menuPanel.bg\")}\r\n    >\r\n      <SearchBar label={label} nested={focus.lib} onBack={handleBack} />\r\n      {renderContent()}\r\n      <BottomBarMenu viewKey={viewKey} />\r\n    </CollapseColumn>\r\n  );\r\n}\r\n\r\nexport default LeftPanel;\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport AceEditor from \"react-ace\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\nimport { isEqual } from \"lodash\";\r\n\r\nimport \"ace-builds/src-noconflict/mode-json\";\r\nimport \"ace-builds/src-noconflict/theme-monokai\";\r\nimport \"ace-builds/src-noconflict/theme-xcode\";\r\n\r\nimport { onSchemaChange } from \"tree/actions/items\";\r\n\r\nfunction Editor({ width, isData }) {\r\n  const editorRef = useRef();\r\n\r\n  const { items, dispatch } = useBranch({ items: [\"items\"] });\r\n  const { mockData } = useBranch({ mockData: [\"mockData\"] });\r\n  const [initCode, setInitCode] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n\r\n  const data = isData ? mockData : items;\r\n  const codeFromProps = JSON.stringify(data, null, 2);\r\n\r\n  useEffect(() => {\r\n    // reset undo maneger\r\n    if(editorRef.current){\r\n      const { editor } = editorRef.current;\r\n      const session = editor.getSession();\r\n      const undoManager = session.getUndoManager();\r\n      undoManager.reset();\r\n      session.setUndoManager(undoManager);\r\n    }\r\n  }, [isData])\r\n\r\n  if (data !== null && codeFromProps !== initCode) {\r\n    setInitCode(codeFromProps);\r\n    setCode(codeFromProps);\r\n  }\r\n\r\n  const updateSchema = newCode => {\r\n    try {\r\n      newCode = JSON.parse(newCode);\r\n      dispatch(onSchemaChange, newCode);\r\n    } catch (error) {\r\n      dispatch((tree) => {\r\n        tree.set(\"mockData\", null);\r\n      })\r\n    }\r\n  };\r\n\r\n  const onLoad = () => {};\r\n\r\n  const onChange = c => {\r\n    if(isEqual(c,codeFromProps)) return null;\r\n\r\n    setCode(c);\r\n    if (!isData) {\r\n      updateSchema(c);\r\n    }\r\n  };\r\n\r\n  const options = {\r\n    showLineNumbers: true,\r\n    tabSize: 2\r\n  };\r\n\r\n  const style = {\r\n    height: \"100%\",\r\n    width: width\r\n  };\r\n\r\n  return (\r\n    <AceEditor\r\n      ref={editorRef}\r\n      style={style}\r\n      debounceChangePeriod={1000}\r\n      mode=\"json\"\r\n      theme=\"xcode\"\r\n      name=\"editor\"\r\n      onLoad={onLoad}\r\n      onChange={onChange}\r\n      fontSize={14}\r\n      showPrintMargin={true}\r\n      showGutter={true}\r\n      highlightActiveLine={true}\r\n      value={code}\r\n      setOptions={options}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Editor;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Tab, Tabs } from \"@material-ui/core\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport { SpaceAround } from \"plugins/Layouts/Spaces\";\r\n\r\n\r\nconst SwitchButtonCont = styled(SpaceAround)`\r\nmargin-right: 5px;\r\n  &:before {\r\n    content: \"\";\r\n    height: 35px;\r\n    margin-right: 5px;\r\n    border-left: solid 1px ${access.color(\"schemaPanel.divider\")};\r\n  }\r\n`;\r\n\r\nconst useStyles = makeStyles(props => ({\r\n  selectedBtn: {\r\n    color: access.color(\"schemaPanel.selected\"),\r\n    fontSize: 11\r\n  },\r\n  btn: {\r\n    color: access.color(\"schemaPanel.notSelected\"),\r\n    fontSize: 11,\r\n  },\r\n  indicator: {\r\n    backgroundColor: access.color(\"schemaPanel.selected\"),\r\n  }\r\n}));\r\n\r\nfunction SwitchEditorBtn({ onSwitch, value }) {\r\n  const { mockData } = useBranch({ mockData: [\"mockData\"] });\r\n\r\n\r\n  const handleChange = (e, v) => {\r\n    onSwitch(v);\r\n  };\r\n\r\n  const CodeSelected = value === \"code\";\r\n  const disabled = !mockData;\r\n  const classes = useStyles();\r\n  const codeClass = CodeSelected ? classes.selectedBtn : classes.btn;\r\n  const schemaClass = !CodeSelected ? classes.selectedBtn : classes.btn;\r\n\r\n  return (\r\n    <SwitchButtonCont width={\"fit-content\"}>\r\n      <Tabs value={value} onChange={handleChange} classes={{indicator: classes.indicator}}>\r\n        <Tab\r\n          classes={{ root: schemaClass }}\r\n          label={access.translate(\"schema\")}\r\n          value={\"schema\"}\r\n        />\r\n        <Tab\r\n          classes={{ root: codeClass }}\r\n          label={access.translate(\"Generate\")}\r\n          value={\"code\"}\r\n          disabled={disabled}\r\n        />\r\n      </Tabs>\r\n    </SwitchButtonCont>\r\n  );\r\n}\r\n\r\nSwitchEditorBtn.defaultProps = {\r\n  onSwitch: 1,\r\n  value: \"100%\"\r\n};\r\n\r\nSwitchEditorBtn.propTypes = {\r\n  onSwitch: PropTypes.func.isRequired,\r\n  value: PropTypes.oneOf([\"code\", \"schema\"]).isRequired\r\n};\r\n\r\nexport default SwitchEditorBtn;\r\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nfunction Composer({ createElement, children }) {\n  const mapChildren = children => {\n    return React.Children.map(children, child => {\n\n      if (child.type.isDecorator) {\n        return React.cloneElement(child, {}, mapChildren(child.props.children));\n      }\n      return createElement(child);\n    });\n  };\n\n  return mapChildren(children);\n}\n\nComposer.propsTypes = {\n  createElement: PropTypes.func.isRequired\n};\n\nexport default Composer;\n","import React from \"react\";\nimport PropTypes from 'prop-types'\n\nimport Composer from \"plugins/tools/Composer\";\n\n\nfunction FileDownloader({content, fileName, fileExtension, disabled, children, onClick, ...rest}) {\n\n    const saveFile = (e) => {\n        if (e) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    \n        let parsed = JSON.stringify(content, null, 4);\n        let blob = new Blob([parsed], { type: 'octet/stream' });\n    \n        let url = window.URL.createObjectURL(blob);\n        let a = document.createElement('a');\n        \n        document.body.appendChild(a);\n        \n        a.href = url;\n        a.download = fileName+'.'+fileExtension;\n    \n        setTimeout(() => {\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n        }, 100);\n    };\n\n    const createElement = (child) => {\n     \n        const click = (e) => {\n            if (onClick) {\n                if (disabled) return onClick(e);\n                else {\n                    saveFile(e);\n                    return onClick(e);\n                }\n            } else {\n                return (disabled) ? null : saveFile(e);\n            }\n        }\n\n        return React.cloneElement(child, { onClick: click, ...rest });\n    };\n    \n    \n    return (\n        <Composer createElement={createElement}>\n            {children}\n        </Composer>\n    );\n    \n}\n\nFileDownloader.propsTypes = {\n    content: PropTypes.object.isRequired,\n    fileExtension: PropTypes.string.isRequired,\n    fileName: PropTypes.string,\n    disabled: PropTypes.bool\n}\n\nFileDownloader.defaultProps = {\n    disabled: false,\n    fileName: 'file'\n}\n\nFileDownloader.isDecorator=true;\n\nexport default FileDownloader;\n\n\n        \n    \n\n","import React from \"react\";\nimport PropTypes from 'prop-types'\n\nimport Composer from \"plugins/tools/Composer\";\n\n\nfunction CopyToClipBoard({content, disabled, children, onClick, ...rest}) {\n\n    const copyToClipboard = textToCopy => {\n        try {\n          textToCopy = JSON.stringify(textToCopy, null, 2);\n        } catch (error) {\n          textToCopy = \"unable to stringify data\";\n        }\n    \n        if (navigator.clipboard) {\n          navigator.clipboard.writeText(textToCopy);\n        } else {\n          const el = document.createElement(\"textarea\");\n          el.value = textToCopy;\n          el.style.display = \"none\";\n          document.body.appendChild(el);\n          el.select();\n          document.execCommand(\"copy\");\n          document.body.removeChild(el);\n        }\n      };\n\n    const createElement = (child) => {\n     \n        const click = (e) => {\n            if (onClick) {\n                if (disabled) return onClick(e);\n                else {\n                    copyToClipboard(content);\n                    return onClick(e);\n                }\n            } else {\n                return (disabled) ? null : copyToClipboard(content);\n            }\n        }\n\n        return React.cloneElement(child, { onClick: click, ...rest });\n    };\n    \n    \n    return (\n        <Composer createElement={createElement}>\n            {children}\n        </Composer>\n    );\n    \n}\n\nCopyToClipBoard.propsTypes = {\n    content: PropTypes.object.isRequired,\n    disabled: PropTypes.bool\n}\n\nCopyToClipBoard.defaultProps = {\n    disabled: false\n}\n\nCopyToClipBoard.isDecorator=true;\n\nexport default CopyToClipBoard;\n\n\n        \n    \n\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport FileDownloader from \"plugins/tools/FileDownloader\";\r\nimport CopyToClipBoard from \"plugins/tools/CopyToClipBoard\";\r\n\r\nimport IconButton from \"plugins/icons/IconButton\";\r\n\r\nconst ButtonsCont = styled(Row)`\r\n  padding-left: 10px;\r\n`;\r\n\r\nfunction BarButtons({ content, filename }) {\r\n\r\n  const CopyButton = () => {\r\n    return (\r\n      <CopyToClipBoard content={content}>\r\n        <IconButton\r\n          icon={access.icon(\"schemaPanel.copy\")}\r\n          color={access.color(\"bottomBar.fg\")}\r\n          iconPadding={8}\r\n          iconSize={18}\r\n        />\r\n      </CopyToClipBoard>\r\n    );\r\n  };\r\n\r\n  const DownloadButton = () => {\r\n    return (\r\n      <FileDownloader\r\n        content={content}\r\n        fileName={filename}\r\n        fileExtension={\"json\"}\r\n      >\r\n        <IconButton\r\n          icon={access.icon(\"schemaPanel.download\")}\r\n          color={access.color(\"bottomBar.fg\")}\r\n          iconPadding={8}\r\n          iconSize={18}\r\n        />\r\n      </FileDownloader>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ButtonsCont>\r\n      <CopyButton />\r\n      <DownloadButton />\r\n    </ButtonsCont>\r\n  );\r\n}\r\n\r\nCopyToClipBoard.propsTypes = {\r\n  content: PropTypes.object.isRequired,\r\n  filename: PropTypes.string\r\n};\r\n\r\nCopyToClipBoard.defaultProps = {\r\n  filename: \"file\"\r\n};\r\n\r\nexport default BarButtons;\r\n","import React, { useState } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport { generate } from \"tree/actions/items\";\r\nimport * as access from \"plugins/access\";\r\n\r\nimport styled from \"styled-components\";\r\nimport IconButton from \"plugins/icons/IconButton\";\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport BarButtons from \"plugins/schemaPanel/BarButtons\";\r\n\r\nconst BottomBar = styled(Row)`\r\n  justify-content: flex-end;\r\n  border-right: 1px solid ${access.color(\"schemaPanel.border\")};\r\n`;\r\n\r\nconst AmountInput = styled(\"input\")`\r\n  width: 60px;\r\n  margin-left: 25px;\r\n  padding: 0px 5px;\r\n  text-align: center;\r\n  outline-color: ${access.color(\"bottomBar.outline\")}\r\n  font-weight: 600;\r\n`;\r\n\r\nfunction BottomBarGen(params) {\r\n  const { mockData, dispatch } = useBranch({ mockData: [\"mockData\"] });\r\n  const { items } = useBranch({ items: [\"items\"] });\r\n  const { focus } = useBranch({ focus: [\"focus\"] });\r\n  const [amount, setAmount] = useState(1);\r\n  const fileName = `${focus.lib}_${focus.cat}`;\r\n\r\n  const gen = () => {\r\n    dispatch(generate, { items, amount });\r\n  };\r\n\r\n  const PlayButton = () => {\r\n    const btnStyle = { marginRight: 10, marginLeft: 10 };\r\n\r\n    return (\r\n      <IconButton\r\n        icon={access.icon(\"schemaPanel.play\")}\r\n        color={access.color(\"bottomBar.fg\")}\r\n        onClick={gen}\r\n        btnStyle={btnStyle}\r\n      />\r\n    );\r\n  };\r\n\r\n  const RenderAmountInput = () => {\r\n    const handleSetAmount = e => {\r\n      let value = e.target.value;\r\n\r\n      value = value < 1 ? 1 : value;\r\n      value = value > 10000 ? 10000 : value;\r\n\r\n      setAmount(value);\r\n    };\r\n\r\n    return (\r\n      <AmountInput\r\n        type={\"number\"}\r\n        value={amount}\r\n        onChange={handleSetAmount}\r\n        autoFocus={true}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <BottomBar background={access.color(\"bottomBar.bg\")}>\r\n      <BarButtons content={mockData} filename={fileName} />\r\n      <RenderAmountInput />\r\n      <PlayButton />\r\n    </BottomBar>\r\n  );\r\n}\r\n\r\nexport default BottomBarGen;\r\n","import React from \"react\";\r\n\r\nimport * as access from \"plugins/access\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport BarButtons from \"plugins/schemaPanel/BarButtons\";\r\n\r\nconst BottomBar = styled(Row)`\r\n  border-right: 1px solid ${access.color(\"schemaPanel.border\")}\r\n`;\r\n\r\nfunction BottomBarSchema(params) {\r\n  const { items } = useBranch({ items: [\"items\"] });\r\n  const { focus } = useBranch({ focus: [\"focus\"] });\r\n  const fileName = `${focus.lib}_${focus.cat}_schema`;\r\n\r\n  return (\r\n    <BottomBar background={access.color(\"bottomBar.bg\")}>\r\n      <BarButtons content={items} filename={fileName} />\r\n    </BottomBar>\r\n  );\r\n}\r\n\r\nexport default BottomBarSchema;\r\n","import PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst Mask = styled.div`\n  position: absolute;\n  top: ${props => props.top || 0};\n  bottom: ${props => props.bottom || 0};\n  left: ${props => props.left || 0};\n  right: ${props => props.right || 0};\n  opacity: ${props => props.opacity};\n  background: ${props => props.mask};\n`;\n\nMask.defaultProps = {\n    opacity: 0.7,\n    mask: 'white',\n  }\n  \n  Mask.propTypes = {\n    opacity: PropTypes.number,\n    mask: PropTypes.string,\n  }\n  \n  \n  export default Mask","import React, { useState } from \"react\";\r\nimport * as access from \"plugins/access\";\r\nimport styled from \"styled-components\";\r\n\r\n\r\nimport Center from \"plugins/Layouts/Center\";\r\nimport Label from \"plugins/tools/Label\";\r\nimport Mask from \"plugins/tools/Mask\";\r\n\r\nconst RoundWrapper = styled('div')`\r\n  width: ${p => !p.open ? '0px' : '285px'};\r\n  height: ${p => !p.open ? '0px' : '285px'};\r\n  overflow: hidden;\r\n  background: ${access.color(\"backgrounds.primary\")};\r\n  color: ${access.color(\"texts.primary\")};\r\n  border-radius: 50%;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n  transition: all 250ms;\r\n`;\r\n\r\nfunction DragMask({ text }) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOnMouseEnter = e => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleOnMouseLeave = e => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const renderAdd = () => {\r\n    return (\r\n      <Center>\r\n        <RoundWrapper open={open}>\r\n          <Label fontSize={\"30px\"} weight={700} style={{maxWidth:'250px'}}>\r\n            {text}\r\n          </Label>\r\n        </RoundWrapper>\r\n      </Center>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Mask\r\n      opacity={0.8}\r\n      mask={access.color(\"schemaPanel.bg\")}\r\n      onMouseEnter={handleOnMouseEnter}\r\n      onMouseLeave={handleOnMouseLeave}\r\n      style={{ transition: `background 250ms` }}\r\n    >\r\n      {renderAdd()}\r\n    </Mask>\r\n  );\r\n}\r\n\r\nexport default DragMask;\r\n","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { v4 } from 'node-uuid';\n\nexport default class Start extends Component {\n  constructor(props) {\n    super(props);\n\n    this.width = 0;\n    this.height = 0;\n    this.measure = this.measure.bind(this);\n    this.createCanvas = this.createCanvas.bind(this);\n  }\n\n  componentDidMount() {\n    this.measure();\n    const canvas = this.createCanvas();\n    this.do(canvas);\n  }\n\n  do(canvas) {\n    const { margin } = this.props;\n    const width = this.width - (margin.left + margin.right);\n    const height = this.height - (margin.top + margin.bottom);\n\n    return this.props.canvasReady(canvas, width, height);\n  }\n\n  createCanvas() {\n    const { margin } = this.props;\n\n    const canvas = d3\n      .select(`#${this.id}`)\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .append('g')\n      .attr('transform', `translate(${margin.left},${margin.top})`);\n\n    return canvas;\n  }\n\n  measure() {\n    const cont = document.getElementById(this.id);\n    const Bounding = cont.getBoundingClientRect();\n\n    this.width = Bounding.width;\n    this.height = Bounding.height;\n  }\n\n  render() {\n    this.id = 'cont' + v4();\n\n    return <div id={this.id} style={{ height: '100%', width: '100%' }} />;\n  }\n}\n\nStart.defaultProps = {\n  margin: {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n  }\n};\n","import * as d3 from \"d3\";\r\n\r\nlet prevMousePlace = null;\r\n\r\nexport const move = (canvas, board, color) => {\r\n  const line = d3\r\n    .line()\r\n    .x(d => d.x)\r\n    .y(d => d.y)\r\n    .curve(d3.curveBasis);\r\n\r\n  board.on(\"mouseout\", () => {\r\n    prevMousePlace = null;\r\n  });\r\n\r\n  board.on(\"mousemove\", (d, i) => {\r\n    const mousePlace = {\r\n      x: d3.event.offsetX - 2,\r\n      y: d3.event.offsetY - 2\r\n    };\r\n\r\n    if (!prevMousePlace) {\r\n      prevMousePlace = mousePlace;\r\n      return;\r\n    }\r\n\r\n    const data = [prevMousePlace, mousePlace];\r\n\r\n    prevMousePlace = mousePlace;\r\n\r\n    canvas\r\n      .append(\"path\")\r\n      .attr(\"d\", line(data))\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke\", color)\r\n      .attr(\"stroke-width\", 2)\r\n      .transition()\r\n      .duration(450)\r\n      .attr(\"stroke-width\", 0)\r\n      .ease(t => d3.easeBounceOut(t))\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n  });\r\n};\r\n\r\nexport const dropCircles = (canvas, height, board, color) => {\r\n  board.on(\"mousemove\", (d, i) => {\r\n    const mousePlace = {\r\n      x: d3.event.offsetX,\r\n      y: d3.event.offsetY\r\n    };\r\n\r\n    canvas\r\n      .append(\"circle\")\r\n      .attr(\"cx\", mousePlace.x - 1)\r\n      .attr(\"cy\", mousePlace.y - 1)\r\n      .attr(\"r\", 1)\r\n      .attr(\"fill\", color)\r\n      .transition()\r\n      .duration(2000)\r\n      .attr(\"cy\", height)\r\n      .ease(t => d3.easeCircleIn(t))\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n  });\r\n};\r\n\r\nexport const ripple = (canvas, board, color = \"white\") => {\r\n  board.on(\"click\", (d, i) => {\r\n    const mousePlace = {\r\n      x: d3.event.offsetX,\r\n      y: d3.event.offsetY\r\n    };\r\n\r\n    const circle = canvas\r\n      .append(\"circle\")\r\n      .attr(\"cx\", mousePlace.x)\r\n      .attr(\"cy\", mousePlace.y)\r\n      .attr(\"r\", 1)\r\n      .attr(\"fill\", color)\r\n      .attr(\"fill-opacity\", 0.3);\r\n\r\n    ripple(canvas, circle, color);\r\n\r\n    circle\r\n      .transition()\r\n      .duration(500)\r\n      .attr(\"r\", 70)\r\n      .attr(\"fill-opacity\", 0)\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n  });\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport Start from \"plugins/tools/Start\";\r\nimport { dropCircles } from \"plugins/canvases/utils/canvasActions\";\r\nimport \"plugins/canvases/style.css\";\r\n\r\nfunction OpenPanelCanvas() {\r\n    const { viewKey } = useBranch({ viewKey: [\"viewKey\"] });\r\n    const [close, setclose] = useState(false);\r\n\r\n    if(close) return null;\r\n\r\n    if(viewKey !== \"initKey\"){\r\n        setTimeout(() => {\r\n            setclose(true);\r\n        }, access.time('schemaPanel.removeCanvas'));\r\n    }\r\n\r\n    const createFrame = (canvas, width, height) => {\r\n        const frame = canvas\r\n          .append(\"rect\")\r\n          .attr(\"width\", width)\r\n          .attr(\"height\", height)\r\n          .attr(\"fill\", access.color(\"canvases.fg\"))\r\n\r\n\r\n        frame.transition()\r\n          .duration(access.time('schemaPanel.removeCanvas'))          \r\n          .attr(\"fill\", \"transparent\");\r\n\r\n    \r\n        return frame;\r\n      };\r\n \r\n\r\n  const onCanvasReady = (canvas, width, height) => {\r\n    const frame = createFrame(canvas, width, height);\r\n    dropCircles(canvas, height, frame, access.color(\"canvases.fg\"));    \r\n  };\r\n\r\n  const renderStart = () => {\r\n    const margin = {\r\n      top: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0\r\n    };\r\n\r\n    return <Start canvasReady={onCanvasReady} margin={margin} />;\r\n  };\r\n\r\n  return (\r\n    <div style={{ height:'100vh', width: '100vw', overflow: 'hidden'}}>\r\n      {renderStart()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OpenPanelCanvas;\r\n","import React, { useState, useRef } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport Column from \"plugins/Layouts/Column\";\r\nimport Center from \"plugins/Layouts/Center\";\r\nimport Label from \"plugins/tools/Label\";\r\nimport Editor from \"plugins/editor/Editor\";\r\nimport SwitchEditorBtn from \"plugins/schemaPanel/SwitchEditorBtn\";\r\nimport BottomBarGen from \"plugins/schemaPanel/BottomBarGen\";\r\nimport BottomBarSchema from \"plugins/schemaPanel/BottomBarSchema\";\r\nimport DragMask from \"plugins/schemaPanel/DragMask\";\r\nimport OpenPanelCanvas from \"plugins/canvases/OpenPanelCanvas\";\r\n\r\nconst Placeholder = styled('div')`\r\n  flex:1\r\n`\r\n\r\nconst Srow = styled(Row)`\r\n  flex: ${props => props.flex};\r\n  transition: flex ${access.time(\"schemaPanel.collapse\")}ms;\r\n`;\r\n\r\nconst TopBar = styled(Row)`\r\n  justify-content: space-between;\r\n  border-right: 1px solid ${access.color(\"schemaPanel.border\")}\r\n`;\r\n\r\nconst InnerColumn = styled(Column)`\r\n  min-width: 0;\r\n  transition: flex ${access.time(\"schemaPanel.transition\")}ms;\r\n  border-right: 1px solid ${access.color(\"schemaPanel.border\")}\r\n  overflow: hidden;\r\n  box-shadow: unset;\r\n`;\r\n\r\nfunction SchemaPanel() {\r\n\r\n  const { viewKey } = useBranch({ viewKey: [\"viewKey\"] });\r\n  const { dragState } = useBranch({ dragState: [\"drag\"] });\r\n  const { collapse } = useBranch({ collapse: [\"collapse\"] });\r\n  const { selectedCategory } = useBranch({\r\n    selectedCategory: [\"selectedCategory\"]\r\n  });\r\n\r\n  const editorWrapper = useRef();\r\n  const [editorWidth, setEditorWidth] = useState(0);\r\n  const [editorToRender, setEditorToRender] = useState(\"schema\");\r\n\r\n  const handleSwitchEditor = v => {\r\n    setEditorToRender(v);\r\n  };\r\n\r\n  const openPanelCanvas = () => {\r\n    if (viewKey === \"initKey\") return null;\r\n\r\n    return <OpenPanelCanvas />;\r\n  };\r\n\r\n  const dragCanvas = () => {\r\n    if (!dragState) return null;\r\n\r\n    return <DragMask text={dragState} />;\r\n  };\r\n\r\n  const renderEditor = () => {\r\n    const isData = editorToRender === \"code\" ? true : false;\r\n\r\n    if (viewKey === \"initKey\") {\r\n      return null;\r\n    } else if(collapse || editorWidth !== 0){\r\n      setTimeout(() => {\r\n        if (editorWrapper.current) {\r\n          setEditorWidth(editorWrapper.current.getBoundingClientRect().width);\r\n        }\r\n      }, 600);\r\n    } else {\r\n      setTimeout(() => {\r\n        if (editorWrapper.current) {\r\n          setEditorWidth(editorWrapper.current.getBoundingClientRect().width);\r\n        }\r\n      }, access.time(\"schemaPanel.showEditor\"));\r\n    }\r\n\r\n    if (editorWidth === 0) return <Placeholder/>;\r\n    const width = editorWidth;\r\n\r\n    return <Editor isData={isData} width={width} />;\r\n  };\r\n\r\n  const RenderActionBar = () => {\r\n    return (\r\n      <TopBar background={access.color(\"searchBar.bg\")}>\r\n        <Center style={{ minWidth: 50 }} overflow={\"hidden\"}>\r\n          <Label color={access.color(\"searchBar.fg\")}>{selectedCategory}</Label>\r\n        </Center>\r\n        <SwitchEditorBtn\r\n          onSwitch={handleSwitchEditor}\r\n          value={editorToRender}\r\n        />\r\n      </TopBar>\r\n    );\r\n  };\r\n\r\n  const RenderBottomBar = () => {\r\n    if (editorToRender === \"schema\") {\r\n      return <BottomBarSchema />;\r\n    }\r\n\r\n    return <BottomBarGen />;\r\n  };\r\n\r\n  const getFlex = () => {\r\n    if (viewKey !== \"initKey\"){\r\n\r\n      if(collapse){\r\n        return access.dim(\"flexCollapse.schemaPanel\");\r\n      }\r\n\r\n      return access.dim(\"flexViews.schemaPanel\");\r\n    } \r\n    return 0;\r\n  };\r\n\r\n  const getInnerFlex = () => {\r\n    if (viewKey !== \"initKey\") return 1;\r\n    return 0;\r\n  };\r\n\r\n  const flex = getFlex();\r\n  const InnerFlex = getInnerFlex();\r\n\r\n  const zIndex = access.dim(\"zIndexViews.schemaPanel\");\r\n\r\n  return (\r\n    <Srow\r\n      ref={editorWrapper}\r\n      flex={flex}\r\n      zIndex={zIndex}\r\n      background={access.color(\"canvases.bg\")}\r\n      height={\"100%\"}\r\n      shadowColor={\"none\"}\r\n    >\r\n      <InnerColumn flex={InnerFlex} background={access.color(\"schemaPanel.bg\")}>\r\n        <RenderActionBar />\r\n        {openPanelCanvas()}\r\n        {renderEditor()}\r\n        {dragCanvas()}\r\n        <RenderBottomBar />\r\n      </InnerColumn>\r\n    </Srow>\r\n  );\r\n}\r\n\r\nexport default SchemaPanel;\r\n","import * as d3 from \"d3\";\r\nimport { isEmpty, get } from \"lodash\";\r\nimport * as access from \"plugins/access\";\r\n\r\nimport { move } from \"plugins/canvases/utils/canvasActions\";\r\n\r\nexport default class Pack {\r\n  constructor(params) {\r\n    this.circlePadding = get(params, \"circlePadding\", 30);\r\n    this.margin = get(params, \"margin\", 45);\r\n    this.marginBottom = get(params, \"marginBottom\", 10);\r\n    this.marginRight = get(params, \"marginRight\", 22);\r\n    this.showMainCircle = get(params, \"showMainCircle\", true);\r\n    this.limitByLevel = get(params, \"limitByLevel\", 10);\r\n    this.fillOpacity = get(params, \"fillOpacity\", 0.8);\r\n\r\n    this.moveOnCircleColor = get(\r\n      params,\r\n      \"moveOnCircleColor\",\r\n      access.color(\"canvases.moveOnCircle\")\r\n    );\r\n    this.moveOnTextColor = get(\r\n      params,\r\n      \"moveOnTextColor\",\r\n      access.color(\"canvases.moveOnText\")\r\n    );\r\n\r\n    this.getTranslate = this.getTranslate.bind(this);\r\n    this.createPack = this.createPack.bind(this);\r\n    this.normalizeData = this.normalizeData.bind(this);\r\n\r\n    this.firstLevelClick = () => {};\r\n    this.secondLevelClick = () => {};\r\n    this.thirdLevelClick = () => {};\r\n    this.onClick = () => {};\r\n\r\n    this.clickIsBlock = false;\r\n    this.packDomain = 0;\r\n    this.colorScaleRange = [\r\n      access.color(\"canvases.packBgStart\"),\r\n      access.color(\"canvases.packBgEnd\")\r\n    ];\r\n\r\n    this.clickColor = access.color(\"canvases.clickColor\");\r\n\r\n    this.textClasses = {\r\n      in: \"light-text\",\r\n      out: \"text\"\r\n    };\r\n\r\n    this.init(params);\r\n  }\r\n\r\n  init(params) {\r\n    this.canvas = params.canvas;\r\n    this.width = params.width;\r\n    this.height = params.height;\r\n    this.mainGroup = this.canvas.append(\"g\").attr(\"class\", \"pack\");\r\n  }\r\n\r\n  initWithData(data, projectName) {\r\n    this.mainData = this.normalizeData(data, null, projectName);\r\n    this.createPack(this.mainData, true);\r\n  }\r\n\r\n  normalizeData(data, newData, projectName = \"Gen\") {\r\n    if (!newData)\r\n      newData = {\r\n        name: projectName,\r\n        value: 1,\r\n        children: [],\r\n        id: projectName,\r\n        level: 0\r\n      };\r\n\r\n    if (typeof data == \"string\" || typeof data == \"number\") {\r\n      newData.value = 1;\r\n      newData.name = `${newData.name}: ${data}`;\r\n      delete newData.children;\r\n      return newData;\r\n    }\r\n\r\n    for (const key in data) {\r\n      const d = {\r\n        name: key,\r\n        nameKey: key,\r\n        value: 1,\r\n        children: [],\r\n        id: `${newData.id}-${key}`,\r\n        level: newData.level + 1\r\n      };\r\n\r\n      if (this.limitByLevel === newData.level + 1) {\r\n        d.name = data[key].name || key;\r\n      }\r\n\r\n      const countBack = this.normalizeData(data[key], d);\r\n\r\n      newData.value += countBack.value;\r\n      newData.children.push(d);\r\n    }\r\n\r\n    return newData;\r\n  }\r\n\r\n  createPack(data, isMainData) {\r\n    const {\r\n      width,\r\n      height,\r\n      margin,\r\n      circlePadding,\r\n      showMainCircle,\r\n      limitByLevel\r\n    } = this;\r\n    const size = [width - margin, height - margin];\r\n\r\n    if (isMainData) this.mainData = data;\r\n    this.packDomain = data.value;\r\n\r\n    const packLayout = d3\r\n      .pack()\r\n      .size(size)\r\n      .padding(circlePadding);\r\n\r\n    const treeRoot = d3.hierarchy(data);\r\n    packLayout(treeRoot);\r\n\r\n    let nodes = treeRoot.descendants();\r\n\r\n    nodes = nodes.filter(n => {\r\n      if (n.data.level > limitByLevel) return false;\r\n      if (showMainCircle) return n.depth < 3;\r\n      return n.depth > 0 && n.depth < 3;\r\n    });\r\n\r\n    this.createNodes(nodes);\r\n  }\r\n\r\n  createNodes(nodes) {\r\n    const { moveOnCircleColor, moveOnTextColor, canvas, mainGroup } = this;\r\n\r\n    this.paintCircles(nodes);\r\n    this.paintTexts(nodes);\r\n    const circles = mainGroup.selectAll(\"circle\");\r\n    const texts = mainGroup.selectAll(\"text\");\r\n\r\n    move(canvas, circles, moveOnCircleColor);\r\n    move(canvas, texts, moveOnTextColor);\r\n\r\n    this.handleNodeClick(circles, texts);\r\n    this.handleNodeDrag(circles, texts);\r\n  }\r\n\r\n  handleNodeDrag(circles, texts) {}\r\n\r\n  paintCircles(nodes) {\r\n    const { colorScaleRange, packDomain, mainGroup } = this;\r\n\r\n    const colorScale = d3\r\n      .scaleLinear()\r\n      .domain([0, packDomain])\r\n      .range(colorScaleRange);\r\n\r\n    const enterCircles = c => {\r\n      c.enter()\r\n        .append(\"circle\")\r\n        .attr(\"id\", d => `circle-${d.data.id}`)\r\n        .attr(\"r\", 0)\r\n        .attr(\"transform\", this.getTranslate)\r\n        .attr(\"fill-opacity\", this.fillOpacity)\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"fill\", d => colorScale(d.data.value))\r\n        .attr(\"transform\", this.getTranslate)\r\n        .attr(\"r\", d => d.r);\r\n    };\r\n\r\n    const exitCircles = c => {\r\n      c.exit()\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"r\", 0)\r\n        .transition()\r\n        .remove();\r\n    };\r\n\r\n    const updateCircles = c => {\r\n      c.transition()\r\n        .duration(2000)\r\n        .attr(\"fill\", d => colorScale(d.data.value))\r\n        .attr(\"transform\", this.getTranslate)\r\n        .attr(\"r\", d => d.r);\r\n    };\r\n\r\n    const circles = mainGroup.selectAll(\"circle\").data(nodes, d => d.data.id);\r\n\r\n    enterCircles(circles);\r\n    exitCircles(circles);\r\n    updateCircles(circles);\r\n\r\n    return circles;\r\n  }\r\n\r\n  paintTexts(nodes) {\r\n    const { mainGroup, textClasses, limitByLevel } = this;\r\n\r\n    const childrenScope = d => {\r\n      return (\r\n        isEmpty(d.data.children) ||\r\n        d.depth === 2 ||\r\n        d.data.level >= limitByLevel\r\n      );\r\n    };\r\n\r\n    const adaptText = d => {\r\n      let text = d.data.name;\r\n      let radius = d.r;\r\n      let cutIn = 25;\r\n\r\n      if (childrenScope(d)) {\r\n        cutIn = radius < 80 ? 16 : cutIn;\r\n        cutIn = radius < 70 ? 14 : cutIn;\r\n        cutIn = radius < 40 ? 12 : cutIn;\r\n        cutIn = radius < 35 ? 9 : cutIn;\r\n        cutIn = radius < 30 ? 7 : cutIn;\r\n        cutIn = radius < 20 ? 3 : cutIn;\r\n        cutIn = radius < 14 ? 0 : cutIn;\r\n\r\n        if (text.length <= cutIn) return text;\r\n        return text.substring(0, cutIn) + \"...\";\r\n      }\r\n\r\n      return text;\r\n    };\r\n\r\n    const getFontSize = (d, isChildren) => {\r\n      if (isChildren) {\r\n        return Math.min(Math.max(d.r, 30) / 4, 36);\r\n      }\r\n\r\n      return Math.min(d.r, 60) / 3;\r\n    };\r\n\r\n    const getTextPosition = d => {\r\n      if (d.depth === 0 && !isEmpty(d.data.children)) return -(d.r + 10);\r\n      return childrenScope(d) ? 0 : -(d.r + 5);\r\n    };\r\n\r\n    const enterTexts = t => {\r\n      t.enter()\r\n        .append(\"text\")\r\n        .attr(\"id\", d => `text-${d.data.id}`)\r\n        .attr(\"transform\", this.getTranslate)\r\n        .attr(\"y\", getTextPosition)\r\n        .attr(\"class\", d =>\r\n          childrenScope(d) ? textClasses.in : textClasses.out\r\n        )\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"font-size\", \"0\")\r\n        .text(d => adaptText(d))\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"font-size\", d => getFontSize(d, childrenScope(d)));\r\n    };\r\n\r\n    const exitTexts = t => {\r\n      t.exit()\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"font-size\", 0)\r\n        .transition()\r\n        .remove();\r\n    };\r\n\r\n    const updateTexts = t => {\r\n      t.transition()\r\n        .duration(1000)\r\n        .attr(\"font-size\", 0)\r\n        .transition()\r\n        .duration(10)\r\n        .attr(\"transform\", this.getTranslate)\r\n        .transition()\r\n        .duration(1000)\r\n        .text(d => adaptText(d))\r\n        .attr(\"y\", getTextPosition)\r\n        .attr(\"class\", d =>\r\n          childrenScope(d) ? textClasses.in : textClasses.out\r\n        )\r\n        .attr(\"font-size\", d => getFontSize(d, childrenScope(d)));\r\n    };\r\n\r\n    const texts = mainGroup.selectAll(\"text\").data(nodes, d => d.data.id);\r\n\r\n    enterTexts(texts);\r\n    exitTexts(texts);\r\n    updateTexts(texts);\r\n\r\n    return texts;\r\n  }\r\n\r\n  navigateBack(data) {}\r\n\r\n  handleNodeClick(circles, text) {\r\n    const blockButton = (t = 1000) => {\r\n      this.clickIsBlock = true;\r\n      setTimeout(() => {\r\n        this.clickIsBlock = false;\r\n      }, t);\r\n    };\r\n\r\n    const clickAction = n => {\r\n      if (this.clickIsBlock) return;\r\n      if (n.depth === 0) {\r\n        this.navigateBack(n.data);\r\n        return;\r\n      }\r\n      if (n.depth === 2) n = n.parent;\r\n\r\n      switch (n.data.level) {\r\n        case 1:\r\n          this.firstLevelClick(n.data.name);\r\n          break;\r\n        case 2:\r\n          this.secondLevelClick(n.data.name);\r\n          break;\r\n        case 3:\r\n          this.thirdLevelClick(n.data.name);\r\n          break;\r\n\r\n        default:\r\n          this.onClick(n.data.name);\r\n          break;\r\n      }\r\n\r\n      if(n.depth){\r\n        blink(n.data);\r\n      }\r\n\r\n      if (n.data.level < this.limitByLevel) {\r\n        this._clickAction && this._clickAction();\r\n        this.createPack(n.data);\r\n        blockButton();\r\n      }\r\n    };\r\n\r\n    const blink = (data) => {\r\n      const circle = d3.select(`#circle-${data.id}`);\r\n      let orininalColor;\r\n      \r\n      try {\r\n        orininalColor = circle.attr(\"fill\");\r\n      } catch (error) {\r\n        return null;\r\n      }\r\n\r\n      if(this.lastClickedId === data.id){\r\n        setTimeout(() => {\r\n          if(this.lastClickedId === data.id) this.lastClickedId = null;\r\n        }, 1000)\r\n        \r\n        return null;\r\n      } else {\r\n        this.lastClickedId = data.id;\r\n      }\r\n\r\n      circle\r\n        .transition()\r\n        .duration(200)\r\n        .attr(\"fill\", this.clickColor)\r\n        .transition()\r\n        .duration(600)\r\n        .attr(\"fill\", orininalColor);\r\n    }\r\n\r\n    circles.on(\"click\", n => {\r\n      clickAction(n);\r\n    });\r\n\r\n    text.on(\"click\", n => {\r\n      clickAction(n);\r\n    });\r\n  }\r\n\r\n  getTranslate(d) {\r\n    return `translate(${d.x + this.margin - this.marginRight},${d.y +\r\n      this.margin -\r\n      this.marginBottom})`;\r\n  }\r\n\r\n  setLevelClick(level, func) {\r\n    switch (level) {\r\n      case 1:\r\n        this.firstLevelClick = func;\r\n        break;\r\n      case 2:\r\n        this.secondLevelClick = func;\r\n        break;\r\n      case 3:\r\n        this.thirdLevelClick = func;\r\n        break;\r\n\r\n      default:\r\n        this.onClick = func;\r\n        break;\r\n    }\r\n  }\r\n\r\n  scaleDown() {\r\n    this.mainGroup\r\n      .transition()\r\n      .duration(2000)\r\n      .attr(\r\n        \"transform\",\r\n        `translate(${this.width / 2},${this.height / 2}), scale(0)`\r\n      );\r\n  }\r\n\r\n  scaleUp() {\r\n    this.mainGroup\r\n      .transition()\r\n      .duration(2000)\r\n      .attr(\"transform\", `translate(0,0), scale(1)`);\r\n  }\r\n}\r\n","import { v4 } from \"node-uuid\";\r\nimport { find, findIndex } from \"lodash\";\r\nimport Pack from \"plugins/canvases/pack/Pack\";\r\n\r\nexport default class LibraryPack extends Pack {\r\n  constructor(params) {\r\n    super(params);\r\n\r\n    this.limitByLevel = 3;\r\n  }\r\n\r\n  findLibrary(lib) {\r\n    const library = find(this.mainData.children, c => {\r\n      return c.name === lib;\r\n    });\r\n\r\n    return library;\r\n  }\r\n\r\n  findCategory(lib, cat) {\r\n    const category = find(lib.children, l => {\r\n      return l.name === cat;\r\n    });\r\n\r\n    return category;\r\n  }\r\n\r\n  findItem(category, item) {\r\n    const it = find(category.children, l => {\r\n      return l.name === item;\r\n    });\r\n\r\n    return it;\r\n  }\r\n\r\n  onLibrarySelected(lib) {\r\n    const library = this.findLibrary(lib);\r\n    this.createPack(library);\r\n  }\r\n\r\n  onCategorySelected(lib, cat) {\r\n    const library = this.findLibrary(lib);\r\n    const category = this.findCategory(library, cat);\r\n    this.createPack(category);\r\n  }\r\n\r\n  onItemSelected(lib, cat, it) {\r\n    const library = this.findLibrary(lib);\r\n    const category = this.findCategory(library, cat);\r\n    const item = this.findItem(category, it);\r\n    this.createPack(item);\r\n  }\r\n\r\n  onEditLibrary(oldName, newName) {\r\n    const { mainData } = this;\r\n\r\n    mainData.children = mainData.children.map(l => {\r\n      if (l.name === oldName) {\r\n        l.name = newName;\r\n      }\r\n      return l;\r\n    });\r\n\r\n    this.createPack(mainData);\r\n  }\r\n\r\n  onEditCategory(lib, oldName, newName) {\r\n    const library = this.findLibrary(lib);\r\n\r\n    library.children = library.children.map(c => {\r\n      if (c.name === oldName) {\r\n        c.name = newName;\r\n      }\r\n      return c;\r\n    });\r\n\r\n    this.createPack(library);\r\n  }\r\n\r\n  onEditItem(lib, cat, oldName, newName) {\r\n    const library = this.findLibrary(lib);\r\n    const category = this.findCategory(library, cat);\r\n\r\n    category.children = category.children.map(i => {\r\n      if (i.name === oldName) {\r\n        i.name = newName;\r\n      }\r\n      return i;\r\n    });\r\n    \r\n    this.createPack(category);\r\n  }\r\n\r\n  onRemoveLibrary(lib) {\r\n    const { mainData } = this;\r\n\r\n    mainData.children = mainData.children.filter(l => {\r\n      return l.name !== lib;\r\n    });\r\n\r\n    this.createPack(mainData);\r\n  }\r\n\r\n  onRemoveCategory(lib, cat) {\r\n    const library = this.findLibrary(lib);\r\n    library.children = library.children.filter(l => l.name !== cat);\r\n    this.createPack(library);\r\n  }\r\n\r\n  onRemoveItem(lib, cat, it) {\r\n    const library = this.findLibrary(lib);\r\n    const category = this.findCategory(library, cat);\r\n\r\n    category.children = category.children.filter(l => l.name !== it);\r\n    this.createPack(category);\r\n  }\r\n\r\n  onAddLibrary(newLib) {\r\n    const { mainData } = this;\r\n\r\n    if(find(mainData.children,(c)=>{return c.name === newLib})) return null;\r\n\r\n    mainData.children.push({\r\n      name: newLib,\r\n      value: 1,\r\n      children: [],\r\n      id: v4(),\r\n      level: 1\r\n    });\r\n\r\n    this.createPack(mainData);\r\n  }\r\n\r\n  onAddCategory(lib, newCat) {\r\n    const library = this.findLibrary(lib);\r\n\r\n    if(find(library.children,(c)=>{return c.name === newCat})) return null;\r\n\r\n    library.children.push({\r\n      name: newCat,\r\n      value: 1,\r\n      children: [],\r\n      id: v4(),\r\n      level: 2\r\n    });\r\n\r\n    this.createPack(library);\r\n  }\r\n\r\n  onAddItem(lib,cat,newItem) {\r\n    const library = this.findLibrary(lib);\r\n    const category = this.findCategory(library, cat);\r\n\r\n    if(find(category.children,(c)=>{return c.name === newItem})) return null;\r\n\r\n    category.children.push({\r\n      name: newItem,\r\n      value: 1,\r\n      children: [],\r\n      id: v4(),\r\n      level: 2\r\n    });\r\n    \r\n    this.createPack(category);\r\n  }\r\n\r\n  onChangeFromEditor(lib, cat, editorData) {\r\n    const { mainData } = this;\r\n\r\n    const library = this.findLibrary(lib);\r\n    let category = this.findCategory(library, cat);\r\n\r\n    const root = {\r\n      name: category.name,\r\n      value: 1,\r\n      children: [],\r\n      id: category.id,\r\n      level: 2\r\n    };\r\n\r\n    category = this.normalizeData(editorData, root);\r\n\r\n    const libIndex = findIndex(mainData.children, [\"name\", lib]);\r\n    const catIndex = findIndex(library.children, [\"name\", cat]);\r\n\r\n    mainData.children[libIndex].children[catIndex] = category;\r\n    this.createPack(category);\r\n  }\r\n\r\n  onBack(lib) {\r\n    const { mainData } = this;\r\n\r\n    if (lib) {\r\n      const library = this.findLibrary(lib);\r\n      return this.createPack(library);\r\n    }\r\n\r\n    this.createPack(mainData);\r\n  }\r\n}\r\n","let tagsContexts = [];\r\n\r\nexport default class Tag {\r\n  constructor(params) {\r\n    const {\r\n      canvas,\r\n      width,\r\n      height,\r\n      id,\r\n      label,\r\n      color,\r\n      index,\r\n      onSelect,\r\n      selected\r\n    } = params;\r\n\r\n    this.onSelect = onSelect;\r\n    this.selected = selected;\r\n    this.canvas = canvas;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.id = id;\r\n    this.label = label || id;\r\n    this.color = color;\r\n    this.index = index;\r\n\r\n    this.initPosition();\r\n    this.init();\r\n\r\n    tagsContexts.push(this);\r\n  }\r\n\r\n  initPosition() {\r\n    this.tagHeight = 34;\r\n    this.tagWidth = 80;\r\n    const margin = 15;\r\n\r\n    this.positionX = this.width - (this.tagWidth + margin);\r\n    const deltaY = this.tagHeight + 10;\r\n    this.positionY = margin + deltaY * this.index;\r\n  }\r\n\r\n  init() {\r\n    this.mainGroup = this.canvas.append(\"g\").attr(\"id\", this.id);\r\n    this.mainGroup.attr(\"opacity\", 0.5);\r\n    if (this.selected) {\r\n      this.mainGroup.attr(\"opacity\", 1);\r\n    }\r\n\r\n    this.paintTag();\r\n    this.paintText();\r\n    this.mouseEvents();\r\n  }\r\n\r\n  removeTag() {\r\n    this.mainGroup.selectAll('rect')\r\n      .transition()\r\n      .duration(700)\r\n      .attr(\"width\", 0)\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n\r\n      this.mainGroup.selectAll('text')\r\n      .transition()\r\n      .duration(700)\r\n      .attr(\"font-size\", 0)\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n\r\n      this.mainGroup\r\n      .transition()\r\n      .duration(700)\r\n      .remove();\r\n  }\r\n\r\n  mouseEvents() {\r\n    if (this.selected) {\r\n      this.mainGroup.attr(\"opacity\", 1);\r\n    }\r\n\r\n    this.mainGroup.on(\"mouseenter\", () => {\r\n      this.mainGroup.attr(\"opacity\", 0.8);\r\n    });\r\n\r\n    this.mainGroup.on(\"mouseleave\", () => {\r\n      if (this.selected) {\r\n        this.mainGroup.attr(\"opacity\", 1);\r\n      } else {\r\n        this.mainGroup.attr(\"opacity\", 0.5);\r\n      }\r\n    });\r\n\r\n    this.mainGroup.on(\"click\", () => {\r\n      this.mainGroup.attr(\"opacity\", 1);\r\n      this.onSelect(this.id);\r\n    });\r\n  }\r\n\r\n  setSelected(selected) {\r\n    this.selected = selected;\r\n\r\n    if (!selected) {\r\n      this.mainGroup.attr(\"opacity\", 0.5);\r\n    }\r\n  }\r\n\r\n  paintText() {\r\n    const { mainGroup, positionX, positionY, tagWidth, tagHeight } = this;\r\n\r\n    const x = positionX + tagWidth / 2;\r\n    const y = positionY + tagHeight / 2 + 3;\r\n\r\n    const enterTexts = t => {\r\n      t.enter()\r\n        .append(\"text\")\r\n        .attr(\"transform\", `translate(${x},${y})`)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"font-size\", \"0\")\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\"class\", \"light-text\")\r\n        .text(d => d.label)\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"font-size\", 12);\r\n    };\r\n\r\n    const texts = mainGroup.selectAll(\"text\").data([this], d => d.id);\r\n    enterTexts(texts);\r\n\r\n    return texts;\r\n  }\r\n\r\n  paintTag() {\r\n    const {\r\n      mainGroup,\r\n      color,\r\n      positionX,\r\n      positionY,\r\n      tagHeight,\r\n      tagWidth\r\n    } = this;\r\n\r\n    const enterTags = t => {\r\n      t.enter()\r\n        .append(\"rect\")\r\n        .attr(\"width\", 0)\r\n        .attr(\"height\", tagHeight)\r\n        .attr(\"rx\", 10)\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\"transform\", `translate(${positionX},${positionY})`)\r\n        .attr(\"fill\", color)\r\n        .transition()\r\n        .duration(700)\r\n        .attr(\"transform\", `translate(${positionX},${positionY})`)\r\n        .attr(\"width\", tagWidth)\r\n        .attr(\"height\", tagHeight);\r\n    };\r\n\r\n    const tags = mainGroup.selectAll(\"rect\").data([this], d => d.id);\r\n    enterTags(tags);\r\n\r\n    return tags;\r\n  }\r\n}\r\n","import * as d3 from \"d3\";\r\nimport Pack from \"plugins/canvases/pack/Pack\";\r\nimport * as access from \"plugins/access\";\r\nimport { isEmpty } from \"lodash\";\r\nimport Tag from \"plugins/canvases/paint/Tag\";\r\n\r\nexport default class TypesPack extends Pack {\r\n  constructor(params) {\r\n    super(params);\r\n\r\n    this.colorScaleRange = [\r\n      access.color(\"types.packBgStart\"),\r\n      access.color(\"types.packBgEnd\")\r\n    ];\r\n\r\n    this.clickColor = access.color(\"types.clickColor\");\r\n\r\n    this.textClasses = {\r\n      out: \"light-text\",\r\n      in: \"light-text-types\"\r\n    }\r\n\r\n    this.fillOpacity = 0.5;\r\n    this.limitByLevel = 2;\r\n    this.dragCircle = null;\r\n    this.dragText = null;\r\n    this.blockDrag = false;\r\n    this.firstMove = true;\r\n    this.panelIsopen = false;\r\n\r\n    this.addToSchema = () => {};\r\n    this.setDrag = () => {};\r\n  }\r\n\r\n  setAddToSchema(func) {\r\n    this.addToSchema = func;\r\n  }\r\n\r\n  setDragState(func) {\r\n    this.setDrag = func;\r\n  }\r\n\r\n  getXyFromEvent() {\r\n    const event = d3.event.sourceEvent;\r\n    let x = event.offsetX;\r\n    let y = event.offsetY;\r\n\r\n    const { prevX } = this.getPrevCircle();\r\n    if(prevX<100 && !this.firstMove){\r\n      x = prevX + event.movementX;\r\n    }\r\n\r\n    return { x, y };\r\n  }\r\n\r\n  getPrevCircle() {\r\n    const { dragCircle } = this;\r\n\r\n    const prevX = Number(dragCircle.attr(\"cx\"));\r\n    const prevY = Number(dragCircle.attr(\"cy\"));\r\n    const prevR = Number(dragCircle.attr(\"r\"));\r\n    const prevT = dragCircle.attr(\"transform\");\r\n\r\n    return { prevX, prevY, prevR, prevT };\r\n  }\r\n\r\n  getPrevText() {\r\n    const { dragText } = this;\r\n\r\n    const prevFontSize = dragText.attr(\"font-size\");\r\n    const prevText = dragText.text();\r\n\r\n    return { prevText, prevFontSize };\r\n  }\r\n\r\n  initDragStart(d, i, items) {\r\n    this.dragCircle = d3.select(`#circle-${d.data.id}`);\r\n    this.dragText = d3.select(`#text-${d.data.id}`);\r\n\r\n    const { prevX, prevY, prevR, prevT } = this.getPrevCircle();\r\n    const { prevText, prevFontSize } = this.getPrevText();\r\n\r\n    this.TempText = prevText;\r\n    this.TempFontSize = prevFontSize;\r\n    this.TempX = prevX;\r\n    this.TempY = prevY;\r\n    this.TempR = prevR;\r\n    this.TempT = prevT;\r\n  }\r\n\r\n  startDragCircle() {\r\n    const { x, y } = this.getXyFromEvent();\r\n\r\n    this.dragCircle\r\n      .attr(\"transform\", null)\r\n      .attr(\"cx\", x)\r\n      .attr(\"cy\", y)\r\n      .transition()\r\n      .duration(access.time(\"typesPack.transitions\"))\r\n      .attr(\"r\", 10)\r\n      .attr(\"fill-opacity\", 1);\r\n  }\r\n\r\n  endDragCircle() {\r\n    this.dragCircle\r\n      .transition()\r\n      .duration(access.time(\"typesPack.transitions\"))\r\n      .attr(\"r\", this.TempR)\r\n      .attr(\"cx\", this.TempX)\r\n      .attr(\"cy\", this.TempY)\r\n      .attr(\"transform\", this.TempT)\r\n      .attr(\"fill-opacity\", 0.5);\r\n  }\r\n\r\n  startDragText() {\r\n    const { x, y } = this.getXyFromEvent();\r\n\r\n    const addText = d => {\r\n      this.setDrag(d.data.name);\r\n      return d.data.name;\r\n    };\r\n\r\n    this.dragText\r\n      .attr(\"transform\", null)\r\n      .attr(\"class\", this.textClasses.out)\r\n      .attr(\"y\", y + 30)\r\n      .attr(\"x\", x)\r\n      .transition()\r\n      .duration(access.time(\"typesPack.transitions\"))\r\n      .attr(\"font-size\", \"20px\")\r\n      .text(addText);\r\n  }\r\n\r\n  endDragText() {\r\n    const childrenScope = d => {\r\n      return (\r\n        isEmpty(d.data.children) ||\r\n        d.depth === 2 ||\r\n        d.data.level >= this.limitByLevel\r\n      );\r\n    };\r\n\r\n    this.dragText\r\n      .transition()\r\n      .duration(access.time(\"typesPack.transitions\"))\r\n      .attr(\"x\", this.TempX)\r\n      .attr(\"y\", this.TempY)\r\n      .attr(\"class\", d =>\r\n        childrenScope(d) ? this.textClasses.in : this.textClasses.out\r\n      )\r\n      .text(this.TempText)\r\n      .attr(\"transform\", this.TempT)\r\n      .attr(\"font-size\", this.TempFontSize);\r\n  }\r\n\r\n  onDrag() {\r\n    const { dragCircle, dragText } = this;\r\n    const { x, y } = this.getXyFromEvent();\r\n\r\n    dragText\r\n      .attr(\"x\", x)\r\n      .attr(\"y\", y + 30);\r\n    dragCircle\r\n      .attr(\"cx\", x)\r\n      .attr(\"cy\", y);\r\n  }\r\n\r\n  stop(d) {\r\n    if (d.data.level < 2) return true;\r\n    if (this.blockDrag) return true;\r\n  }\r\n\r\n  block() {\r\n    this.blockDrag = true;\r\n    setTimeout(() => {\r\n      this.blockDrag = false;\r\n    }, 500);\r\n  }\r\n\r\n  handleNodeDrag(circles, texts) {\r\n    const dragAction = d3\r\n      .drag()\r\n      .on(\"drag\", d => {\r\n        if (this.stop(d)) return null;\r\n        if (this.firstMove) {\r\n          this.startDragCircle();\r\n          this.startDragText();\r\n        }\r\n\r\n        this.onDrag();\r\n        this.firstMove = false;\r\n      })\r\n      .on(\"end\", d => {\r\n        if (this.stop(d)) return null;\r\n        this.block();\r\n        this.checkDrop(d);\r\n        this.endDragText();\r\n        this.endDragCircle();\r\n        this.setDrag(false);\r\n        this.firstMove = true;\r\n      })\r\n      .on(\"start\", (d, i, items) => {\r\n        if (this.stop(d)) return null;\r\n        this.initDragStart(d);\r\n      });\r\n\r\n    circles.call(dragAction);\r\n    texts.call(dragAction);\r\n  }\r\n\r\n  checkDrop(d) {\r\n    let { x, y } = this.getXyFromEvent();\r\n\r\n    if (x < 0) {\r\n      setTimeout(() => {\r\n        this.addToSchema(d.data.nameKey);\r\n      }, access.time(\"addItemPanel.addToSchema\"));\r\n\r\n      this.canvas\r\n        .append(\"circle\")\r\n        .attr(\"cx\", x)\r\n        .attr(\"cy\", y)\r\n        .attr(\"fill\", access.color(\"canvases.fg\"))\r\n        .attr(\"r\", 10)\r\n        .transition()\r\n        .duration(access.time(\"addItemPanel.addToSchema\"))\r\n        .attr(\"fill\", access.color(\"canvases.bg\"))\r\n        .attr(\"r\", 4)\r\n        .attr(\"cx\", 0)\r\n        .transition()\r\n        .duration(10)\r\n        .remove();\r\n    }\r\n  }\r\n\r\n  _clickAction() {\r\n    const { canvas, width, height } = this;\r\n    let backTag;\r\n\r\n    const onSelect = () => {\r\n      this.createPack(this.mainData);\r\n      backTag.removeTag();\r\n    };\r\n\r\n    backTag = new Tag({\r\n      selected: false,\r\n      onSelect,\r\n      canvas,\r\n      width,\r\n      height,\r\n      id: \"back\",\r\n      index: 2,\r\n      color: access.color(\"tags.bg\")\r\n    });\r\n  }\r\n}\r\n","import * as access from \"plugins/access\";\r\nimport * as d3 from \"d3\";\r\n\r\nexport const paintFrame = (canvas, width, height) => {\r\n  const frame = canvas\r\n    .append(\"rect\")\r\n    .attr(\"id\",\"mainFrame\")\r\n    .attr(\"width\", width)\r\n    .attr(\"height\", height)\r\n    .attr(\"fill\", access.color(\"canvases.bg\"));\r\n\r\n  return frame;\r\n};\r\n\r\nexport const fillFrame = (color) => { \r\n  d3.select(\"#mainFrame\")\r\n  .transition()\r\n  .duration(1000)\r\n  .attr(\"fill\", color);\r\n\r\n}\r\n\r\nexport const openAddPanel = () => {\r\n  d3.select(\"#addPanel\")\r\n    .transition()\r\n    .duration(access.time(\"addItemPanel.open\"))\r\n    .attr(\"width\", 100);\r\n};\r\n\r\nexport const closeAddPanel = () => {\r\n  d3.select(\"#addPanel\")\r\n    .transition()\r\n    .duration(access.time(\"addItemPanel.close\"))\r\n    .attr(\"width\", 0);\r\n};\r\n\r\nexport const paintAddPanel = (canvas, height) => {\r\n  const addPanel =  canvas\r\n    .append(\"rect\")\r\n    .attr(\"id\", \"addPanel\")\r\n    .attr(\"width\", 0)\r\n    .attr(\"height\", height)\r\n    .attr(\"fill\", \"url(#svgGradient)\");\r\n\r\n    return addPanel;\r\n};\r\n\r\nexport const createGradient = defs => {\r\n  var gradient = defs\r\n    .append(\"linearGradient\")\r\n    .attr(\"id\", \"svgGradient\")\r\n    .attr(\"x1\", \"100%\")\r\n    .attr(\"x2\", \"0%\")\r\n    .attr(\"y1\", \"0%\")\r\n    .attr(\"y2\", \"0%\");\r\n\r\n  gradient\r\n    .append(\"stop\")\r\n    .attr(\"class\", \"start\")\r\n    .attr(\"offset\", \"0%\")\r\n    .attr(\"stop-color\", access.color(\"canvases.bg\"))\r\n    .attr(\"stop-opacity\", 0.5);\r\n\r\n  gradient\r\n    .append(\"stop\")\r\n    .attr(\"class\", \"end\")\r\n    .attr(\"offset\", \"100%\")\r\n    .attr(\"stop-color\", '#55708d')\r\n    .attr(\"stop-opacity\", 1);\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport Start from \"plugins/tools/Start\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\nimport * as access from \"plugins/access\";\r\nimport { get } from \"plugins/requests\";\r\n\r\nimport { move } from \"plugins/canvases/utils/canvasActions\";\r\n\r\nimport { setTypes } from \"tree/actions/types\";\r\nimport * as libsActions from \"tree/actions/libs\";\r\nimport * as catsActions from \"tree/actions/cats\";\r\nimport * as itemsActions from \"tree/actions/items\";\r\n\r\nimport LibraryPack from \"plugins/canvases/pack/LibraryPack\";\r\nimport TypesPack from \"plugins/canvases/pack/TypesPack\";\r\nimport {\r\n  setLibraryPack,\r\n  getLibraryPack,\r\n  getTypesPack,\r\n  setTypesPack\r\n} from \"plugins/canvases/utils/packUtils\";\r\n\r\nimport {\r\n  paintFrame,\r\n  fillFrame,\r\n} from \"plugins/canvases/paint/Frames\";\r\nimport Tag from \"plugins/canvases/paint/Tag\";\r\n\r\nimport Absolute from \"plugins/Layouts/Absolute\";\r\n\r\nimport \"plugins/canvases/style.css\";\r\n\r\nconst Logo = styled.img`\r\n    width:60px; \r\n    height:60px; \r\n    margin:15px;\r\n    border-radius: 50%;\r\n    transform: rotate(${props=> props.rotate*180}deg);\r\n    transition: all 250ms; \r\n    box-shadow: 0px 0px 11px 4px #a1b1cf3b;\r\n`;\r\n\r\nfunction MainCanvas() {\r\n  const { viewKey, dispatch } = useBranch({ viewKey: [\"viewKey\"] });\r\n  const [rotate, setRotate] = useState(0);\r\n\r\n  const getFlex = () => {\r\n    const schemaPanelSize = access.dim(\"flexViews.schemaPanel\");\r\n    const leftPanelSize = access.dim(\"flexViews.leftPanel\");\r\n    const size = leftPanelSize + schemaPanelSize;\r\n    if (viewKey !== \"initKey\") return 1 - size;\r\n    return 1 - leftPanelSize;\r\n  };\r\n\r\n  const getCategoriesFromLibrary = lib => {\r\n    get(\"/getCategoriesFromLibrary\", { library: lib }).then(res => {\r\n      dispatch(catsActions.setCats, res.data);\r\n      setTimeout(() => {\r\n        dispatch(libsActions.setLibToFocus, lib);\r\n      });\r\n    });\r\n  };\r\n\r\n  const getItemsFromCategory = cat => {\r\n    dispatch(catsActions.getItemsFromCategory, cat);\r\n    dispatch(catsActions.setKey, { newKey: \"showSchema\", schemaName: cat });\r\n  };\r\n\r\n  const handleClickOnItem = label => {\r\n    dispatch(itemsActions.setItemToFocus, label);\r\n  };\r\n\r\n  const handleAddFromPack = type => {\r\n    dispatch(itemsActions.onAddFromPack, type);\r\n  };\r\n\r\n  const handleDragState = value => {\r\n    dispatch(itemsActions.changeDragState, value);\r\n  };\r\n\r\n  const getAllLibs = (canvas, width, height) => {\r\n    get(\"/getAll\").then(res => {\r\n      const {data, projectName } = res.data;\r\n\r\n      const libraryPack = new LibraryPack({ canvas, width, height });\r\n      libraryPack.initWithData(data,projectName);\r\n      libraryPack.setLevelClick(1, getCategoriesFromLibrary);\r\n      libraryPack.setLevelClick(2, getItemsFromCategory);\r\n      libraryPack.setLevelClick(3, handleClickOnItem);\r\n\r\n      setLibraryPack(libraryPack);\r\n    });\r\n  };\r\n\r\n  const getAllType = (canvas, width, height) => {\r\n    get(\"/getTypesArrangeByGroups\").then(res => {\r\n      const data = res.data;\r\n      dispatch(setTypes, res.data);\r\n      const typesPack = new TypesPack({\r\n        canvas,\r\n        width,\r\n        height,\r\n        showMainCircle: false\r\n      });\r\n      typesPack.setAddToSchema(handleAddFromPack);\r\n      typesPack.setDragState(handleDragState);\r\n      typesPack.initWithData(data);\r\n      typesPack.scaleDown();\r\n      setTypesPack(typesPack);\r\n    });\r\n  };\r\n\r\n  const createDefs = canvas => {\r\n    // var defs = canvas.append(\"defs\");\r\n    // createGradient(defs);\r\n  };\r\n\r\n  const paintTabs = (canvas, width, height) => {\r\n    // const openMenu = () => {\r\n    //   dispatch((tree)=>{\r\n    //     tree.set('openMenu',true);\r\n    //   })\r\n    // }\r\n\r\n\r\n    const onSelect = id => {\r\n      projectTag.setSelected(id === \"project\");\r\n      typesTag && typesTag.setSelected(id === \"types\");\r\n\r\n      switch (id) {\r\n        case \"types\":\r\n          getLibraryPack().scaleDown();\r\n          getTypesPack().scaleUp();\r\n          fillFrame(access.color(\"types.bg\"));\r\n          break;\r\n\r\n        case \"project\":\r\n          getLibraryPack().scaleUp();\r\n          getTypesPack().scaleDown();\r\n          fillFrame(access.color(\"canvases.bg\"));\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n\r\n    const initKey = viewKey === \"initKey\";\r\n\r\n    const projectTag = new Tag({\r\n      selected: true,\r\n      onSelect,\r\n      canvas,\r\n      width,\r\n      height,\r\n      id: \"project\",\r\n      index: 0,\r\n      color: access.color(\"tags.bg\")\r\n    });\r\n\r\n    let typesTag;\r\n\r\n    if (!initKey) {\r\n      typesTag = new Tag({\r\n        selected: false,\r\n        onSelect,\r\n        canvas,\r\n        width,\r\n        height,\r\n        id: \"types\",\r\n        index: 1,\r\n        color: access.color(\"tags.bg\")\r\n      });\r\n    }\r\n\r\n    // const menuTag = new Tag({\r\n    //   selected: false,\r\n    //   onSelect: openMenu,\r\n    //   canvas,\r\n    //   width,\r\n    //   height,\r\n    //   id: \"menu\",\r\n    //   index: initKey ? 1 : 2,\r\n    //   color: access.color(\"tags.bg\")\r\n    // });\r\n  };\r\n\r\n  const onCanvasReady = (canvas, width, height) => {\r\n    createDefs(canvas);\r\n\r\n    const frame = paintFrame(canvas, width, height);\r\n    move(canvas, frame, access.color(\"canvases.fg\"));\r\n\r\n    paintTabs(canvas, width, height);\r\n    getAllLibs(canvas, width, height);\r\n    getAllType(canvas, width, height);\r\n  };\r\n\r\n  const renderStart = () => {\r\n    const margin = {\r\n      top: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0\r\n    };\r\n\r\n    return <Start canvasReady={onCanvasReady} margin={margin} />;\r\n  };\r\n\r\n  const zIndex = access.dim(\"zIndexViews.schemaPanel\"); // check\r\n\r\n  return (\r\n    <div style={{ flex: getFlex(), zIndex: zIndex, width: \"100%\", userSelect: \"none\" }}>\r\n      {renderStart()}\r\n      <Absolute left={'unset'} top={'unset'}> \r\n        <Logo alt={'logo'} src={process.env.PUBLIC_URL + \"/gen_icon.png\"} onClick={()=>{ setRotate(rotate+1) }} rotate={rotate}/>\r\n      </Absolute>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainCanvas;\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\nimport { Modal, ClickAwayListener } from \"@material-ui/core\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport Center from \"plugins/Layouts/Center\";\r\nimport Row from \"plugins/Layouts/Row\";\r\nimport Column from \"plugins/Layouts/Column\";\r\nimport Label from \"plugins/tools/Label\";\r\nimport IconButton from \"plugins/icons/IconButton\";\r\n\r\nfunction Menu(params) {\r\n  const { openMenu, dispatch } = useBranch({ openMenu: [\"openMenu\"] });\r\n  const [focus, setFocus] = useState(null);\r\n\r\n  const closeMenu = () => {\r\n    dispatch(tree => {\r\n      tree.set(\"openMenu\", false);\r\n    });\r\n  };\r\n\r\n  const renderBack = () => {\r\n    if (!focus) return;\r\n    const btnStyle = { marginLeft: 10, marginTop: 2 };\r\n\r\n    return (\r\n      <IconButton\r\n        icon={access.icon(\"searchBar.back\")}\r\n        color={access.color(\"menu.headerFg\")}\r\n        onClick={() => {\r\n          setFocus(null);\r\n        }}\r\n        btnStyle={btnStyle}\r\n      />\r\n    );\r\n  };\r\n\r\n  const MenuHeader = () => {\r\n\r\n    const label = focus ? access.translate(focus) : access.translate(\"menu\");\r\n\r\n    return (\r\n      <Row\r\n        background={access.color(\"menu.headerBg\")}\r\n        color={access.color(\"menu.headerFg\")}\r\n      >\r\n        {renderBack()}\r\n        <Label fontSize={'14px'} >{label.toUpperCase()}</Label>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  const MenuItem = ({ label, onClick }) => {\r\n    return (\r\n      <Row\r\n        menuItem={true}\r\n        style={{ boxShadow: \"unset\" }}\r\n        background={access.color(\"menu.bg\")}\r\n        onClick={onClick}\r\n      >\r\n        <Label>{label}</Label>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  const renderMainMenu = () => {\r\n\r\n    if(focus) return null;\r\n\r\n    const handleSave = () => {\r\n      setFocus(\"save\");\r\n    };\r\n\r\n    const handleNew = () => {\r\n      setFocus(\"new\");\r\n    };\r\n\r\n    const handleOpen = () => {\r\n      setFocus(\"open\");\r\n    };\r\n\r\n    const handleRemove = () => {\r\n      setFocus(\"remove\");\r\n    };\r\n\r\n    return (\r\n      <Fragment>\r\n        <MenuItem label={access.translate(\"Save as\")} onClick={handleSave} />\r\n        <MenuItem label={access.translate(\"New project\")} onClick={handleNew} />\r\n        <MenuItem\r\n          label={access.translate(\"Open project\")}\r\n          onClick={handleOpen}\r\n        />\r\n        <MenuItem\r\n          label={access.translate(\"Remove project\")}\r\n          onClick={handleRemove}\r\n        />\r\n      </Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Modal open={openMenu} onEscapeKeyDown={closeMenu}>\r\n      <Center>\r\n        <ClickAwayListener onClickAway={closeMenu}>\r\n          <Column\r\n            background={access.color(\"menu.headerBg\")}\r\n            width={\"300px\"}\r\n            height={\"250px\"}\r\n            style={{ borderRadius: 4, boxShadow: \"unset\" }}\r\n          >\r\n            <MenuHeader />\r\n            {renderMainMenu()}\r\n          </Column>\r\n        </ClickAwayListener>\r\n      </Center>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default Menu;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport styled from \"styled-components\";\r\n\r\nimport * as access from \"plugins/access\";\r\n\r\nimport MenuPanel from \"Views/MenuPanel\";\r\nimport SchemaPanel from \"Views/SchemaPanel\";\r\nimport Mask from \"plugins/tools/Mask\";\r\nimport MainCanvas from \"plugins/canvases/MainCanvas\";\r\nimport Menu from \"plugins/menuModal/Menu\";\r\n\r\nconst InitMask = styled(Mask)`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n`;\r\n\r\nfunction Main() {\r\n  const { viewKey } = useBranch({ viewKey: [\"viewKey\"] });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 3000);\r\n    return () => {\r\n      clearTimeout(t);\r\n    };\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <InitMask opacity={1} mask={access.color(\"backgrounds.secondary\")}>\r\n        <img alt=\"logo\" src={process.env.PUBLIC_URL + \"/gen_logo.png\"} />\r\n        <div style={{ width: 400 }}>\r\n          <LinearProgress value={50} color={\"primary\"} />\r\n        </div>\r\n      </InitMask>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Mask\r\n      opacity={1}\r\n      mask={access.color(\"backgrounds.secondary\")}\r\n      style={{ display: \"flex\" }}\r\n    >\r\n      <MenuPanel viewKey={viewKey} />\r\n      <SchemaPanel />\r\n      <MainCanvas key={viewKey} />\r\n      <Menu />\r\n    </Mask>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\r\nimport {useRoot} from 'baobab-react/hooks';\r\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { color } from \"plugins/access\";\r\nimport Main from \"Views/Main\";\r\n\r\nconst primary = color('materialUI.primary');\r\nconst secondary = color('materialUI.secondary');\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: primary\r\n    },\r\n    secondary: {\r\n      main: secondary\r\n    }\r\n  }\r\n});\r\n\r\n\r\nfunction App({tree}) {\r\n\r\n  const Root = useRoot(tree);\r\n\r\n  return (\r\n    <Root>\r\n      <ThemeProvider theme={theme}>\r\n        <Main/>\r\n      </ThemeProvider>\r\n    </Root>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import Baobab from 'baobab';\r\n\r\nconst tree = new Baobab({\r\n  types: {},\r\n  projectName: \"project\",\r\n  libs: [],\r\n  cats: [],\r\n  items: [],\r\n  mockData: null,\r\n  focus: {\r\n    lib: null,\r\n    cat: null,\r\n    item: null\r\n  },\r\n\r\n  packView: 'project', // 'types'\r\n  drag: false,\r\n  selected: null,\r\n  selectedCategory: null,\r\n  selectedLibrary: null,\r\n\r\n  collapse: false,\r\n  viewKey: 'initKey',\r\n  openMenu: false\r\n});\r\n\r\nwindow.tree = tree;\r\n\r\nexport default tree;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'index.css';\nimport App from 'App';\n//import * as serviceWorker from './serviceWorker';\nimport tree from \"tree/tree\";\n\nReactDOM.render(<App tree={tree} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}