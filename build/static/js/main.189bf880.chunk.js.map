{"version":3,"sources":["plugins/access/index.js","plugins/tools/Mask.js","plugins/Layouts/Column.js","plugins/Layouts/Row.js","plugins/tools/Label.js","plugins/menuPanel/SearchBar.js","plugins/Layouts/Spaces.js","plugins/menuPanel/ListItem.js","plugins/Layouts/Absolute.js","plugins/menuPanel/AddRow.js","plugins/menuPanel/BottomBarMenu.js","plugins/canvases/utils/packUtils.js","plugins/requests/index.js","tree/actions/libs.js","tree/actions/cats.js","tree/actions/items.js","Views/MenuPanel.js","plugins/Layouts/Center.js","plugins/editor/Editor.js","plugins/schemePanel/SwitchEditorBtn.js","plugins/tools/Composer.js","plugins/tools/FileDownloader.js","plugins/tools/CopyToClipBoard.js","plugins/schemePanel/BarButtons.js","plugins/schemePanel/BottomBarGen.js","plugins/schemePanel/BottomBarScheme.js","plugins/schemePanel/DragMask.js","plugins/tools/Start.js","plugins/canvases/utils/canvasActions.js","plugins/canvases/OpenPanelCanvas.js","Views/SchemePanel.js","plugins/canvases/pack/Pack.js","plugins/canvases/pack/LibraryPack.js","plugins/canvases/paint/Tag.js","plugins/canvases/pack/TypesPack.js","plugins/canvases/paint/Frames.js","plugins/canvases/MainCanvas.js","Views/Main.js","App.js","tree/tree.js","index.js"],"names":["get","collection","path","value","split","i","length","dim","dimensions","time","timeings","color","code","colors","startsWith","indexOf","icon","getType","typeOrName","icons","translate","Mask","styled","div","props","top","bottom","left","right","opacity","mask","defaultProps","propTypes","PropTypes","number","string","Column","zIndex","height","background","flex","shadowColor","oneOfType","Row","width","menuItem","Label","fontSize","weight","useStyles","makeStyles","theme","btn","marginLeft","marginTop","access","SearchBar","label","nested","onBack","classes","IconButton","className","size","onClick","Icon","renderBack","SpaceAround","Srow","selected","padding","ListItem","handleRowClick","handleRemove","parent","handleEdit","useBranch","handleRemoveClick","e","stopPropagation","isSelected","key","Absolute","open","AddRow","handleAdd","useState","setValue","useEffect","add","style","cursor","onKeyUp","TextField","autoFocus","fullWidth","onChange","target","trimStart","variant","BottomBar","BackRow","BottomBarMenu","libraryPack","typesPack","viewKey","collapse","dispatch","a","b","button","copy","transform","handleCollapse","tree","set","axios","require","rootUrl","params","from","query","setLibToSelected","lib","setLibs","data","libraries","setTimeout","projectName","setLibToFocus","addLib","library","then","res","catch","err","console","log","response","message","removeLib","getCategoriesFromLibrary","setLibraryPack","pack","getLibraryPack","setTypesPack","getTypesPack","setCatToSelected","cat","setCats","cats","setCatToFocus","addCategory","category","removeCategory","getItemsFromCategory","amount","generateFromCat","setKey","newKey","schemeName","onCategorySelected","generate","items","scheme","onEditorChange","onChangeFromEditor","replaceScheme","getValueByRendererType","renderer","type","placeholder","onAddFromPack","additionalFields","AdditionalFields","innerRenderer","getAdditionalFields","num","Math","floor","random","changeDragState","setItemToFocus","item","setSelected","removeItem","field","focus","CollapseColumn","LeftPanel","libs","libsActions","RenderList","listOf","handleClickOnLib","onLibrarySelected","handleClickOnCat","catsActions","handleClickOnItem","itemsActions","handleRemoveLib","onRemoveLibrary","handleRemoveCat","onRemoveCategory","handleRemoveItem","onRemoveItem","handleEditLib","handleEditCat","map","Object","keys","RenderAddRow","addTo","trim","onAddLibrary","onAddCategory","getLabel","Center","overflow","Editor","isData","mockData","initCode","setInitCode","setCode","codeFromProps","JSON","stringify","mode","name","onLoad","c","newCode","parse","error","updateScheme","showPrintMargin","showGutter","highlightActiveLine","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","showLineNumbers","tabSize","SwitchButtonCont","selectedBtn","indicator","backgroundColor","SwitchEditorBtn","onSwitch","CodeSelected","disabled","codeClass","schemeClass","Tabs","v","Tab","root","Composer","createElement","mapChildren","children","React","Children","child","isDecorator","cloneElement","propsTypes","func","isRequired","FileDownloader","content","fileName","fileExtension","rest","saveFile","preventDefault","parsed","blob","Blob","url","window","URL","createObjectURL","document","body","appendChild","href","download","click","revokeObjectURL","removeChild","object","bool","CopyToClipBoard","copyToClipboard","textToCopy","navigator","clipboard","writeText","el","display","select","execCommand","ButtonsCont","filename","BarButtons","AmountInput","play","marginRight","BottomBarGen","setAmount","gen","BottomBarScheme","RoundWrapper","p","DragMask","text","setOpen","onMouseEnter","onMouseLeave","transition","maxWidth","Start","measure","bind","createCanvas","this","canvas","do","margin","canvasReady","d3","id","append","attr","Bounding","getElementById","getBoundingClientRect","v4","Component","prevMousePlace","move","board","line","x","d","y","curve","on","mousePlace","offsetX","offsetY","duration","ease","t","remove","dropCircles","OpenPanelCanvas","close","setclose","onCanvasReady","frame","createFrame","Placeholder","TopBar","InnerColumn","SchemePanel","dragState","selectedCategory","editorWrapper","useRef","editorWidth","setEditorWidth","editorToRender","setEditorToRender","handleSwitchEditor","InnerFlex","ref","minWidth","current","renderEditor","Pack","circlePadding","marginBottom","showMainCircle","limitByLevel","moveOnCircleColor","moveOnTextColor","getTranslate","createPack","normalizeData","firstLevelClick","secondLevelClick","thirdLevelClick","clickIsBlock","packDomain","colorScaleRange","textClasses","in","out","init","mainGroup","mainData","newData","level","nameKey","countBack","push","isMainData","packLayout","treeRoot","nodes","descendants","filter","n","depth","createNodes","paintCircles","paintTexts","circles","selectAll","texts","handleNodeClick","handleNodeDrag","colorScale","domain","range","enter","r","exit","exitCircles","updateCircles","childrenScope","isEmpty","adaptText","radius","cutIn","substring","getFontSize","isChildren","min","max","getTextPosition","exitTexts","updateTexts","clickAction","_clickAction","navigateBack","LibraryPack","find","l","findLibrary","findCategory","it","findItem","editorData","libIndex","findIndex","catIndex","newLib","newCat","tagsContexts","Tag","index","onSelect","initPosition","tagHeight","tagWidth","positionX","deltaY","positionY","paintTag","paintText","tags","mouseEvents","TypesPack","dragCircle","dragText","blockDrag","firstMove","panelIsopen","addToScheme","setDrag","event","sourceEvent","prevX","getPrevCircle","movementX","Number","prevY","prevR","prevT","prevFontSize","prevText","getPrevText","TempText","TempFontSize","TempX","TempY","TempR","TempT","getXyFromEvent","dragAction","stop","startDragCircle","startDragText","onDrag","block","checkDrop","endDragText","endDragCircle","initDragStart","call","backTag","removeTag","paintFrame","openAddPanel","closeAddPanel","paintAddPanel","createGradient","defs","gradient","MainCanvas","handleAddFromPack","handleDragState","createDefs","addPanel","typesTag","projectTag","scaleDown","scaleUp","initKey","paintTabs","initWithData","setLevelClick","getAllLibs","setAddToScheme","setDragState","getAllType","schemePanelSize","leftPanelSize","getFlex","Main","MenuPanel","primary","secondary","createMuiTheme","palette","main","App","Root","useRoot","ThemeProvider","Baobab","packView","drag","selectedLibrary","ReactDOM","render"],"mappings":"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","file":"static/js/main.189bf880.chunk.js","sourcesContent":["\nimport colors from \"../config/colors\";\nimport icons from \"../config/icons\";\nimport dimensions from \"../config/dimensions\";\nimport timeings from \"../config/time\";\n\nfunction get(collection, path) {\n    if(!path) return collection;\n    \n    let value = collection;\n    \n    if (typeof path === 'string') {\n        path = path.split(/[.,]/);\n    }\n    \n    for (let i = 0; i < path.length; i++) {\n        \n        if(typeof value === 'undefined'){\n            return undefined;\n        }\n        value = value[path[i]];  \n    }\n    \n    return value; \n};\n\nexport const dim = (path) => {\n    let dimension = get(dimensions,path);\n    return dimension;\n}\n\nexport const time = (path) => {\n    let timing = get(timeings,path);\n    return timing;\n}\n\nexport const color = (path) => {\n    let code = get(colors,path);\n    \n    if ( !(typeof code === 'string') ) {     \n        return code;\n    } \n\n    if ( code.startsWith('#') ) {\n      return code;\n    } \n\n    if ( code.indexOf('.') > -1 || code.indexOf(',') > -1 ){\n        return color(code);\n    }\n\n    return undefined;\n};\n\nexport const icon = (path, getType = false) => {\n    const typeOrName = getType ? 'type' : 'name';\n\n    let code = get(icons,path);\n    \n    if ( typeof code === 'string' && (code.indexOf('.') > -1 || code.indexOf(',') > -1) ){\n        return icon(code,getType);\n    }\n\n    if(!code) return undefined;\n\n    if ( !code[typeOrName] ) {     \n        return code;\n    }\n\n    return code[typeOrName];\n};\n\nexport const translate = (value) => {\n    return value;\n}\n\n","import PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst Mask = styled.div`\n  position: absolute;\n  top: ${props => props.top || 0};\n  bottom: ${props => props.bottom || 0};\n  left: ${props => props.left || 0};\n  right: ${props => props.right || 0};\n  opacity: ${props => props.opacity};\n  background: ${props => props.mask};\n`;\n\nMask.defaultProps = {\n    opacity: 0.7,\n    mask: 'white',\n  }\n  \n  Mask.propTypes = {\n    opacity: PropTypes.number,\n    mask: PropTypes.string,\n  }\n  \n  \n  export default Mask","import styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nconst Column = styled.div`\n  z-index: ${props => props.zIndex};\n  position: relative;\n  min-width: 100px;\n  height: ${props => props.height};\n  background: ${props => props.background};\n  display: flex;\n  flex: ${props => props.flex};\n  flex-direction: column;\n  justify-content: flex-start;\n  overflow: auto;\n  box-shadow: 1px 0px 4px 0px ${props => props.shadowColor};\n`;\n\nColumn.defaultProps = {\n  zIndex: 1,\n  flex: 0.2,\n  height: '100%',\n  background: 'inherit',\n  shadowColor: \"rgb(93, 107, 140)\",\n  }\n\nColumn.propTypes = {\n  flex: PropTypes.number,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  background: PropTypes.string,\n  shadowColor: PropTypes.string\n};\n\nexport default Column;\n","import styled from 'styled-components';\nimport PropTypes from \"prop-types\";\nimport { color } from \"../access\";\n\nconst Row = styled.div`  \n  z-index: ${props => props.zIndex};\n  position: relative; \n  overflow: hidden;\n  min-height: 50px;\n  height: ${props => props.height};\n  width: ${props => props.width};\n  background: ${props => props.background};\n  color: ${props => props.color};\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  cursor:  ${(props) => (props.menuItem && 'pointer')};\n  box-shadow: 0px 1px 4px 0px ${props => props.shadowColor};\n  :hover {\n    background: ${(props) => (props.menuItem && color('backgrounds.hover'))};\n    color: ${(props) => (props.menuItem && color('texts.primary'))};\n  }\n  :active {\n    background: ${(props) => (props.menuItem && color('backgrounds.active'))};\n    color: ${(props) => (props.menuItem && color('texts.primary'))};\n  }\n`\n\nRow.defaultProps = {\n  zIndex: 1,\n  width: '100%',\n  height: '50px',\n  background: 'inherit',\n  color: color('texts.secondary'),\n  shadowColor: 'rgb(93, 107, 140)',\n  }\n\nRow.propTypes = {\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  background: PropTypes.string,\n  shadowColor: PropTypes.string\n};\n\nexport default Row;","import styled from 'styled-components';\n\nconst Label = styled.div`   \n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  padding: 0 10px;\n  width: ${props => props.width || 'fit-content'};\n  color: ${props => props.color || 'inherit'};\n  font-size: ${props => props.fontSize || 'inherit'};\n  font-weight:  ${props => props.weight || '400'};\n`\n\nexport default Label;","import React from \"react\";\r\nimport { Icon, IconButton } from \"@material-ui/core\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport * as access from \"../access\";\r\n\r\nimport Row from \"../Layouts/Row\";\r\nimport Label from \"../tools/Label\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  btn: {\r\n    marginLeft: 10,\r\n    marginTop: 2,\r\n    color: access.color(\"searchBar.fg\")\r\n  }\r\n}));\r\n\r\nfunction SearchBar({ label, nested, onBack }) {\r\n  const classes = useStyles();\r\n  \r\n  const renderBack = ()=>{\r\n    if(!nested) return;\r\n    \r\n    return(\r\n      <IconButton className={classes.btn} size=\"small\" onClick={onBack}>\r\n        <Icon>{access.icon(\"searchBar.back\")}</Icon>\r\n      </IconButton>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Row background={access.color(\"searchBar.bg\")}>\r\n      { renderBack() }\r\n      <Label color={access.color(\"searchBar.fg\")}>{label}</Label>\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n","import styled from 'styled-components';\n\nconst SpaceBetween = styled.div`   \n  width: ${props => props.width || '50px'};\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`\n\nconst SpaceAround = styled.div`   \n  width: ${props => props.width || '50px'};\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n`\n\nexport { SpaceBetween, SpaceAround };","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport { Icon, IconButton } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport * as access from \"../access\";\r\n\r\nimport Row from \"../Layouts/Row\";\r\nimport Label from \"../tools/Label\";\r\nimport { SpaceAround } from \"../Layouts/Spaces\";\r\n\r\nconst Srow = styled(Row)`\r\n  justify-content: space-between;\r\n  background: ${props => props.selected ? access.color('backgrounds.primary') : 'inherit'};\r\n  color: ${props => props.selected ? access.color('texts.primary') : 'inherit'};\r\n`;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  btn: {\r\n    color: access.color(\"texts.primary\"),\r\n    padding: 5,\r\n    fontSize: 20,\r\n  }\r\n}));\r\n\r\nfunction ListItem({ label, handleRowClick, handleRemove, handleEdit, parent }) {\r\n  const classes = useStyles();\r\n  const { selected } = useBranch({ selected: [\"selected\"] });\r\n\r\n  const handleRemoveClick = (e)=>{\r\n    e.stopPropagation();\r\n    handleRemove(label);\r\n  }\r\n\r\n  // const handleEditClick = (e)=>{\r\n  //   e.stopPropagation();\r\n  //   handleEdit(label);\r\n  // }\r\n\r\n  const renderRemove = () => {\r\n    return (\r\n      <IconButton size=\"small\" onClick={handleRemoveClick}>\r\n        <Icon className={classes.btn}>{access.icon(\"listItem.remove\")}</Icon>\r\n      </IconButton>\r\n    );\r\n  };\r\n\r\n  const rendeEdit = () => {\r\n    return null\r\n    //TODO: edit + SpaceAround width={\"80px\"}\r\n    // return (\r\n    //   <IconButton style={{cursor:'not-allowed'}} size=\"small\" onClick={handleEditClick}>\r\n    //     <Icon className={classes.btn}>{access.icon(\"listItem.edit\")}</Icon>\r\n    //   </IconButton>\r\n    // );\r\n  };\r\n\r\n  const renderButtons = () => {\r\n    return (\r\n      <SpaceAround width={\"50px\"}>\r\n        {rendeEdit()}\r\n        {renderRemove()}\r\n      </SpaceAround>\r\n    );\r\n  };\r\n\r\n  const isSelected = selected === `${parent}:${label}`;\r\n\r\n  return (\r\n    <Srow\r\n      key={label}\r\n      menuItem={true}\r\n      selected={isSelected}\r\n      onClick={() => {\r\n        handleRowClick(label);\r\n      }}\r\n    >\r\n      <Label>{label}</Label>\r\n      {renderButtons()}\r\n    </Srow>\r\n  );\r\n}\r\n\r\nexport default ListItem;\r\n","import PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst Absolute = styled.div`\n  position: absolute;\n  top: ${props => props.top};\n  bottom: ${props => props.bottom};\n  left: ${props => props.left};\n  right: ${props => props.right};\n  background: transparent;\n`;\n\nAbsolute.defaultProps = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0\n  }\n  \n  Absolute.propTypes = {\n    top: PropTypes.number,\n    bottom: PropTypes.number,\n    left: PropTypes.number,\n    right: PropTypes.number\n  }\n  \n  \n  export default Absolute","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Icon, IconButton, TextField } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport * as access from \"../access\";\r\n\r\nimport Row from \"../Layouts/Row\";\r\nimport Absolute from \"../Layouts/Absolute\";\r\n\r\nlet open = false;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  btn: {\r\n    color: access.color(\"texts.secondary\"),\r\n    padding: 5,\r\n    fontSize: 20\r\n  }\r\n}));\r\n\r\nfunction AddRow({ label, handleAdd }) {\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    open = false;\r\n  }, []);\r\n\r\n  const handleOnKeyPrass = e => {\r\n    if (!value) return;\r\n    switch (e.key) {\r\n      case \"Escape\":\r\n        setValue(\"\");\r\n        break;\r\n      case \"Enter\":\r\n        add();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const add = () => {\r\n    handleAdd(value);\r\n    setValue(\"\");\r\n  };\r\n\r\n  const renderAddBtn = () => {\r\n    if (!value) return null;\r\n\r\n    return (\r\n      <Absolute left={null}>\r\n        <Row>\r\n          <IconButton size=\"small\" onClick={add}>\r\n            <Icon className={classes.btn}>{access.icon(\"leftPanel.add\")}</Icon>\r\n          </IconButton>\r\n        </Row>\r\n      </Absolute>\r\n    );\r\n  };\r\n\r\n  const renderInput = () => {\r\n    const handleChange = e => {\r\n      if (!open) open = true;\r\n      setValue(e.target.value.trimStart());\r\n    };\r\n\r\n    return (\r\n      <TextField\r\n        autoFocus={open}\r\n        fullWidth={true}\r\n        value={value}\r\n        onChange={handleChange}\r\n        label={label}\r\n        variant={\"filled\"}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Row style={{ cursor: \"pointer\" }} onKeyUp={handleOnKeyPrass}>\r\n      {renderInput()}\r\n      {renderAddBtn()}\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default AddRow;\r\n","import React from \"react\";\r\n\r\nimport * as access from \"../access\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport { Icon, IconButton } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Row from \"../Layouts/Row\";\r\n\r\nconst BottomBar = styled(Row)`\r\n  justify-content: flex-end;\r\n`;\r\n\r\nconst BackRow = styled(Row)`\r\n  justify-content: center;\r\n`;\r\n\r\nfunction BottomBarMenu({viewKey}) {\r\n  const { collapse, dispatch } = useBranch({ collapse: [\"collapse\"] });\r\n\r\n  const useStyles = makeStyles((theme,a,b) => {\r\n    return{\r\n      button: {\r\n        color: access.color(\"bottomBar.fg\"),\r\n        padding: 10\r\n      },\r\n      copy: {\r\n        fontSize: 18,\r\n        transform: collapse ? 'rotate(180deg)' : 'rotate(0deg)',\r\n      }\r\n    }\r\n  });\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleCollapse = () => {\r\n    dispatch((tree)=>{\r\n      tree.set('collapse', !collapse);\r\n    })\r\n  }\r\n\r\n  const RenderCollapseButton = () => {\r\n    return (\r\n      <BackRow width={'50px'} onClick={handleCollapse}>\r\n        <IconButton size=\"small\" className={classes.button}>\r\n          <Icon className={classes.copy}>\r\n            {access.icon(\"leftPanel.collapse\")}\r\n          </Icon>\r\n        </IconButton>\r\n      </BackRow>\r\n    );\r\n  };\r\n\r\n  if (viewKey === \"initKey\") return <div></div>;\r\n\r\n  return (\r\n    <BottomBar background={access.color(\"bottomBar.bg\")}>\r\n      <RenderCollapseButton />\r\n    </BottomBar>\r\n  );\r\n}\r\n\r\nexport default BottomBarMenu;\r\n","let libraryPack;\r\nlet typesPack;\r\n\r\nexport const setLibraryPack = (pack) => {\r\n    libraryPack = pack;\r\n}\r\n\r\nexport const getLibraryPack = () => {\r\n    return libraryPack;\r\n}\r\n\r\nexport const setTypesPack = (pack) => {\r\n    typesPack = pack;\r\n}\r\n\r\nexport const getTypesPack = () => {\r\n    return typesPack;\r\n}\r\n\r\n","const axios = require(\"axios\");\r\n\r\nconst rootUrl = \"http://localhost:5588/mocking_G\";\r\n\r\nfunction get(path, params) {\r\n  let from = `${rootUrl}${path}`;\r\n  let query = { params };\r\n\r\n  return axios.get(from, query);\r\n}\r\n\r\nexport { get };\r\n","import { get } from \"../../plugins/requests\";\r\n\r\nfunction setLibToSelected(tree,lib) {\r\n  tree.set([\"selectedLibrary\"], lib);\r\n}\r\n\r\nexport function setLibs(tree, data) {\r\n  tree.set([\"libs\"], data.libraries);\r\n  setTimeout(() => { \r\n    tree.set([\"projectName\"], data.projectName);\r\n  })\r\n  \r\n}\r\n\r\nexport function setLibToFocus(tree, lib) {\r\n  tree.set([\"focus\", \"lib\"], lib);\r\n\r\n  if(lib){\r\n    setLibToSelected(tree, lib);\r\n  }\r\n}\r\n\r\nexport function addLib(tree, lib) {\r\n  get(\"/addLibrary\", { library: lib })\r\n    .then(res => {\r\n      tree.set(\"libs\", res.data);\r\n    })\r\n    .catch(err => {\r\n      console.log(err.response.data.message);\r\n    });\r\n}\r\n\r\nexport function removeLib(tree, lib) {\r\n  get(\"/removeLibrary\", { library: lib }).then(res => {\r\n    tree.set(\"libs\", res.data);\r\n  });\r\n}\r\n\r\nexport function getCategoriesFromLibrary(tree, library) {\r\n  get(\"/getCategoriesFromLibrary\", { library }).then(res => {\r\n    tree.set(\"cats\", res.data);\r\n    setTimeout(() => {\r\n      tree.set([\"focus\", \"lib\"], library);\r\n      setLibToSelected(tree, library);\r\n    });\r\n  });\r\n}\r\n","import { getLibraryPack } from \"../../plugins/canvases/utils/packUtils\";\r\nimport { get } from \"../../plugins/requests\";\r\n\r\nfunction setCatToSelected(tree,cat) {\r\n  tree.set([\"selectedCategory\"], cat);\r\n}\r\n\r\nexport function generateFromCat(tree,category, amount = 1) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n\r\n  get(\"/generate\", { library, category, amount }).then((res)=>{\r\n    tree.set('mockData',res.data);\r\n  }).catch((err)=>{\r\n    //TODO: notify type does not exist\r\n    tree.set('mockData',null);\r\n    console.log(err.response.data.message)\r\n  })\r\n}\r\n\r\nexport function setCats(tree, cats) {\r\n  tree.set([\"cats\"], cats);\r\n}\r\n\r\nexport function setCatToFocus(tree, cat) {\r\n  tree.set([\"focus\", \"cat\"], cat);\r\n\r\n  if(cat){\r\n    setCatToSelected(tree,cat);\r\n  }\r\n}\r\n\r\nexport function addCategory(tree, category) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n\r\n  get(\"/addCategory\", { library, category })\r\n    .then(res => {\r\n      tree.set(\"cats\", res.data);\r\n    })\r\n    .catch(err => {\r\n      console.log(err.response.data.message);\r\n    });\r\n}\r\n\r\nexport function removeCategory(tree, category) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n\r\n  get(\"/removeCategory\", { library, category }).then(res => {\r\n    tree.set(\"cats\", res.data);\r\n  });\r\n}\r\n\r\nexport function getItemsFromCategory(tree, category) {\r\n  const library = tree.get([\"focus\", \"lib\"]);\r\n\r\n  get(\"/getScheme\", { library, category }).then(res => {\r\n    tree.set(\"items\", res.data);\r\n    setTimeout(() => {\r\n      tree.set([\"focus\", \"cat\"], category);\r\n      setCatToSelected(tree,category);\r\n      generateFromCat(tree,category)\r\n    });\r\n  });\r\n}\r\n\r\nexport function setKey(tree, { newKey, schemeName }) {\r\n  const viewKey = tree.get('viewKey');\r\n  const lib = tree.get(['focus','lib']);\r\n  \r\n  if(viewKey !== newKey){\r\n    tree.set('viewKey',newKey);\r\n    \r\n    setTimeout(() => {\r\n        getLibraryPack().onCategorySelected(lib,schemeName);\r\n      }, 200) \r\n  } else {\r\n    getLibraryPack().onCategorySelected(lib,schemeName);\r\n  }\r\n}\r\n","import { get } from \"../../plugins/requests\";\r\nimport { getLibraryPack } from \"../../plugins/canvases/utils/packUtils\";\r\n\r\nexport function setItems(tree, items) {\r\n  tree.set([\"items\"], items);\r\n}\r\n\r\nexport function generate(tree, { items, amount = 1 }) {\r\n  get(\"/generate\", { scheme: items, amount })\r\n    .then(res => {\r\n      tree.set(\"mockData\", res.data);\r\n    })\r\n    .catch(err => {\r\n      //TODO: notify type does not exist\r\n      tree.set(\"mockData\", null);\r\n      console.log(err.response.data.message);\r\n    });\r\n}\r\n\r\nfunction replaceScheme(tree, items) {\r\n  const library = tree.get(\"selectedLibrary\");\r\n  const category = tree.get(\"selectedCategory\");\r\n  const libraryPack = getLibraryPack();\r\n\r\n  get(\"/replaceScheme\", { scheme: items, library, category })\r\n    .then(res => {\r\n      tree.set(\"items\", res.data);\r\n      libraryPack.onChangeFromEditor(library, category, res.data);\r\n    })\r\n    .catch(err => {\r\n      //TODO: notify type does not exist\r\n      console.log(err.response.data.message);\r\n    });\r\n}\r\n\r\nexport function onEditorChange(tree, items) {\r\n  generate(tree, { items, amount: 1 });\r\n  replaceScheme(tree, items);\r\n}\r\n\r\nfunction getValueByRendererType(renderer) {\r\n  switch (renderer.type) {\r\n    case \"number\":\r\n      return 10;\r\n    case \"string\":\r\n      return renderer.placeholder;\r\n    case \"autocompleteArray\":\r\n      return [];\r\n\r\n    default:\r\n      return renderer.placeholder;\r\n  }\r\n\r\n  \r\n}\r\n\r\nfunction getAdditionalFields(type) {\r\n  const { renderer } = type;\r\n\r\n  if (!renderer) return {};\r\n\r\n  if (renderer.type) {\r\n    return { value: getValueByRendererType(renderer) };\r\n  }\r\n\r\n  let AdditionalFields = { value: {} };\r\n  for (const key in renderer) {\r\n    const innerRenderer = renderer[key];\r\n    AdditionalFields.value[key] = getValueByRendererType(innerRenderer);\r\n  }\r\n\r\n  return AdditionalFields;\r\n}\r\n\r\nexport function onAddFromPack(tree, type) {\r\n  get(\"/getTypeByKey\", { type }).then(res => {\r\n    const additionalFields = getAdditionalFields(res.data);\r\n    const num = Math.floor(Math.random() * 1000);\r\n\r\n    let items = { ...tree.get(\"items\") };\r\n    items[`${type}-${num}`] = {\r\n      type: type,\r\n      ...additionalFields\r\n    };\r\n\r\n    onEditorChange(tree, items);\r\n  });\r\n}\r\n\r\nexport function changeDragState(tree, value) {\r\n  tree.set(\"drag\", value);\r\n}\r\n\r\nexport function setItemToFocus(tree, item) {\r\n  tree.set([\"focus\", \"item\"], item);\r\n}\r\n\r\nexport function setSelected(tree, item) {\r\n  const cat = tree.get([\"focus\", \"cat\"]);\r\n  tree.set([\"selected\"], `${cat}:${item}`);\r\n}\r\n\r\nexport function removeItem(tree, field) {\r\n  const focus = tree.get([\"focus\"]);\r\n  const library = focus.lib;\r\n  const category = focus.cat;\r\n\r\n  get(\"/removeFromScheme\", { library, category, field }).then(res => {\r\n    tree.set(\"items\", res.data);\r\n    generate(tree, { items: res.data, amount: 1 });\r\n  });\r\n}\r\n","import React, { useEffect, Fragment } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport * as access from \"../plugins/access\";\r\nimport styled from \"styled-components\";\r\n\r\nimport Column from \"../plugins/Layouts/Column\";\r\nimport SearchBar from \"../plugins/menuPanel/SearchBar\";\r\nimport ListItem from \"../plugins/menuPanel/ListItem\";\r\nimport AddRow from \"../plugins/menuPanel/AddRow\";\r\nimport BottomBarMenu from \"../plugins/menuPanel/BottomBarMenu\";\r\n\r\nimport * as libsActions from \"../tree/actions/libs\";\r\nimport * as catsActions from \"../tree/actions/cats\";\r\nimport * as itemsActions from \"../tree/actions/items\";\r\n\r\nimport { getLibraryPack } from \"../plugins/canvases/utils/packUtils\";\r\nimport { get } from \"../plugins/requests\";\r\n\r\nconst CollapseColumn = styled(Column)`\r\n  min-width: 50px;\r\n  transition: flex ${access.time(\"schemePanel.collapse\")}ms;\r\n  overflow-x: hidden;\r\n`;\r\n\r\nfunction LeftPanel({ viewKey }) {\r\n  const { libs, dispatch } = useBranch({ libs: [\"libs\"] });\r\n  const { projectName } = useBranch({ projectName: [\"projectName\"] });\r\n  const { cats } = useBranch({ cats: [\"cats\"] });\r\n  const { items } = useBranch({ items: [\"items\"] });\r\n  const { focus } = useBranch({ focus: [\"focus\"] });\r\n  const { collapse } = useBranch({ collapse: [\"collapse\"] });\r\n  const libraryPack = getLibraryPack();\r\n\r\n  useEffect(() => {\r\n    get(\"/getAllLibraries\").then(res => {\r\n      dispatch(libsActions.setLibs, res.data);\r\n    });\r\n  }, []);\r\n\r\n  const RenderList = () => {\r\n    let listOf = !focus.lib ? \"libs\" : \"cats\";\r\n    if (focus.lib) {\r\n      listOf = !focus.cat ? \"cats\" : \"items\";\r\n    }\r\n\r\n    const handleClickOnLib = label => {\r\n      dispatch(libsActions.getCategoriesFromLibrary, label);\r\n      libraryPack.onLibrarySelected(label);\r\n    };\r\n\r\n    const handleClickOnCat = label => {\r\n      dispatch(catsActions.getItemsFromCategory, label);\r\n      libraryPack.onCategorySelected(focus.lib, label);\r\n      dispatch(catsActions.setKey, { newKey: \"showScheme\", schemeName: label });\r\n    };\r\n\r\n    const handleClickOnItem = label => {\r\n      dispatch(itemsActions.setSelected, label);\r\n    };\r\n\r\n    const handleRemoveLib = label => {\r\n      dispatch(libsActions.removeLib, label);\r\n      libraryPack.onRemoveLibrary(label);\r\n    };\r\n\r\n    const handleRemoveCat = label => {\r\n      dispatch(catsActions.removeCategory, label);\r\n      libraryPack.onRemoveCategory(focus.lib, label);\r\n    };\r\n\r\n    const handleRemoveItem = label => {\r\n      dispatch(itemsActions.removeItem, label);\r\n      libraryPack.onRemoveItem(focus.lib, focus.cat, label);\r\n    };\r\n\r\n    const handleEditLib = label => {};\r\n\r\n    const handleEditCat = label => {};\r\n\r\n    switch (listOf) {\r\n      case \"libs\":\r\n        return libs.map(label => (\r\n          <ListItem\r\n            key={label}\r\n            label={label}\r\n            handleRowClick={handleClickOnLib}\r\n            handleRemove={handleRemoveLib}\r\n            handleEdit={handleEditLib}\r\n          />\r\n        ));\r\n      case \"cats\":\r\n        return cats.map(label => (\r\n          <ListItem\r\n            key={label}\r\n            parent={focus.lib}\r\n            label={label}\r\n            handleRowClick={handleClickOnCat}\r\n            handleRemove={handleRemoveCat}\r\n            handleEdit={handleEditCat}\r\n          />\r\n        ));\r\n      case \"items\":\r\n        return Object.keys(items).map(label => (\r\n          <ListItem\r\n            key={label}\r\n            parent={focus.cat}\r\n            label={label}\r\n            handleRowClick={handleClickOnItem}\r\n            handleRemove={handleRemoveItem}\r\n          />\r\n        ));\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const RenderAddRow = () => {\r\n    let addTo = !focus.lib ? \"libs\" : \"cats\";\r\n    if (focus.lib) {\r\n      addTo = !focus.cat ? \"cats\" : \"items\";\r\n    }\r\n\r\n    const handleAddLib = value => {\r\n      value = value.trim();\r\n      dispatch(libsActions.addLib, value);\r\n      libraryPack.onAddLibrary(value);\r\n    };\r\n\r\n    const handleAddCat = value => {\r\n      value = value.trim();\r\n      dispatch(catsActions.addCategory, value);\r\n      libraryPack.onAddCategory(focus.lib, value);\r\n    };\r\n\r\n    //TODO: add item\r\n    const handleAddItem = value => {\r\n      value = value.trim();\r\n    };\r\n\r\n    switch (addTo) {\r\n      case \"libs\":\r\n        return (\r\n          <AddRow\r\n            label={access.translate(\"Add Library\")}\r\n            handleAdd={handleAddLib}\r\n          />\r\n        );\r\n      case \"cats\":\r\n        return (\r\n          <AddRow\r\n            label={access.translate(\"Add Category\")}\r\n            handleAdd={handleAddCat}\r\n          />\r\n        );\r\n      case \"items\":\r\n        return (\r\n          <AddRow\r\n            label={access.translate(\"Add Field\")}\r\n            handleAdd={handleAddItem}\r\n          />\r\n        );\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    const { lib, cat } = focus;\r\n    if (cat) {\r\n      dispatch(catsActions.setCatToFocus, null);\r\n      libraryPack.onBack(lib);\r\n    } else if (lib) {\r\n      dispatch(libsActions.setLibToFocus, null);\r\n      libraryPack.onBack();\r\n    }\r\n  };\r\n\r\n  const getLabel = () => {\r\n    const { lib, cat } = focus;\r\n    if (lib && cat) return `${lib} - ${cat}`;\r\n    if (lib) return lib;\r\n    return projectName;\r\n  };\r\n\r\n  const getFlex = () => {\r\n    if (collapse) {\r\n      return access.dim(\"flexCollapse.leftPanel\");\r\n    }\r\n\r\n    return access.dim(\"flexViews.leftPanel\");\r\n  };\r\n\r\n  const zIndex = access.dim(\"zIndexViews.leftPanel\");\r\n  const flex = getFlex();\r\n  const label = getLabel();\r\n\r\n  const renderContent = () => {\r\n    if (collapse) {\r\n      return (\r\n        <Fragment>\r\n          <CollapseColumn flex={1} background={access.color(\"bottomBar.bg\")} >\r\n          </CollapseColumn>\r\n        </Fragment>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Fragment>\r\n        <RenderAddRow />\r\n        <Column flex={1}>\r\n          <RenderList />\r\n        </Column>\r\n      </Fragment>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <CollapseColumn flex={flex} zIndex={zIndex} background={access.color(\"menuPanel.bg\")}>\r\n      <SearchBar label={label} nested={focus.lib} onBack={handleBack} />\r\n      {renderContent()}\r\n      <BottomBarMenu viewKey={viewKey} />\r\n    </CollapseColumn>\r\n  );\r\n}\r\n\r\nexport default LeftPanel;\r\n","import styled from 'styled-components';\n\nconst Center = styled.div`   \n  display: flex;\n  flex: 1;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  overflow: ${props => props.overflow || 'auto'};\n`\n\nexport default Center;","import React, { useState } from \"react\";\r\nimport AceEditor from \"react-ace\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport \"ace-builds/src-noconflict/mode-json\";\r\nimport \"ace-builds/src-noconflict/theme-monokai\";\r\nimport \"ace-builds/src-noconflict/theme-xcode\";\r\n\r\nimport { onEditorChange } from \"../../tree/actions/items\";\r\n\r\nfunction Editor({ width, isData }) {\r\n  const { items, dispatch } = useBranch({ items: [\"items\"] });\r\n  const { mockData } = useBranch({ mockData: [\"mockData\"] });\r\n  const [initCode, setInitCode] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n\r\n  const data = isData ? mockData : items;\r\n  const codeFromProps = JSON.stringify(data, null, 2);\r\n\r\n  if (data !== null && codeFromProps !== initCode) {\r\n    setInitCode(codeFromProps);\r\n    setCode(codeFromProps);\r\n  }\r\n\r\n  const updateScheme = newCode => {\r\n    try {\r\n      newCode = JSON.parse(newCode);\r\n      dispatch(onEditorChange, newCode);\r\n    } catch (error) {\r\n      dispatch((tree) => {\r\n        tree.set(\"mockData\", null);\r\n      })\r\n    }\r\n  };\r\n\r\n  const onLoad = () => {};\r\n\r\n  const onChange = c => {\r\n    setCode(c);\r\n    if (!isData) {\r\n      updateScheme(c);\r\n    }\r\n  };\r\n\r\n  const options = {\r\n    enableBasicAutocompletion: true,\r\n    enableLiveAutocompletion: false,\r\n    enableSnippets: false,\r\n    showLineNumbers: true,\r\n    tabSize: 2\r\n  };\r\n\r\n  const style = {\r\n    height: \"100%\",\r\n    width: width\r\n  };\r\n\r\n  return (\r\n    <AceEditor\r\n      style={style}\r\n      placeholder=\"Placeholder Text\"\r\n      mode=\"json\"\r\n      theme=\"xcode\"\r\n      name=\"editor\"\r\n      onLoad={onLoad}\r\n      onChange={onChange}\r\n      fontSize={14}\r\n      showPrintMargin={true}\r\n      showGutter={true}\r\n      highlightActiveLine={true}\r\n      value={code}\r\n      setOptions={options}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Editor;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport styled from \"styled-components\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport { SpaceAround } from \"../Layouts/Spaces\";\r\n\r\nimport { Tab, Tabs } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport * as access from \"../access\";\r\n\r\nconst SwitchButtonCont = styled(SpaceAround)`\r\nmargin-right: 5px;\r\n  &:before {\r\n    content: \"\";\r\n    height: 35px;\r\n    margin-right: 5px;\r\n    border-left: solid 1px ${access.color(\"schemePanel.divider\")};\r\n  }\r\n`;\r\n\r\nconst useStyles = makeStyles(props => ({\r\n  selectedBtn: {\r\n    color: access.color(\"schemePanel.selected\"),\r\n    fontSize: 11\r\n  },\r\n  btn: {\r\n    color: access.color(\"schemePanel.notSelected\"),\r\n    fontSize: 11,\r\n  },\r\n  indicator: {\r\n    backgroundColor: access.color(\"schemePanel.selected\"),\r\n  }\r\n}));\r\n\r\nfunction SwitchEditorBtn({ onSwitch, value }) {\r\n  const { mockData } = useBranch({ mockData: [\"mockData\"] });\r\n\r\n\r\n  const handleChange = (e, v) => {\r\n    onSwitch(v);\r\n  };\r\n\r\n  const CodeSelected = value === \"code\";\r\n  const disabled = !mockData;\r\n  const classes = useStyles();\r\n  const codeClass = CodeSelected ? classes.selectedBtn : classes.btn;\r\n  const schemeClass = !CodeSelected ? classes.selectedBtn : classes.btn;\r\n\r\n  return (\r\n    <SwitchButtonCont width={\"fit-content\"}>\r\n      <Tabs value={value} onChange={handleChange} classes={{indicator: classes.indicator}}>\r\n        <Tab\r\n          classes={{ root: schemeClass }}\r\n          label={access.translate(\"Scheme\")}\r\n          value={\"scheme\"}\r\n        />\r\n        <Tab\r\n          classes={{ root: codeClass }}\r\n          label={access.translate(\"Generate\")}\r\n          value={\"code\"}\r\n          disabled={disabled}\r\n        />\r\n      </Tabs>\r\n    </SwitchButtonCont>\r\n  );\r\n}\r\n\r\nSwitchEditorBtn.defaultProps = {\r\n  onSwitch: 1,\r\n  value: \"100%\"\r\n};\r\n\r\nSwitchEditorBtn.propTypes = {\r\n  onSwitch: PropTypes.func.isRequired,\r\n  value: PropTypes.oneOf([\"code\", \"scheme\"]).isRequired\r\n};\r\n\r\nexport default SwitchEditorBtn;\r\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nfunction Composer({ createElement, children }) {\n  const mapChildren = children => {\n    return React.Children.map(children, child => {\n\n      if (child.type.isDecorator) {\n        return React.cloneElement(child, {}, mapChildren(child.props.children));\n      }\n      return createElement(child);\n    });\n  };\n\n  return mapChildren(children);\n}\n\nComposer.propsTypes = {\n  createElement: PropTypes.func.isRequired\n};\n\nexport default Composer;\n","import React from \"react\";\nimport PropTypes from 'prop-types'\n\nimport Composer from \"./Composer\";\n\n\nfunction FileDownloader({content, fileName, fileExtension, disabled, children, onClick, ...rest}) {\n\n    const saveFile = (e) => {\n        if (e) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    \n        let parsed = JSON.stringify(content, null, 4);\n        let blob = new Blob([parsed], { type: 'octet/stream' });\n    \n        let url = window.URL.createObjectURL(blob);\n        let a = document.createElement('a');\n        \n        document.body.appendChild(a);\n        \n        a.href = url;\n        a.download = fileName+'.'+fileExtension;\n    \n        setTimeout(() => {\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n        }, 100);\n    };\n\n    const createElement = (child) => {\n     \n        const click = (e) => {\n            if (onClick) {\n                if (disabled) return onClick(e);\n                else {\n                    saveFile(e);\n                    return onClick(e);\n                }\n            } else {\n                return (disabled) ? null : saveFile(e);\n            }\n        }\n\n        return React.cloneElement(child, { onClick: click, ...rest });\n    };\n    \n    \n    return (\n        <Composer createElement={createElement}>\n            {children}\n        </Composer>\n    );\n    \n}\n\nFileDownloader.propsTypes = {\n    content: PropTypes.object.isRequired,\n    fileExtension: PropTypes.string.isRequired,\n    fileName: PropTypes.string,\n    disabled: PropTypes.bool\n}\n\nFileDownloader.defaultProps = {\n    disabled: false,\n    fileName: 'file'\n}\n\nFileDownloader.isDecorator=true;\n\nexport default FileDownloader;\n\n\n        \n    \n\n","import React from \"react\";\nimport PropTypes from 'prop-types'\n\nimport Composer from \"./Composer\";\n\n\nfunction CopyToClipBoard({content, disabled, children, onClick, ...rest}) {\n\n    const copyToClipboard = textToCopy => {\n        try {\n          textToCopy = JSON.stringify(textToCopy, null, 2);\n        } catch (error) {\n          textToCopy = \"unable to stringify data\";\n        }\n    \n        if (navigator.clipboard) {\n          navigator.clipboard.writeText(textToCopy);\n        } else {\n          const el = document.createElement(\"textarea\");\n          el.value = textToCopy;\n          el.style.display = \"none\";\n          document.body.appendChild(el);\n          el.select();\n          document.execCommand(\"copy\");\n          document.body.removeChild(el);\n        }\n      };\n\n    const createElement = (child) => {\n     \n        const click = (e) => {\n            if (onClick) {\n                if (disabled) return onClick(e);\n                else {\n                    copyToClipboard(content);\n                    return onClick(e);\n                }\n            } else {\n                return (disabled) ? null : copyToClipboard(content);\n            }\n        }\n\n        return React.cloneElement(child, { onClick: click, ...rest });\n    };\n    \n    \n    return (\n        <Composer createElement={createElement}>\n            {children}\n        </Composer>\n    );\n    \n}\n\nCopyToClipBoard.propsTypes = {\n    content: PropTypes.object.isRequired,\n    disabled: PropTypes.bool\n}\n\nCopyToClipBoard.defaultProps = {\n    disabled: false\n}\n\nCopyToClipBoard.isDecorator=true;\n\nexport default CopyToClipBoard;\n\n\n        \n    \n\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport * as access from \"../access\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Row from \"../Layouts/Row\";\r\nimport FileDownloader from \"../tools/FileDownloader\";\r\nimport CopyToClipBoard from \"../tools/CopyToClipBoard\";\r\n\r\nimport { Icon, IconButton } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst ButtonsCont = styled(Row)`\r\n  padding-left: 10px;\r\n`;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  button: {\r\n    color: access.color(\"bottomBar.fg\"),\r\n    padding: 10\r\n  },\r\n  copy: {\r\n    fontSize: 18\r\n  }\r\n}));\r\n\r\nfunction BarButtons({ content, filename }) {\r\n  const classes = useStyles();\r\n\r\n  const CopyButton = () => {\r\n    return (\r\n      <CopyToClipBoard content={content}>\r\n        <IconButton size=\"small\" className={classes.button}>\r\n          <Icon className={classes.copy}>\r\n            {access.icon(\"schemePanel.copy\")}\r\n          </Icon>\r\n        </IconButton>\r\n      </CopyToClipBoard>\r\n    );\r\n  };\r\n\r\n  const DownloadButton = () => {\r\n    return (\r\n      <FileDownloader\r\n        content={content}\r\n        fileName={filename}\r\n        fileExtension={\"json\"}\r\n      >\r\n        <IconButton size=\"small\" className={classes.button}>\r\n          <Icon className={classes.copy}>\r\n            {access.icon(\"schemePanel.download\")}\r\n          </Icon>\r\n        </IconButton>\r\n      </FileDownloader>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ButtonsCont>\r\n      <CopyButton />\r\n      <DownloadButton />\r\n    </ButtonsCont>\r\n  );\r\n}\r\n\r\nCopyToClipBoard.propsTypes = {\r\n  content: PropTypes.object.isRequired,\r\n  filename: PropTypes.string\r\n};\r\n\r\nCopyToClipBoard.defaultProps = {\r\n  filename: \"file\"\r\n};\r\n\r\nexport default BarButtons;\r\n","import React, { useState } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport { generate } from \"../../tree/actions/items\";\r\nimport * as access from \"../access\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Row from \"../Layouts/Row\";\r\nimport BarButtons from \"./BarButtons\";\r\n\r\nimport { Icon, IconButton } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst BottomBar = styled(Row)`\r\n  justify-content: flex-end;\r\n  border-right: 1px solid ${access.color(\"schemePanel.border\")};\r\n`;\r\n\r\nconst AmountInput = styled(\"input\")`\r\n  width: 60px;\r\n  margin-left: 25px;\r\n  padding: 0px 5px;\r\n  text-align: center;\r\n  outline-color: ${access.color(\"bottomBar.outline\")}\r\n  font-weight: 600;\r\n`;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  play: {\r\n    color: access.color(\"bottomBar.fg\"),\r\n    marginRight: 10,\r\n    marginLeft: 10,\r\n    padding: 6\r\n  }\r\n}));\r\n\r\nfunction BottomBarGen(params) {\r\n  const classes = useStyles();\r\n  const { mockData, dispatch } = useBranch({ mockData: [\"mockData\"] });\r\n  const { items } = useBranch({ items: [\"items\"] });\r\n  const { focus } = useBranch({ focus: [\"focus\"] });\r\n  const [amount, setAmount] = useState(1);\r\n  const fileName = `${focus.lib}_${focus.cat}`;\r\n\r\n  const gen = () => {\r\n    dispatch(generate, { items, amount });\r\n  };\r\n\r\n  const PlayButton = () => {\r\n    return (\r\n      <IconButton className={classes.play} size=\"small\" onClick={gen}>\r\n        <Icon>{access.icon(\"schemePanel.play\")}</Icon>\r\n      </IconButton>\r\n    );\r\n  };\r\n\r\n  const RenderAmountInput = () => {\r\n    const handleSetAmount = e => {\r\n      let value = e.target.value;\r\n\r\n      value = value < 1 ? 1 : value;\r\n      value = value > 10000 ? 10000 : value;\r\n\r\n      setAmount(value);\r\n    };\r\n\r\n    return (\r\n      <AmountInput\r\n        type={\"number\"}\r\n        value={amount}\r\n        onChange={handleSetAmount}\r\n        autoFocus={true}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <BottomBar background={access.color(\"bottomBar.bg\")}>\r\n      <BarButtons content={mockData} filename={fileName} />\r\n      <RenderAmountInput />\r\n      <PlayButton />\r\n    </BottomBar>\r\n  );\r\n}\r\n\r\nexport default BottomBarGen;\r\n","import React from \"react\";\r\n\r\nimport * as access from \"../access\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Row from \"../Layouts/Row\";\r\nimport BarButtons from \"./BarButtons\";\r\n\r\nconst BottomBar = styled(Row)`\r\n  border-right: 1px solid ${access.color(\"schemePanel.border\")}\r\n`;\r\n\r\nfunction BottomBarScheme(params) {\r\n  const { items } = useBranch({ items: [\"items\"] });\r\n  const { focus } = useBranch({ focus: [\"focus\"] });\r\n  const fileName = `${focus.lib}_${focus.cat}_scheme`;\r\n\r\n  return (\r\n    <BottomBar background={access.color(\"bottomBar.bg\")}>\r\n      <BarButtons content={items} filename={fileName} />\r\n    </BottomBar>\r\n  );\r\n}\r\n\r\nexport default BottomBarScheme;\r\n","import React, { useState } from \"react\";\r\nimport * as access from \"../access\";\r\nimport styled from \"styled-components\";\r\n\r\n\r\nimport Center from \"../Layouts/Center\";\r\nimport Label from \"../tools/Label\";\r\nimport Mask from \"../tools/Mask\";\r\n\r\nconst RoundWrapper = styled('div')`\r\n  width: ${p => !p.open ? '0px' : '285px'};\r\n  height: ${p => !p.open ? '0px' : '285px'};\r\n  overflow: hidden;\r\n  background: ${access.color(\"backgrounds.primary\")};\r\n  color: ${access.color(\"texts.primary\")};\r\n  border-radius: 50%;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n  transition: all 250ms;\r\n`;\r\n\r\nfunction DragMask({ text }) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOnMouseEnter = e => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleOnMouseLeave = e => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const renderAdd = () => {\r\n    return (\r\n      <Center>\r\n        <RoundWrapper open={open}>\r\n          <Label fontSize={\"30px\"} weight={700} style={{maxWidth:'250px'}}>\r\n            {text}\r\n          </Label>\r\n        </RoundWrapper>\r\n      </Center>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Mask\r\n      opacity={0.8}\r\n      mask={access.color(\"schemePanel.bg\")}\r\n      onMouseEnter={handleOnMouseEnter}\r\n      onMouseLeave={handleOnMouseLeave}\r\n      style={{ transition: `background 250ms` }}\r\n    >\r\n      {renderAdd()}\r\n    </Mask>\r\n  );\r\n}\r\n\r\nexport default DragMask;\r\n","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport { v4 } from 'node-uuid';\n\nexport default class Start extends Component {\n  constructor(props) {\n    super(props);\n\n    this.width = 0;\n    this.height = 0;\n    this.measure = this.measure.bind(this);\n    this.createCanvas = this.createCanvas.bind(this);\n  }\n\n  componentDidMount() {\n    this.measure();\n    const canvas = this.createCanvas();\n    this.do(canvas);\n  }\n\n  do(canvas) {\n    const { margin } = this.props;\n    const width = this.width - (margin.left + margin.right);\n    const height = this.height - (margin.top + margin.bottom);\n\n    return this.props.canvasReady(canvas, width, height);\n  }\n\n  createCanvas() {\n    const { margin } = this.props;\n\n    const canvas = d3\n      .select(`#${this.id}`)\n      .append('svg')\n      .attr('width', this.width)\n      .attr('height', this.height)\n      .append('g')\n      .attr('transform', `translate(${margin.left},${margin.top})`);\n\n    return canvas;\n  }\n\n  measure() {\n    const cont = document.getElementById(this.id);\n    const Bounding = cont.getBoundingClientRect();\n\n    this.width = Bounding.width;\n    this.height = Bounding.height;\n  }\n\n  render() {\n    this.id = 'cont' + v4();\n\n    return <div id={this.id} style={{ height: '100%', width: '100%' }} />;\n  }\n}\n\nStart.defaultProps = {\n  margin: {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n  }\n};\n","import * as d3 from \"d3\";\r\n\r\nlet prevMousePlace = null;\r\n\r\nexport const move = (canvas, board, color) => {\r\n  const line = d3\r\n    .line()\r\n    .x(d => d.x)\r\n    .y(d => d.y)\r\n    .curve(d3.curveBasis);\r\n\r\n  board.on(\"mouseout\", () => {\r\n    prevMousePlace = null;\r\n  });\r\n\r\n  board.on(\"mousemove\", (d, i) => {\r\n    const mousePlace = {\r\n      x: d3.event.offsetX - 1,\r\n      y: d3.event.offsetY - 1\r\n    };\r\n\r\n    if (!prevMousePlace) {\r\n      prevMousePlace = mousePlace;\r\n      return;\r\n    }\r\n\r\n    const data = [prevMousePlace, mousePlace];\r\n\r\n    prevMousePlace = mousePlace;\r\n\r\n    canvas\r\n      .append(\"path\")\r\n      .attr(\"d\", line(data))\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke\", color)\r\n      .attr(\"stroke-width\", 2)\r\n      .transition()\r\n      .duration(450)\r\n      .attr(\"stroke-width\", 0)\r\n      .ease(t => d3.easeBounceOut(t))\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n  });\r\n};\r\n\r\nexport const dropCircles = (canvas, height, board, color) => {\r\n  board.on(\"mousemove\", (d, i) => {\r\n    const mousePlace = {\r\n      x: d3.event.offsetX,\r\n      y: d3.event.offsetY\r\n    };\r\n\r\n    canvas\r\n      .append(\"circle\")\r\n      .attr(\"cx\", mousePlace.x - 1)\r\n      .attr(\"cy\", mousePlace.y - 1)\r\n      .attr(\"r\", 1)\r\n      .attr(\"fill\", color)\r\n      .transition()\r\n      .duration(2000)\r\n      .attr(\"cy\", height)\r\n      .ease(t => d3.easeCircleIn(t))\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n  });\r\n};\r\n\r\nexport const ripple = (canvas, board, color = \"white\") => {\r\n  board.on(\"click\", (d, i) => {\r\n    const mousePlace = {\r\n      x: d3.event.offsetX,\r\n      y: d3.event.offsetY\r\n    };\r\n\r\n    const circle = canvas\r\n      .append(\"circle\")\r\n      .attr(\"cx\", mousePlace.x)\r\n      .attr(\"cy\", mousePlace.y)\r\n      .attr(\"r\", 1)\r\n      .attr(\"fill\", color)\r\n      .attr(\"fill-opacity\", 0.3);\r\n\r\n    ripple(canvas, circle, color);\r\n\r\n    circle\r\n      .transition()\r\n      .duration(500)\r\n      .attr(\"r\", 70)\r\n      .attr(\"fill-opacity\", 0)\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n  });\r\n};\r\n","import React, { useState } from \"react\";\r\nimport Start from \"../tools/Start\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\nimport * as access from \"../access\";\r\n\r\nimport { dropCircles } from \"./utils/canvasActions\";\r\n\r\nimport \"./style.css\";\r\n\r\nfunction OpenPanelCanvas() {\r\n    const { viewKey } = useBranch({ viewKey: [\"viewKey\"] });\r\n    const [close, setclose] = useState(false);\r\n\r\n    if(close) return null;\r\n\r\n    if(viewKey !== \"initKey\"){\r\n        setTimeout(() => {\r\n            setclose(true);\r\n        }, access.time('schemePanel.removeCanvas'));\r\n    }\r\n\r\n    const createFrame = (canvas, width, height) => {\r\n        const frame = canvas\r\n          .append(\"rect\")\r\n          .attr(\"width\", width)\r\n          .attr(\"height\", height)\r\n          .attr(\"fill\", access.color(\"canvases.fg\"))\r\n\r\n\r\n        frame.transition()\r\n          .duration(access.time('schemePanel.removeCanvas'))          \r\n          .attr(\"fill\", \"transparent\");\r\n\r\n    \r\n        return frame;\r\n      };\r\n \r\n\r\n  const onCanvasReady = (canvas, width, height) => {\r\n    const frame = createFrame(canvas, width, height);\r\n    dropCircles(canvas, height, frame, access.color(\"canvases.fg\"));    \r\n  };\r\n\r\n  const renderStart = () => {\r\n    const margin = {\r\n      top: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0\r\n    };\r\n\r\n    return <Start canvasReady={onCanvasReady} margin={margin} />;\r\n  };\r\n\r\n  return (\r\n    <div style={{ height:'100vh', width: '100vw', overflow: 'hidden'}}>\r\n      {renderStart()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OpenPanelCanvas;\r\n","import React, { useState, useRef } from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport * as access from \"../plugins/access\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Row from \"../plugins/Layouts/Row\";\r\nimport Column from \"../plugins/Layouts/Column\";\r\nimport Center from \"../plugins/Layouts/Center\";\r\nimport Label from \"../plugins/tools/Label\";\r\nimport Editor from \"../plugins/editor/Editor\";\r\nimport SwitchEditorBtn from \"../plugins/schemePanel/SwitchEditorBtn\";\r\nimport BottomBarGen from \"../plugins/schemePanel/BottomBarGen\";\r\nimport BottomBarScheme from \"../plugins/schemePanel/BottomBarScheme\";\r\nimport DragMask from \"../plugins/schemePanel/DragMask\";\r\nimport OpenPanelCanvas from \"../plugins/canvases/OpenPanelCanvas\";\r\n\r\nconst Placeholder = styled('div')`\r\n  flex:1\r\n`\r\n\r\nconst Srow = styled(Row)`\r\n  flex: ${props => props.flex};\r\n  transition: flex ${access.time(\"schemePanel.collapse\")}ms;\r\n`;\r\n\r\nconst TopBar = styled(Row)`\r\n  justify-content: space-between;\r\n  border-right: 1px solid ${access.color(\"schemePanel.border\")}\r\n`;\r\n\r\nconst InnerColumn = styled(Column)`\r\n  min-width: 0;\r\n  transition: flex ${access.time(\"schemePanel.transition\")}ms;\r\n  border-right: 1px solid ${access.color(\"schemePanel.border\")}\r\n  overflow: hidden;\r\n  box-shadow: unset;\r\n`;\r\n\r\nfunction SchemePanel() {\r\n\r\n  const { viewKey } = useBranch({ viewKey: [\"viewKey\"] });\r\n  const { dragState } = useBranch({ dragState: [\"drag\"] });\r\n  const { collapse } = useBranch({ collapse: [\"collapse\"] });\r\n  const { selectedCategory } = useBranch({\r\n    selectedCategory: [\"selectedCategory\"]\r\n  });\r\n\r\n  const editorWrapper = useRef();\r\n  const [editorWidth, setEditorWidth] = useState(0);\r\n  const [editorToRender, setEditorToRender] = useState(\"scheme\");\r\n\r\n  const handleSwitchEditor = v => {\r\n    setEditorToRender(v);\r\n  };\r\n\r\n  const openPanelCanvas = () => {\r\n    if (viewKey === \"initKey\") return null;\r\n\r\n    return <OpenPanelCanvas />;\r\n  };\r\n\r\n  const dragCanvas = () => {\r\n    if (!dragState) return null;\r\n\r\n    return <DragMask text={dragState} />;\r\n  };\r\n\r\n  const renderEditor = () => {\r\n    const isData = editorToRender === \"code\" ? true : false;\r\n\r\n    if (viewKey === \"initKey\") {\r\n      return null;\r\n    } else if(collapse || editorWidth !== 0){\r\n      setTimeout(() => {\r\n        if (editorWrapper.current) {\r\n          setEditorWidth(editorWrapper.current.getBoundingClientRect().width);\r\n        }\r\n      }, 600);\r\n    } else {\r\n      setTimeout(() => {\r\n        if (editorWrapper.current) {\r\n          setEditorWidth(editorWrapper.current.getBoundingClientRect().width);\r\n        }\r\n      }, access.time(\"schemePanel.showEditor\"));\r\n    }\r\n\r\n    if (editorWidth === 0) return <Placeholder/>;\r\n    const width = editorWidth;\r\n\r\n    return <Editor isData={isData} width={width} />;\r\n  };\r\n\r\n  const RenderActionBar = () => {\r\n    return (\r\n      <TopBar background={access.color(\"searchBar.bg\")}>\r\n        <Center style={{ minWidth: 50 }} overflow={\"hidden\"}>\r\n          <Label color={access.color(\"searchBar.fg\")}>{selectedCategory}</Label>\r\n        </Center>\r\n        <SwitchEditorBtn\r\n          onSwitch={handleSwitchEditor}\r\n          value={editorToRender}\r\n        />\r\n      </TopBar>\r\n    );\r\n  };\r\n\r\n  const RenderBottomBar = () => {\r\n    if (editorToRender === \"scheme\") {\r\n      return <BottomBarScheme />;\r\n    }\r\n\r\n    return <BottomBarGen />;\r\n  };\r\n\r\n  const getFlex = () => {\r\n    if (viewKey !== \"initKey\"){\r\n\r\n      if(collapse){\r\n        return access.dim(\"flexCollapse.schemePanel\");\r\n      }\r\n\r\n      return access.dim(\"flexViews.schemePanel\");\r\n    } \r\n    return 0;\r\n  };\r\n\r\n  const getInnerFlex = () => {\r\n    if (viewKey !== \"initKey\") return 1;\r\n    return 0;\r\n  };\r\n\r\n  const flex = getFlex();\r\n  const InnerFlex = getInnerFlex();\r\n\r\n  const zIndex = access.dim(\"zIndexViews.schemePanel\");\r\n\r\n  return (\r\n    <Srow\r\n      ref={editorWrapper}\r\n      flex={flex}\r\n      zIndex={zIndex}\r\n      background={access.color(\"canvases.bg\")}\r\n      height={\"100%\"}\r\n      shadowColor={\"none\"}\r\n    >\r\n      <InnerColumn flex={InnerFlex} background={access.color(\"schemePanel.bg\")}>\r\n        <RenderActionBar />\r\n        {openPanelCanvas()}\r\n        {renderEditor()}\r\n        {dragCanvas()}\r\n        <RenderBottomBar />\r\n      </InnerColumn>\r\n    </Srow>\r\n  );\r\n}\r\n\r\nexport default SchemePanel;\r\n","import * as d3 from \"d3\";\r\nimport { isEmpty, get } from \"lodash\";\r\nimport * as access from \"../../access\";\r\n\r\nimport { move } from \"../utils/canvasActions\";\r\n\r\nexport default class Pack {\r\n  constructor(params) {\r\n\r\n    this.circlePadding = get(params,'circlePadding',30);\r\n    this.margin = get(params,'margin',45);\r\n    this.marginBottom = get(params,'marginBottom',10);\r\n    this.showMainCircle = get(params,'showMainCircle',true);\r\n    this.limitByLevel = get(params,'limitByLevel',10);\r\n\r\n    this.moveOnCircleColor = get(params,'moveOnCircleColor',access.color(\"canvases.moveOnCircle\"));\r\n    this.moveOnTextColor = get(params,'moveOnTextColor',access.color(\"canvases.moveOnText\"));\r\n\r\n    this.getTranslate = this.getTranslate.bind(this);\r\n    this.createPack = this.createPack.bind(this);\r\n    this.normalizeData = this.normalizeData.bind(this);\r\n\r\n    this.firstLevelClick = () => {};\r\n    this.secondLevelClick = () => {};\r\n    this.thirdLevelClick = () => {};\r\n    this.onClick = () => {};\r\n\r\n    this.clickIsBlock = false;\r\n    this.packDomain = 0;\r\n    this.colorScaleRange = [\r\n      access.color(\"canvases.packBgStart\"),\r\n      access.color(\"canvases.packBgEnd\")\r\n    ];\r\n\r\n    this.textClasses = {\r\n      in: \"light-text\",\r\n      out: \"text\"\r\n    }\r\n\r\n    this.init(params);\r\n  }\r\n\r\n  init(params){\r\n    this.canvas = params.canvas;\r\n    this.width = params.width;\r\n    this.height = params.height;\r\n    this.mainGroup = this.canvas.append(\"g\").attr(\"class\", \"pack\");\r\n  }\r\n\r\n  initWithData(data,projectName){\r\n    this.mainData = this.normalizeData(data,null,projectName);\r\n    this.createPack(this.mainData,true);\r\n  }\r\n\r\n  normalizeData(data, newData,projectName = \"Project\") {\r\n    if (!newData)\r\n      newData = {\r\n        name: projectName,\r\n        value: 1,\r\n        children: [],\r\n        id: projectName,\r\n        level: 0\r\n      };\r\n\r\n    if (typeof data == \"string\" || typeof data == \"number\") {\r\n      newData.value = 1;\r\n      newData.name = `${newData.name}: ${data}`;\r\n      delete newData.children;\r\n      return newData;\r\n    }\r\n\r\n    for (const key in data) {\r\n      const d = {\r\n        name: key,\r\n        nameKey: key,\r\n        value: 1,\r\n        children: [],\r\n        id: `${newData.id}-${key}`,\r\n        level: newData.level + 1\r\n      };\r\n\r\n      if(this.limitByLevel  === newData.level + 1){\r\n        d.name = data[key].name || key;\r\n      }\r\n\r\n      const countBack = this.normalizeData(data[key], d);\r\n\r\n      newData.value += countBack.value;\r\n      newData.children.push(d);\r\n    }\r\n\r\n    return newData;\r\n  }\r\n\r\n  createPack(data, isMainData) {\r\n    const { width, height, margin, circlePadding, showMainCircle, limitByLevel } = this;\r\n    const size = [width, height - margin];\r\n\r\n    if (isMainData) this.mainData = data;\r\n    this.packDomain = data.value;\r\n\r\n    const packLayout = d3\r\n      .pack()\r\n      .size(size)\r\n      .padding(circlePadding);\r\n\r\n    const treeRoot = d3.hierarchy(data);\r\n    packLayout(treeRoot);\r\n\r\n    let nodes = treeRoot.descendants();\r\n\r\n    nodes = nodes.filter(n => {\r\n      if(n.data.level > limitByLevel) return false;\r\n      if (showMainCircle) return n.depth < 3;\r\n      return n.depth > 0 && n.depth < 3;\r\n    });\r\n\r\n    this.createNodes(nodes);\r\n  }\r\n\r\n  createNodes(nodes) {\r\n    const { moveOnCircleColor, moveOnTextColor, canvas, mainGroup } = this;\r\n\r\n    this.paintCircles(nodes);\r\n    this.paintTexts(nodes);\r\n    const circles = mainGroup.selectAll(\"circle\");\r\n    const texts = mainGroup.selectAll(\"text\");\r\n\r\n    move(canvas, circles, moveOnCircleColor);\r\n    move(canvas, texts, moveOnTextColor);\r\n\r\n    this.handleNodeClick(circles, texts);\r\n    this.handleNodeDrag(circles, texts);\r\n  }\r\n\r\n  handleNodeDrag(circles, texts){\r\n\r\n  }\r\n\r\n  paintCircles(nodes) {\r\n    const { colorScaleRange, packDomain, mainGroup } = this;\r\n\r\n    const colorScale = d3\r\n      .scaleLinear()\r\n      .domain([0, packDomain])\r\n      .range(colorScaleRange);\r\n\r\n    const enterCircles = c => {\r\n      c.enter()\r\n        .append(\"circle\")\r\n        .attr(\"id\", d => `circle-${d.data.id}`)\r\n        .attr(\"r\", 0)\r\n        .attr(\"transform\", this.getTranslate)\r\n        .attr(\"fill-opacity\", 0.5)\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"fill\", d => colorScale(d.data.value))\r\n        .attr(\"transform\", this.getTranslate)\r\n        .attr(\"r\", d => d.r);\r\n    };\r\n\r\n    const exitCircles = c => {\r\n      c.exit()\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"r\", 0)\r\n        .transition()\r\n        .remove();\r\n    };\r\n\r\n    const updateCircles = c => {\r\n      c.transition()\r\n        .duration(2000)\r\n        .attr(\"fill\", d => colorScale(d.data.value))\r\n        .attr(\"transform\", this.getTranslate)\r\n        .attr(\"r\", d => d.r);\r\n    };\r\n\r\n    const circles = mainGroup.selectAll(\"circle\").data(nodes,d=>d.data.id);\r\n\r\n    enterCircles(circles);\r\n    exitCircles(circles);\r\n    updateCircles(circles);\r\n\r\n    return circles;\r\n  }\r\n\r\n  paintTexts(nodes) {\r\n    const { mainGroup, textClasses, limitByLevel } = this;\r\n\r\n    const childrenScope = d => {\r\n      return isEmpty(d.data.children) || d.depth === 2 || d.data.level >= limitByLevel;\r\n    };\r\n\r\n    const adaptText = d => {\r\n      let text = d.data.name;\r\n      let radius = d.r;\r\n      let cutIn = 25;\r\n\r\n      if (childrenScope(d)) {\r\n        cutIn = radius < 80 ? 16 : cutIn;\r\n        cutIn = radius < 70 ? 14 : cutIn;\r\n        cutIn = radius < 40 ? 12 : cutIn;\r\n        cutIn = radius < 35 ? 9 : cutIn;\r\n        cutIn = radius < 30 ? 7 : cutIn;\r\n        cutIn = radius < 20 ? 3 : cutIn;\r\n        cutIn = radius < 14 ? 0 : cutIn;\r\n\r\n        if (text.length <= cutIn) return text;\r\n        return text.substring(0, cutIn) + \"...\";\r\n      }\r\n\r\n      return text;\r\n    };\r\n\r\n    const getFontSize = (d, isChildren) => {\r\n\r\n      if(isChildren){\r\n        \r\n        return(Math.min(Math.max(d.r, 30)/4,36));\r\n      }\r\n\r\n      return(Math.min(d.r, 60)/3);\r\n    };\r\n\r\n    const getTextPosition = d => {\r\n      if (d.depth === 0 && !isEmpty(d.data.children)) return -(d.r + 10);\r\n      return childrenScope(d) ? 0 : -(d.r + 5);\r\n    };\r\n\r\n    const enterTexts = t => {\r\n      t.enter()\r\n        .append(\"text\")\r\n        .attr(\"id\", d => `text-${d.data.id}`)\r\n        .attr(\"transform\", this.getTranslate)\r\n        .attr(\"y\", getTextPosition)\r\n        .attr(\"class\", d => (childrenScope(d) ? textClasses.in : textClasses.out))\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"font-size\", \"0\")\r\n        .text(d => adaptText(d))\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"font-size\", d => getFontSize(d,childrenScope(d)));\r\n    };\r\n\r\n    const exitTexts = t => {\r\n      t.exit()\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"font-size\", 0)\r\n        .transition()\r\n        .remove();\r\n    };\r\n\r\n    const updateTexts = t => {\r\n      t.transition()\r\n        .duration(1000)\r\n        .attr(\"font-size\", 0)\r\n        .transition()\r\n        .duration(10)\r\n        .attr(\"transform\", this.getTranslate)\r\n        .transition()\r\n        .duration(1000)\r\n        .text(d => adaptText(d))\r\n        .attr(\"y\", getTextPosition)\r\n        .attr(\"class\", d => (childrenScope(d) ? textClasses.in : textClasses.out))\r\n        .attr(\"font-size\", d => getFontSize(d,childrenScope(d)));\r\n    };\r\n\r\n    const texts = mainGroup.selectAll(\"text\").data(nodes, d => d.data.id);\r\n\r\n    enterTexts(texts);\r\n    exitTexts(texts);\r\n    updateTexts(texts);\r\n\r\n    return texts;\r\n  }\r\n\r\n  navigateBack(data) {\r\n\r\n  }\r\n\r\n  handleNodeClick(circles, text) {\r\n\r\n    const blockButton = () => {\r\n      this.clickIsBlock = true;\r\n      setTimeout(() => {\r\n        this.clickIsBlock = false;\r\n      }, 1000);\r\n    };\r\n\r\n    const clickAction = n => {\r\n      if (this.clickIsBlock) return;\r\n      if (n.depth === 0) {\r\n        this.navigateBack(n.data);\r\n        return;\r\n      }\r\n      if (n.depth === 2) n = n.parent;\r\n\r\n      switch (n.data.level) {\r\n        case 1:\r\n          this.firstLevelClick(n.data.name);\r\n          break;\r\n        case 2:\r\n          this.secondLevelClick(n.data.name);\r\n          break;\r\n        case 3:\r\n          this.thirdLevelClick(n.data.name);\r\n          break;\r\n\r\n        default:\r\n          this.onClick(n.data.name);\r\n          break;\r\n      }\r\n\r\n      if(n.data.level < this.limitByLevel){\r\n        this._clickAction && this._clickAction();\r\n        this.createPack(n.data);\r\n        blockButton();\r\n      } \r\n    };\r\n\r\n    circles.on(\"click\", n => {\r\n      clickAction(n);\r\n    });\r\n\r\n    text.on(\"click\", n => {\r\n      clickAction(n);\r\n    });\r\n  }\r\n\r\n  getTranslate(d) {\r\n    return `translate(${d.x},${d.y + this.margin - this.marginBottom})`;\r\n  }\r\n\r\n  setLevelClick(level, func) {\r\n    switch (level) {\r\n      case 1:\r\n        this.firstLevelClick = func;\r\n        break;\r\n      case 2:\r\n        this.secondLevelClick = func;\r\n        break;\r\n      case 3:\r\n        this.thirdLevelClick = func;\r\n        break;\r\n\r\n      default:\r\n        this.onClick = func;\r\n        break;\r\n    }\r\n  }\r\n\r\n  scaleDown(){\r\n    this.mainGroup\r\n    .transition()\r\n    .duration(2000)\r\n    .attr(\"transform\", `translate(${this.width/2},${this.height/2}), scale(0)`)\r\n  }\r\n\r\n  scaleUp(){\r\n    this.mainGroup\r\n    .transition()\r\n    .duration(2000)\r\n    .attr(\"transform\", `translate(0,0), scale(1)`)\r\n  }\r\n}\r\n\r\n","import { v4 } from \"node-uuid\";\r\nimport { find, findIndex } from \"lodash\";\r\nimport Pack from \"./Pack\";\r\n\r\nexport default class LibraryPack extends Pack {\r\n\r\n  constructor(params){\r\n    super(params)\r\n\r\n    this.limitByLevel = 3;\r\n  }\r\n\r\n  findLibrary(lib) {\r\n    const library = find(this.mainData.children, c => {\r\n      return c.name === lib;\r\n    });\r\n\r\n    return library;\r\n  }\r\n\r\n  findCategory(lib, cat) {\r\n    const category = find(lib.children, l => {\r\n      return l.name === cat;\r\n    });\r\n\r\n    return category;\r\n  }\r\n\r\n  findItem(category, item) {\r\n    const it = find(category.children, l => {\r\n      return l.name === item;\r\n    });\r\n\r\n    return it;\r\n  }\r\n\r\n  onLibrarySelected(lib) {\r\n    const library = this.findLibrary(lib);\r\n    this.createPack(library);\r\n  }\r\n\r\n  onCategorySelected(lib, cat) {\r\n    const library = this.findLibrary(lib);\r\n    const category = this.findCategory(library, cat);\r\n    this.createPack(category);\r\n  }\r\n\r\n  onItemSelected(lib, cat, it) {\r\n    const library = this.findLibrary(lib);\r\n    const category = this.findCategory(library, cat);\r\n    const item = this.findItem(category, it);\r\n    this.createPack(item);\r\n  }\r\n\r\n  onRemoveLibrary(lib) {\r\n    const { mainData } = this;\r\n\r\n    mainData.children = mainData.children.filter(l => {\r\n      return l.name !== lib;\r\n    });\r\n\r\n    this.createPack(mainData);\r\n  }\r\n\r\n  onRemoveCategory(lib, cat) {\r\n    const library = this.findLibrary(lib);\r\n    library.children = library.children.filter(l => l.name !== cat);\r\n    this.createPack(library);\r\n  }\r\n\r\n  onRemoveItem(lib, cat, it) {\r\n    const library = this.findLibrary(lib);\r\n    const category = this.findCategory(library, cat);\r\n\r\n    category.children = category.children.filter(l => l.name !== it);\r\n    this.createPack(category);\r\n  }\r\n\r\n  onChangeFromEditor(lib, cat, editorData) {\r\n    const { mainData } = this;\r\n\r\n    const library = this.findLibrary(lib);\r\n    let category = this.findCategory(library, cat);\r\n\r\n    const root = {\r\n      name: category.name,\r\n      value: 1,\r\n      children: [],\r\n      id: category.id,\r\n      level: 2\r\n    };\r\n\r\n    category = this.normalizeData(editorData, root);\r\n\r\n    const libIndex = findIndex(mainData.children, [\"name\", lib]);\r\n    const catIndex = findIndex(library.children, [\"name\", cat]);\r\n\r\n    mainData.children[libIndex].children[catIndex] = category;\r\n    this.createPack(category);\r\n  }\r\n\r\n  onAddLibrary(newLib) {\r\n    const { mainData } = this;\r\n\r\n    mainData.children.push({\r\n      name: newLib,\r\n      value: 1,\r\n      children: [],\r\n      id: v4(),\r\n      level: 1\r\n    });\r\n\r\n    this.createPack(mainData);\r\n  }\r\n\r\n  onAddCategory(lib, newCat) {\r\n    const library = this.findLibrary(lib);\r\n\r\n    library.children.push({\r\n      name: newCat,\r\n      value: 1,\r\n      children: [],\r\n      id: v4(),\r\n      level: 2\r\n    });\r\n\r\n    this.createPack(library);\r\n  }\r\n\r\n  onBack(lib) {\r\n    const { mainData } = this;\r\n\r\n    if (lib) {\r\n      const library = this.findLibrary(lib);\r\n      return this.createPack(library);\r\n    }\r\n\r\n    this.createPack(mainData);\r\n  }\r\n}\r\n","import * as access from \"../../access\";\r\nimport { dropCircles } from \"../utils/canvasActions\";\r\n\r\nlet tagsContexts = [];\r\n\r\nexport default class Tag {\r\n  constructor(params) {\r\n    const {\r\n      canvas,\r\n      width,\r\n      height,\r\n      id,\r\n      label,\r\n      color,\r\n      index,\r\n      onSelect,\r\n      selected\r\n    } = params;\r\n\r\n    this.onSelect = onSelect;\r\n    this.selected = selected;\r\n    this.canvas = canvas;\r\n    this.width = width;\r\n    this.height = height;\r\n    this.id = id;\r\n    this.label = label || id;\r\n    this.color = color;\r\n    this.index = index;\r\n\r\n    this.initPosition();\r\n    this.init();\r\n\r\n    tagsContexts.push(this);\r\n  }\r\n\r\n  initPosition() {\r\n    this.tagHeight = 34;\r\n    this.tagWidth = 80;\r\n    const margin = 15;\r\n\r\n    this.positionX = this.width - (this.tagWidth + margin);\r\n    const deltaY = this.tagHeight + 10;\r\n    this.positionY = margin + deltaY * this.index;\r\n  }\r\n\r\n  init() {\r\n    this.mainGroup = this.canvas.append(\"g\").attr(\"id\", this.id);\r\n    this.mainGroup.attr(\"opacity\", 0.5);\r\n    if (this.selected) {\r\n      this.mainGroup.attr(\"opacity\", 1);\r\n    }\r\n\r\n    this.paintTag();\r\n    this.paintText();\r\n\r\n    const tags = this.mainGroup.selectAll(\"rect\");\r\n    const texts = this.mainGroup.selectAll(\"text\");\r\n\r\n    dropCircles(\r\n      this.mainGroup,\r\n      this.height,\r\n      tags,\r\n      access.color(\"tags.moveOnTag\")\r\n    );\r\n    dropCircles(\r\n      this.mainGroup,\r\n      this.height,\r\n      texts,\r\n      access.color(\"tags.moveOnText\")\r\n    );\r\n\r\n    this.mouseEvents();\r\n  }\r\n\r\n  removeTag() {\r\n    this.mainGroup.selectAll('rect')\r\n      .transition()\r\n      .duration(700)\r\n      .attr(\"width\", 0)\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n\r\n      this.mainGroup.selectAll('text')\r\n      .transition()\r\n      .duration(700)\r\n      .attr(\"font-size\", 0)\r\n      .transition()\r\n      .duration(10)\r\n      .remove();\r\n\r\n      this.mainGroup\r\n      .transition()\r\n      .duration(700)\r\n      .remove();\r\n  }\r\n\r\n  mouseEvents() {\r\n    if (this.selected) {\r\n      this.mainGroup.attr(\"opacity\", 1);\r\n    }\r\n\r\n    this.mainGroup.on(\"mouseenter\", () => {\r\n      this.mainGroup.attr(\"opacity\", 0.8);\r\n    });\r\n\r\n    this.mainGroup.on(\"mouseleave\", () => {\r\n      if (this.selected) {\r\n        this.mainGroup.attr(\"opacity\", 1);\r\n      } else {\r\n        this.mainGroup.attr(\"opacity\", 0.5);\r\n      }\r\n    });\r\n\r\n    this.mainGroup.on(\"click\", () => {\r\n      this.mainGroup.attr(\"opacity\", 1);\r\n      this.onSelect(this.id);\r\n    });\r\n  }\r\n\r\n  setSelected(selected) {\r\n    this.selected = selected;\r\n\r\n    if (!selected) {\r\n      this.mainGroup.attr(\"opacity\", 0.5);\r\n    }\r\n  }\r\n\r\n  paintText() {\r\n    const { mainGroup, positionX, positionY, tagWidth, tagHeight } = this;\r\n\r\n    const x = positionX + tagWidth / 2;\r\n    const y = positionY + tagHeight / 2 + 3;\r\n\r\n    const enterTexts = t => {\r\n      t.enter()\r\n        .append(\"text\")\r\n        .attr(\"transform\", `translate(${x},${y})`)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"font-size\", \"0\")\r\n        .attr(\"class\", \"light-text\")\r\n        .text(d => d.label)\r\n        .transition()\r\n        .duration(2000)\r\n        .attr(\"font-size\", 12);\r\n    };\r\n\r\n    const texts = mainGroup.selectAll(\"text\").data([this], d => d.id);\r\n    enterTexts(texts);\r\n\r\n    return texts;\r\n  }\r\n\r\n  paintTag() {\r\n    const {\r\n      mainGroup,\r\n      color,\r\n      positionX,\r\n      positionY,\r\n      tagHeight,\r\n      tagWidth\r\n    } = this;\r\n\r\n    const enterTags = t => {\r\n      t.enter()\r\n        .append(\"rect\")\r\n        .attr(\"width\", 0)\r\n        .attr(\"height\", tagHeight)\r\n        .attr(\"rx\", 10)\r\n        .attr(\"transform\", `translate(${positionX},${positionY})`)\r\n        .attr(\"fill\", color)\r\n        .transition()\r\n        .duration(700)\r\n        .attr(\"transform\", `translate(${positionX},${positionY})`)\r\n        .attr(\"width\", tagWidth)\r\n        .attr(\"height\", tagHeight);\r\n    };\r\n\r\n    const tags = mainGroup.selectAll(\"rect\").data([this], d => d.id);\r\n    enterTags(tags);\r\n\r\n    return tags;\r\n  }\r\n}\r\n","import * as d3 from \"d3\";\r\nimport Pack from \"./Pack\";\r\nimport * as access from \"../../access\";\r\nimport { isEmpty } from \"lodash\";\r\nimport Tag from \"../paint/Tag\";\r\n\r\nexport default class TypesPack extends Pack {\r\n  constructor(params) {\r\n    super(params);\r\n\r\n    this.limitByLevel = 2;\r\n    this.dragCircle = null;\r\n    this.dragText = null;\r\n    this.blockDrag = false;\r\n    this.firstMove = true;\r\n    this.panelIsopen = false;\r\n\r\n    this.addToScheme = () => {};\r\n    this.setDrag = () => {};\r\n  }\r\n\r\n  setAddToScheme(func) {\r\n    this.addToScheme = func;\r\n  }\r\n\r\n  setDragState(func) {\r\n    this.setDrag = func;\r\n  }\r\n\r\n  getXyFromEvent() {\r\n    const event = d3.event.sourceEvent;\r\n    let x = event.offsetX;\r\n    let y = event.offsetY;\r\n\r\n    const { prevX } = this.getPrevCircle();\r\n    if(prevX<100 && !this.firstMove){\r\n      x = prevX + event.movementX;\r\n    }\r\n\r\n    return { x, y };\r\n  }\r\n\r\n  getPrevCircle() {\r\n    const { dragCircle } = this;\r\n\r\n    const prevX = Number(dragCircle.attr(\"cx\"));\r\n    const prevY = Number(dragCircle.attr(\"cy\"));\r\n    const prevR = Number(dragCircle.attr(\"r\"));\r\n    const prevT = dragCircle.attr(\"transform\");\r\n\r\n    return { prevX, prevY, prevR, prevT };\r\n  }\r\n\r\n  getPrevText() {\r\n    const { dragText } = this;\r\n\r\n    const prevFontSize = dragText.attr(\"font-size\");\r\n    const prevText = dragText.text();\r\n\r\n    return { prevText, prevFontSize };\r\n  }\r\n\r\n  initDragStart(d, i, items) {\r\n    this.dragCircle = d3.select(`#circle-${d.data.id}`);\r\n    this.dragText = d3.select(`#text-${d.data.id}`);\r\n\r\n    const { prevX, prevY, prevR, prevT } = this.getPrevCircle();\r\n    const { prevText, prevFontSize } = this.getPrevText();\r\n\r\n    this.TempText = prevText;\r\n    this.TempFontSize = prevFontSize;\r\n    this.TempX = prevX;\r\n    this.TempY = prevY;\r\n    this.TempR = prevR;\r\n    this.TempT = prevT;\r\n  }\r\n\r\n  startDragCircle() {\r\n    const { x, y } = this.getXyFromEvent();\r\n\r\n    this.dragCircle\r\n      .attr(\"transform\", null)\r\n      .attr(\"cx\", x)\r\n      .attr(\"cy\", y)\r\n      .transition()\r\n      .duration(access.time(\"typesPack.transitions\"))\r\n      .attr(\"r\", 10)\r\n      .attr(\"fill-opacity\", 1);\r\n  }\r\n\r\n  endDragCircle() {\r\n    this.dragCircle\r\n      .transition()\r\n      .duration(access.time(\"typesPack.transitions\"))\r\n      .attr(\"r\", this.TempR)\r\n      .attr(\"cx\", this.TempX)\r\n      .attr(\"cy\", this.TempY)\r\n      .attr(\"transform\", this.TempT)\r\n      .attr(\"fill-opacity\", 0.5);\r\n  }\r\n\r\n  startDragText() {\r\n    const { x, y } = this.getXyFromEvent();\r\n\r\n    const addText = d => {\r\n      this.setDrag(d.data.name);\r\n      return d.data.name;\r\n    };\r\n\r\n    this.dragText\r\n      .attr(\"transform\", null)\r\n      .attr(\"class\", this.textClasses.out)\r\n      .attr(\"y\", y + 30)\r\n      .attr(\"x\", x)\r\n      .transition()\r\n      .duration(access.time(\"typesPack.transitions\"))\r\n      .attr(\"font-size\", \"20px\")\r\n      .text(addText);\r\n  }\r\n\r\n  endDragText() {\r\n    const childrenScope = d => {\r\n      return (\r\n        isEmpty(d.data.children) ||\r\n        d.depth === 2 ||\r\n        d.data.level >= this.limitByLevel\r\n      );\r\n    };\r\n\r\n    this.dragText\r\n      .transition()\r\n      .duration(access.time(\"typesPack.transitions\"))\r\n      .attr(\"x\", this.TempX)\r\n      .attr(\"y\", this.TempY)\r\n      .attr(\"class\", d =>\r\n        childrenScope(d) ? this.textClasses.in : this.textClasses.out\r\n      )\r\n      .text(this.TempText)\r\n      .attr(\"transform\", this.TempT)\r\n      .attr(\"font-size\", this.TempFontSize);\r\n  }\r\n\r\n  onDrag() {\r\n    const { dragCircle, dragText } = this;\r\n    const { x, y } = this.getXyFromEvent();\r\n\r\n    dragText\r\n      .attr(\"x\", x)\r\n      .attr(\"y\", y + 30);\r\n    dragCircle\r\n      .attr(\"cx\", x)\r\n      .attr(\"cy\", y);\r\n  }\r\n\r\n  stop(d) {\r\n    if (d.data.level < 2) return true;\r\n    if (this.blockDrag) return true;\r\n  }\r\n\r\n  block() {\r\n    this.blockDrag = true;\r\n    setTimeout(() => {\r\n      this.blockDrag = false;\r\n    }, 500);\r\n  }\r\n\r\n  handleNodeDrag(circles, texts) {\r\n    const dragAction = d3\r\n      .drag()\r\n      .on(\"drag\", d => {\r\n        if (this.stop(d)) return null;\r\n        if (this.firstMove) {\r\n          this.startDragCircle();\r\n          this.startDragText();\r\n        }\r\n\r\n        this.onDrag();\r\n        this.firstMove = false;\r\n      })\r\n      .on(\"end\", d => {\r\n        if (this.stop(d)) return null;\r\n        this.block();\r\n        this.checkDrop(d);\r\n        this.endDragText();\r\n        this.endDragCircle();\r\n        this.setDrag(false);\r\n        this.firstMove = true;\r\n      })\r\n      .on(\"start\", (d, i, items) => {\r\n        if (this.stop(d)) return null;\r\n        this.initDragStart(d);\r\n      });\r\n\r\n    circles.call(dragAction);\r\n    texts.call(dragAction);\r\n  }\r\n\r\n  checkDrop(d) {\r\n    let { x, y } = this.getXyFromEvent();\r\n\r\n    if (x < 0) {\r\n      setTimeout(() => {\r\n        this.addToScheme(d.data.nameKey);\r\n      }, access.time(\"addItemPanel.addToScheme\"));\r\n\r\n      this.canvas\r\n        .append(\"circle\")\r\n        .attr(\"cx\", x)\r\n        .attr(\"cy\", y)\r\n        .attr(\"fill\", access.color(\"canvases.fg\"))\r\n        .attr(\"r\", 10)\r\n        .transition()\r\n        .duration(access.time(\"addItemPanel.addToScheme\"))\r\n        .attr(\"fill\", access.color(\"canvases.bg\"))\r\n        .attr(\"r\", 4)\r\n        .attr(\"cx\", 0)\r\n        .transition()\r\n        .duration(10)\r\n        .remove();\r\n    }\r\n  }\r\n\r\n  _clickAction() {\r\n    // const backBtn = this.canvas.append('g');\r\n    const { canvas, width, height } = this;\r\n    let backTag;\r\n\r\n    const onSelect = () => {\r\n      this.createPack(this.mainData);\r\n      backTag.removeTag();\r\n    };\r\n\r\n    backTag = new Tag({\r\n      selected: false,\r\n      onSelect,\r\n      canvas,\r\n      width,\r\n      height,\r\n      id: \"back\",\r\n      index: 2,\r\n      color: access.color(\"tags.bg\")\r\n    });\r\n  }\r\n}\r\n","import * as access from \"../../access\";\r\nimport * as d3 from \"d3\";\r\n\r\nexport const paintFrame = (canvas, width, height) => {\r\n  const frame = canvas\r\n    .append(\"rect\")\r\n    .attr(\"width\", width)\r\n    .attr(\"height\", height)\r\n    .attr(\"fill\", access.color(\"canvases.bg\"));\r\n\r\n  return frame;\r\n};\r\n\r\nexport const openAddPanel = () => {\r\n  d3.select(\"#addPanel\")\r\n    .transition()\r\n    .duration(access.time(\"addItemPanel.open\"))\r\n    .attr(\"width\", 100);\r\n\r\n  // d3.select(\"#addLabel\")\r\n  //   .attr(\"font-size\", \"0\")\r\n  //   .transition()\r\n  //   .duration(access.time(\"addItemPanel.openText\"))\r\n  //   .attr(\"font-size\", 16);\r\n};\r\n\r\nexport const closeAddPanel = () => {\r\n  d3.select(\"#addPanel\")\r\n    .transition()\r\n    .duration(access.time(\"addItemPanel.close\"))\r\n    .attr(\"width\", 0);\r\n\r\n  // d3.select(\"#addLabel\")\r\n  //   .transition()\r\n  //   .duration(access.time(\"addItemPanel.closeText\"))\r\n  //   .attr(\"font-size\", 0);\r\n};\r\n\r\nexport const paintAddPanel = (canvas, height) => {\r\n  const addPanel =  canvas\r\n    .append(\"rect\")\r\n    .attr(\"id\", \"addPanel\")\r\n    .attr(\"width\", 0)\r\n    .attr(\"height\", height)\r\n    .attr(\"fill\", \"url(#svgGradient)\");\r\n\r\n  // canvas\r\n  //   .append(\"text\")\r\n  //   .attr(\"id\", \"addLabel\")\r\n  //   .text(\"Add\")\r\n  //   .attr(\"x\", 50)\r\n  //   .attr(\"y\", 30)\r\n  //   .attr(\"class\", \"light-text\")\r\n  //   .attr(\"text-anchor\", \"middle\")\r\n  //   .attr(\"font-size\", \"0\");\r\n\r\n    return addPanel;\r\n};\r\n\r\nexport const createGradient = defs => {\r\n  var gradient = defs\r\n    .append(\"linearGradient\")\r\n    .attr(\"id\", \"svgGradient\")\r\n    .attr(\"x1\", \"100%\")\r\n    .attr(\"x2\", \"0%\")\r\n    .attr(\"y1\", \"0%\")\r\n    .attr(\"y2\", \"0%\");\r\n\r\n  gradient\r\n    .append(\"stop\")\r\n    .attr(\"class\", \"start\")\r\n    .attr(\"offset\", \"0%\")\r\n    .attr(\"stop-color\", access.color(\"canvases.bg\"))\r\n    .attr(\"stop-opacity\", 0.5);\r\n\r\n  gradient\r\n    .append(\"stop\")\r\n    .attr(\"class\", \"end\")\r\n    .attr(\"offset\", \"100%\")\r\n    .attr(\"stop-color\", access.color(\"canvases.fg\"))\r\n    .attr(\"stop-opacity\", 1);\r\n};\r\n","import React from \"react\";\r\n\r\nimport Start from \"../tools/Start\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\nimport * as access from \"../access\";\r\nimport { get } from \"../requests\";\r\n\r\nimport { move } from \"./utils/canvasActions\";\r\nimport * as libsActions from \"../../tree/actions/libs\";\r\nimport * as catsActions from \"../../tree/actions/cats\";\r\nimport * as itemsActions from \"../../tree/actions/items\";\r\nimport LibraryPack from \"../canvases/pack/LibraryPack\";\r\nimport TypesPack from \"../canvases/pack/TypesPack\";\r\nimport {\r\n  setLibraryPack,\r\n  getLibraryPack,\r\n  getTypesPack,\r\n  setTypesPack\r\n} from \"../canvases/utils/packUtils\";\r\n\r\nimport {\r\n  paintFrame,\r\n  openAddPanel,\r\n  closeAddPanel,\r\n  paintAddPanel,\r\n  createGradient\r\n} from \"./paint/Frames\";\r\nimport Tag from \"../canvases/paint/Tag\";\r\n\r\nimport \"./style.css\";\r\n\r\nfunction MainCanvas() {\r\n  const { viewKey, dispatch } = useBranch({ viewKey: [\"viewKey\"] });\r\n\r\n  const getFlex = () => {\r\n    const schemePanelSize = access.dim(\"flexViews.schemePanel\");\r\n    const leftPanelSize = access.dim(\"flexViews.leftPanel\");\r\n    const size = leftPanelSize + schemePanelSize;\r\n    if (viewKey !== \"initKey\") return 1 - size;\r\n    return 1 - leftPanelSize;\r\n  };\r\n\r\n  const getCategoriesFromLibrary = lib => {\r\n    get(\"/getCategoriesFromLibrary\", { library: lib }).then(res => {\r\n      dispatch(catsActions.setCats, res.data);\r\n      setTimeout(() => {\r\n        dispatch(libsActions.setLibToFocus, lib);\r\n      });\r\n    });\r\n  };\r\n\r\n  const getItemsFromCategory = cat => {\r\n    dispatch(catsActions.getItemsFromCategory, cat);\r\n    dispatch(catsActions.setKey, { newKey: \"showScheme\", schemeName: cat });\r\n  };\r\n\r\n  const handleClickOnItem = label => {\r\n    dispatch(itemsActions.setItemToFocus, label);\r\n    dispatch(itemsActions.setSelected, label);\r\n  };\r\n\r\n  const handleAddFromPack = type => {\r\n    dispatch(itemsActions.onAddFromPack, type);\r\n  };\r\n\r\n  const handleDragState = value => {\r\n    dispatch(itemsActions.changeDragState, value);\r\n  };\r\n\r\n  const getAllLibs = (canvas, width, height) => {\r\n    get(\"/getAll\").then(res => {\r\n      const {data, projectName } = res.data;\r\n\r\n      const libraryPack = new LibraryPack({ canvas, width, height });\r\n      libraryPack.initWithData(data,projectName);\r\n      libraryPack.setLevelClick(1, getCategoriesFromLibrary);\r\n      libraryPack.setLevelClick(2, getItemsFromCategory);\r\n      libraryPack.setLevelClick(3, handleClickOnItem);\r\n\r\n      setLibraryPack(libraryPack);\r\n    });\r\n  };\r\n\r\n  const getAllType = (canvas, width, height) => {\r\n    get(\"/getTypesArrangeByGroups\").then(res => {\r\n      const data = res.data;\r\n      const typesPack = new TypesPack({\r\n        canvas,\r\n        width,\r\n        height,\r\n        showMainCircle: false\r\n      });\r\n      typesPack.setAddToScheme(handleAddFromPack);\r\n      typesPack.setDragState(handleDragState);\r\n      typesPack.initWithData(data);\r\n      typesPack.scaleDown();\r\n      setTypesPack(typesPack);\r\n    });\r\n  };\r\n\r\n  const createDefs = canvas => {\r\n    var defs = canvas.append(\"defs\");\r\n    createGradient(defs);\r\n  };\r\n\r\n  const paintTabs = (canvas, width, height) => {\r\n    const onSelect = id => {\r\n      projectTag.setSelected(id === \"project\");\r\n      typesTag && typesTag.setSelected(id === \"types\");\r\n      // menuTag.setSelected(id === \"menu\");\r\n\r\n      switch (id) {\r\n        case \"types\":\r\n          getLibraryPack().scaleDown();\r\n          getTypesPack().scaleUp();\r\n          openAddPanel();\r\n          break;\r\n\r\n        case \"project\":\r\n          getLibraryPack().scaleUp();\r\n          getTypesPack().scaleDown();\r\n          closeAddPanel();\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    };\r\n\r\n    const initKey = viewKey === \"initKey\";\r\n\r\n    const projectTag = new Tag({\r\n      selected: true,\r\n      onSelect,\r\n      canvas,\r\n      width,\r\n      height,\r\n      id: \"project\",\r\n      index: 0,\r\n      color: access.color(\"tags.bg\")\r\n    });\r\n\r\n    let typesTag;\r\n\r\n    if (!initKey) {\r\n      typesTag = new Tag({\r\n        selected: false,\r\n        onSelect,\r\n        canvas,\r\n        width,\r\n        height,\r\n        id: \"types\",\r\n        index: 1,\r\n        color: access.color(\"tags.bg\")\r\n      });\r\n    }\r\n\r\n    // const menuTag = new Tag({\r\n    //   selected: false,\r\n    //   onSelect,\r\n    //   canvas,\r\n    //   width,\r\n    //   height,\r\n    //   id: \"menu\",\r\n    //   index: initKey ? 1 : 2,\r\n    //   color: access.color(\"tags.bg\")\r\n    // });\r\n  };\r\n\r\n  const onCanvasReady = (canvas, width, height) => {\r\n    createDefs(canvas);\r\n    const frame = paintFrame(canvas, width, height);\r\n    const addPanel = paintAddPanel(canvas, height);\r\n    move(canvas, frame, access.color(\"canvases.fg\"));\r\n    move(canvas, addPanel, access.color(\"canvases.fg\"));\r\n\r\n    paintTabs(canvas, width, height);\r\n    getAllLibs(canvas, width, height);\r\n    getAllType(canvas, width, height);\r\n  };\r\n\r\n  const renderStart = () => {\r\n    const margin = {\r\n      top: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0\r\n    };\r\n\r\n    return <Start canvasReady={onCanvasReady} margin={margin} />;\r\n  };\r\n\r\n  const zIndex = access.dim(\"zIndexViews.schemePanel\"); // check\r\n\r\n  return (\r\n    <div style={{ flex: getFlex(), zIndex: zIndex, width: \"100%\" }}>\r\n      {renderStart()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainCanvas;\r\n","import React from \"react\";\r\nimport { useBranch } from \"baobab-react/hooks\";\r\n\r\nimport * as access from \"../plugins/access\";\r\n\r\nimport Mask from \"../plugins/tools/Mask\";\r\nimport MenuPanel from \"./MenuPanel\";\r\nimport SchemePanel from \"./SchemePanel\";\r\nimport MainCanvas from \"../plugins/canvases/MainCanvas\";\r\n\r\nfunction Main() {\r\n  const { viewKey } = useBranch({ viewKey: [\"viewKey\"] });\r\n\r\n  return (\r\n    <Mask opacity={1} mask={access.color(\"backgrounds.secondary\")} style={{ display: \"flex\" }}>\r\n      <MenuPanel viewKey={viewKey} />\r\n      <SchemePanel />\r\n      <MainCanvas key={viewKey} />\r\n    </Mask>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\nimport {useRoot} from 'baobab-react/hooks';\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport { color } from \"./plugins/access\";\nimport Main from \"./Views/Main\";\n\nconst primary = color('materialUI.primary');\nconst secondary = color('materialUI.secondary');\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: primary\n    },\n    secondary: {\n      main: secondary\n    }\n  }\n});\n\n\nfunction App({tree}) {\n\n  const Root = useRoot(tree);\n\n  return (\n    <Root>\n      <ThemeProvider theme={theme}>\n        <Main/>\n      </ThemeProvider>\n    </Root>\n  );\n}\n\nexport default App;\n","import Baobab from 'baobab';\r\n\r\nconst tree = new Baobab({\r\n  projectName: \"project\",\r\n  libs: [],\r\n  cats: [],\r\n  items: [],\r\n  mockData: null,\r\n  focus: {\r\n    lib: null,\r\n    cat: null,\r\n    item: null\r\n  },\r\n\r\n  packView: 'project', // 'types'\r\n  drag: false,\r\n  selected: null,\r\n  selectedCategory: null,\r\n  selectedLibrary: null,\r\n\r\n  collapse: false,\r\n  viewKey: 'initKey',\r\n});\r\n\r\nwindow.tree = tree;\r\n\r\nexport default tree;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\nimport tree from \"./tree/tree\";\n\nReactDOM.render(<App tree={tree} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n"],"sourceRoot":""}